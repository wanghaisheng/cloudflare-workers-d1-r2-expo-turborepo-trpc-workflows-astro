This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: input/
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

<additional_info>

</additional_info>

</file_summary>

<directory_structure>
.env.example
.gitattributes
.gitattributes copy
.gitignore
.npmrc
.nvmrc
apps/apiservice/eslint.config.js
apps/apiservice/package.json
apps/apiservice/src/index.ts
apps/apiservice/tsconfig.json
apps/apiservice/turbo.json
apps/apiservice/wrangler.toml
apps/astro/.gitignore
apps/astro/astro.config.mjs
apps/astro/components.json
apps/astro/eslint.config.js
apps/astro/functions/[[path]].js
apps/astro/package.json
apps/astro/postcss.config.js
apps/astro/public/favicon.svg
apps/astro/README.md
apps/astro/src/components/react/hero.tsx
apps/astro/src/components/ui/button.tsx
apps/astro/src/components/ui/dialog.tsx
apps/astro/src/components/ui/input.tsx
apps/astro/src/env.d.ts
apps/astro/src/layouts/Layout.astro
apps/astro/src/lib/utils.ts
apps/astro/src/pages/index.astro
apps/astro/src/styles/globals.css
apps/astro/tailwind.config.js
apps/astro/tsconfig.json
apps/astro/turbo.json
apps/astro/wrangler.toml
apps/expo/.env.example
apps/expo/.npmrc
apps/expo/app.json
apps/expo/app/_layout.tsx
apps/expo/app/(auth)/_layout.tsx
apps/expo/app/(auth)/sign-in.tsx
apps/expo/app/(auth)/sign-up.tsx
apps/expo/app/(tabs)/_layout.tsx
apps/expo/app/(tabs)/account.tsx
apps/expo/app/(tabs)/add.tsx
apps/expo/app/(tabs)/lore.tsx
apps/expo/app/index.tsx
apps/expo/babel.config.ts
apps/expo/eslint.config.mjs
apps/expo/package.json
apps/expo/README.md
apps/expo/tsconfig.json
apps/expo/turbo.json
apps/expo/utils/api.tsx
apps/expo/utils/base-url.tsx
apps/expo/utils/TRPCProvider.tsx
apps/workflows/.editorconfig
apps/workflows/.gitignore
apps/workflows/.prettierrc
apps/workflows/eslint.config.js
apps/workflows/package.json
apps/workflows/README.md
apps/workflows/src/index.ts
apps/workflows/src/workflows/daily-recap.ts
apps/workflows/src/workflows/get-users-for-recap.ts
apps/workflows/tsconfig.json
apps/workflows/turbo.json
apps/workflows/worker-configuration.d.ts
apps/workflows/wrangler.toml
CONTRIBUTING.md
DEVELOPMENT_GUIDELINES.md
LICENSE
package.json
packages/db/drizzle.config.ts
packages/db/eslint.config.js
packages/db/migrations/0000_youthful_proudstar.sql
packages/db/migrations/0001_swift_puck.sql
packages/db/migrations/0002_sharp_leech.sql
packages/db/migrations/0003_swift_sunfire.sql
packages/db/migrations/0004_thin_thunderbolt.sql
packages/db/migrations/0005_chunky_rocket_raccoon.sql
packages/db/migrations/0006_pretty_morbius.sql
packages/db/migrations/0007_chief_quentin_quire.sql
packages/db/migrations/meta/_journal.json
packages/db/migrations/meta/0000_snapshot.json
packages/db/migrations/meta/0001_snapshot.json
packages/db/migrations/meta/0002_snapshot.json
packages/db/migrations/meta/0003_snapshot.json
packages/db/migrations/meta/0004_snapshot.json
packages/db/migrations/meta/0005_snapshot.json
packages/db/migrations/meta/0006_snapshot.json
packages/db/migrations/meta/0007_snapshot.json
packages/db/package.json
packages/db/src/client.ts
packages/db/src/index.ts
packages/db/src/schema.ts
packages/db/tsconfig.json
packages/db/wrangler.toml
packages/trpc/eslint.config.js
packages/trpc/package.json
packages/trpc/src/index.ts
packages/trpc/src/root.ts
packages/trpc/src/router/moments.ts
packages/trpc/src/router/post.ts
packages/trpc/src/router/recaps.ts
packages/trpc/src/router/user.ts
packages/trpc/src/trpc.ts
packages/trpc/src/types.ts
packages/trpc/tsconfig.json
pnpm-workspace.yaml
README.md
tooling/eslint/base.js
tooling/eslint/nextjs.js
tooling/eslint/package.json
tooling/eslint/react.js
tooling/eslint/tsconfig.json
tooling/eslint/types.d.ts
tooling/github/package.json
tooling/github/setup/action.yml
tooling/prettier/index.js
tooling/prettier/package.json
tooling/prettier/tsconfig.json
tooling/tailwind/base.ts
tooling/tailwind/eslint.config.js
tooling/tailwind/native.ts
tooling/tailwind/package.json
tooling/tailwind/tsconfig.json
tooling/tailwind/web.ts
tooling/typescript/base.json
tooling/typescript/internal-package.json
tooling/typescript/package.json
turbo.json
turbo/generators/config.ts
turbo/generators/templates/eslint.config.js.hbs
turbo/generators/templates/package.json.hbs
turbo/generators/templates/tsconfig.json.hbs
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".env.example">
INNGEST_EVENT_KEY=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_DATABASE_ID=
CLOUDFLARE_D1_TOKEN=
</file>

<file path=".gitattributes">
# Auto detect text files and perform LF normalization
* text=auto
</file>

<file path=".gitattributes copy">
# Auto detect text files and perform LF normalization
* text=auto
</file>

<file path=".gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
node_modules
.pnp
.pnp.js

# testing
coverage

# next.js
.next/
out/
next-env.d.ts

# nitro
.nitro/
.output/

# expo
.expo/
expo-env.d.ts
apps/expo/.gitignore
apps/expo/ios
apps/expo/android

# production
build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# local env files
.env
.env*.local

# vercel
.vercel

# typescript
dist/
.cache

# turbo
.turbo
/apps/expo-app/android/app/src/debug/AndroidManifest.xml
/apps/expo-app/android/app/src/main/AndroidManifest.xml
/apps/expo-app/android/app/build.gradle
/apps/expo-app/android/build.gradle
/apps/expo-app/android/app/src/main/res/values/colors.xml
/apps/expo-app/android/app/src/main/res/values-night/colors.xml
/apps/expo-app/android/app/debug.keystore
/apps/expo-app/android/gradle.properties
/apps/expo-app/android/gradle/wrapper/gradle-wrapper.jar
/apps/expo-app/android/gradle/wrapper/gradle-wrapper.properties
/apps/expo-app/android/gradlew
/apps/expo-app/android/gradlew.bat
/apps/expo-app/android/app/src/main/res/mipmap-hdpi/ic_launcher.webp
/apps/expo-app/android/app/src/main/res/mipmap-mdpi/ic_launcher.webp
/apps/expo-app/android/app/src/main/res/mipmap-xhdpi/ic_launcher.webp
/apps/expo-app/android/app/src/main/res/mipmap-xxhdpi/ic_launcher.webp
/apps/expo-app/android/app/src/main/res/mipmap-xxxhdpi/ic_launcher.webp
/apps/expo-app/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
/apps/expo-app/android/app/src/main/res/drawable/ic_launcher_background.xml
/apps/expo-app/android/app/src/main/res/mipmap-hdpi/ic_launcher_foreground.webp
/apps/expo-app/android/app/src/main/res/mipmap-mdpi/ic_launcher_foreground.webp
/apps/expo-app/android/app/src/main/res/mipmap-xhdpi/ic_launcher_foreground.webp
/apps/expo-app/android/app/src/main/res/mipmap-xxhdpi/ic_launcher_foreground.webp
/apps/expo-app/android/app/src/main/res/mipmap-xxxhdpi/ic_launcher_foreground.webp
/apps/expo-app/android/app/src/main/res/mipmap-hdpi/ic_launcher_round.webp
/apps/expo-app/android/app/src/main/res/mipmap-mdpi/ic_launcher_round.webp
/apps/expo-app/android/app/src/main/res/mipmap-xhdpi/ic_launcher_round.webp
/apps/expo-app/android/app/src/main/res/mipmap-xxhdpi/ic_launcher_round.webp
/apps/expo-app/android/app/src/main/res/mipmap-xxxhdpi/ic_launcher_round.webp
/apps/expo-app/android/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
/apps/expo-app/android/app/src/main/java/com/anonymous/expoapp/MainActivity.kt
/apps/expo-app/android/app/src/main/java/com/anonymous/expoapp/MainApplication.kt
/apps/expo-app/android/app/proguard-rules.pro
/apps/expo-app/android/app/src/main/res/drawable/rn_edit_text_material.xml
/apps/expo-app/android/settings.gradle
/apps/expo-app/android/app/src/main/res/drawable-hdpi/splashscreen_logo.png
/apps/expo-app/android/app/src/main/res/drawable-mdpi/splashscreen_logo.png
/apps/expo-app/android/app/src/main/res/drawable-xhdpi/splashscreen_logo.png
/apps/expo-app/android/app/src/main/res/drawable-xxhdpi/splashscreen_logo.png
/apps/expo-app/android/app/src/main/res/drawable-xxxhdpi/splashscreen_logo.png
/apps/expo-app/android/app/src/main/res/values/strings.xml
/apps/expo-app/android/app/src/main/res/values/styles.xml
/apps/apiservice/.wrangler/
/packages/db/.wrangler/
/apps/eventsservice/.wrangler/
.dev.vars
</file>

<file path=".npmrc">
node-linker=hoisted
link-workspace-packages=true
</file>

<file path=".nvmrc">
20.16
</file>

<file path="apps/apiservice/eslint.config.js">
import baseConfig from "@acme/eslint-config/base";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: ["dist/**"],
  },
  ...baseConfig
];
</file>

<file path="apps/apiservice/package.json">
{
  "name": "@acme/apiservice",
  "version": "0.0.1",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "wrangler dev --ip 0.0.0.0 --remote",
    "build": "tsc",
    "deploy": "wrangler publish",
    "clean": "git clean -xdf .cache .turbo node_modules .wrangler"
  },
  "dependencies": {
    "@acme/db": "workspace:*",
    "@acme/trpc": "workspace:*",
    "typescript": "catalog:",
    "wrangler": "3.93.0"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "@types/node": "^20.16.11"
  }
}
</file>

<file path="apps/apiservice/src/index.ts">
// apps/apiservice/src/index.ts
import { appRouter, createContext } from '@acme/trpc';
import type { FetchCreateContextFnOptions } from '@trpc/server/adapters/fetch';
import { fetchRequestHandler } from '@trpc/server/adapters/fetch';
import type { D1Database } from '@cloudflare/workers-types';
import { getDB } from "@acme/db";
import type { R2Bucket } from '@cloudflare/workers-types';

interface Env {
  CLERK_PUBLISHABLE_KEY: string;
  CLERK_SECRET_KEY: string;
  DB: D1Database;
  IMAGES_BUCKET: R2Bucket;
}

export default {
  async fetch(request: Request, env: Env): Promise<Response> {
    const db = getDB(env);
    const corsHeaders = {
      'Access-Control-Allow-Origin': '*',
      'Access-Control-Allow-Methods': 'GET,HEAD,POST,OPTIONS',
      'Access-Control-Allow-Headers': 'Content-Type',
    };

    // Handle OPTIONS preflight requests
    if (request.method === 'OPTIONS') {
      return new Response(null, {
        headers: corsHeaders
      });
    }

    // Your existing TRPC handler
    return fetchRequestHandler({
      endpoint: '/trpc',
      req: request,
      router: appRouter,
      createContext: (opts: FetchCreateContextFnOptions) => createContext({
        ...opts,
        clerkPublicKey: env.CLERK_PUBLISHABLE_KEY,
        clerkSecretKey: env.CLERK_SECRET_KEY,
        db,
        imagesBucket: env.IMAGES_BUCKET
      }),
    });
  },
};
</file>

<file path="apps/apiservice/tsconfig.json">
{
  "extends": "@acme/tsconfig/base.json",
  "exclude": ["node_modules"]
}
</file>

<file path="apps/apiservice/turbo.json">
{
  "$schema": "https://turborepo.org/schema.json",
  "extends": ["//"],
  "tasks": {
    "dev": {
      "persistent": true,
      "interactive": true
    }
  }
}
</file>

<file path="apps/apiservice/wrangler.toml">
name = ""
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

main = "src/index.ts"

[build]
command = "pnpm run build"

[[r2_buckets]]
bucket_name = ""
preview_bucket_name = ""
binding = ""

[[d1_databases]]
binding = "DB"
database_name = ""
database_id = ""


# You definitely want to make anything secret an actual secret key using wrangler, so in a production app do that instead of setting here
[vars]
WRANGLER_BUILD_CONDITIONS=""
WRANGLER_BUILD_PLATFORM="node"
CLERK_PUBLISHABLE_KEY = ""
CLERK_SECRET_KEY = ""

[dev]
port = 8787
</file>

<file path="apps/astro/.gitignore">
# build output
dist/
# generated types
.astro/

# dependencies
node_modules/

# logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

.wrangler/

# environment variables
.env
.env.production

# macOS-specific files
.DS_Store

# jetbrains setting folder
.idea/
</file>

<file path="apps/astro/astro.config.mjs">
import { defineConfig } from 'astro/config';

import react from '@astrojs/react';

import tailwind from '@astrojs/tailwind';

import cloudflare from '@astrojs/cloudflare';

// https://astro.build/config
export default defineConfig({
  output: 'server',
  adapter: cloudflare({
    mode: 'directory'
  }),
  integrations: [react(), tailwind({applyBaseStyles: false,})]
});
</file>

<file path="apps/astro/components.json">
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.js",
    "css": "src/styles/globals.css",
    "baseColor": "slate",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}
</file>

<file path="apps/astro/eslint.config.js">
import baseConfig, { restrictEnvAccess } from "@acme/eslint-config/base";
import nextjsConfig from "@acme/eslint-config/nextjs";
import reactConfig from "@acme/eslint-config/react";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: [".astro/**"],
  },
  ...baseConfig,
  ...reactConfig,
  ...nextjsConfig,
  ...restrictEnvAccess,
];
</file>

<file path="apps/astro/functions/[[path]].js">
globalThis.process = {
								argv: [],
								env: {},
							};
var ru=Object.create;var mn=Object.defineProperty;var nu=Object.getOwnPropertyDescriptor;var ou=Object.getOwnPropertyNames;var su=Object.getPrototypeOf,iu=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(e&&(t=e(e=0)),t);var pe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ut=(e,t)=>{for(var r in t)mn(e,r,{get:t[r],enumerable:!0})},au=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ou(t))!iu.call(e,o)&&o!==r&&mn(e,o,{get:()=>t[o],enumerable:!(n=nu(t,o))||n.enumerable});return e};var Qe=(e,t,r)=>(r=e!=null?ru(su(e)):{},au(t||!e||!e.__esModule?mn(r,"default",{value:e,enumerable:!0}):r,e));var js=pe(I=>{"use strict";var pt=Symbol.for("react.element"),lu=Symbol.for("react.portal"),cu=Symbol.for("react.fragment"),uu=Symbol.for("react.strict_mode"),pu=Symbol.for("react.profiler"),du=Symbol.for("react.provider"),fu=Symbol.for("react.context"),hu=Symbol.for("react.forward_ref"),Au=Symbol.for("react.suspense"),mu=Symbol.for("react.memo"),gu=Symbol.for("react.lazy"),Qs=Symbol.iterator;function yu(e){return e===null||typeof e!="object"?null:(e=Qs&&e[Qs]||e["@@iterator"],typeof e=="function"?e:null)}var Ds={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ts=Object.assign,Ns={};function qe(e,t,r){this.props=e,this.context=t,this.refs=Ns,this.updater=r||Ds}qe.prototype.isReactComponent={};qe.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qe.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ls(){}Ls.prototype=qe.prototype;function yn(e,t,r){this.props=e,this.context=t,this.refs=Ns,this.updater=r||Ds}var wn=yn.prototype=new Ls;wn.constructor=yn;Ts(wn,qe.prototype);wn.isPureReactComponent=!0;var ks=Array.isArray,Ps=Object.prototype.hasOwnProperty,En={current:null},_s={key:!0,ref:!0,__self:!0,__source:!0};function Fs(e,t,r){var n,o={},s=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)Ps.call(t,n)&&!_s.hasOwnProperty(n)&&(o[n]=t[n]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)o[n]===void 0&&(o[n]=a[n]);return{$$typeof:pt,type:e,key:s,ref:i,props:o,_owner:En.current}}function wu(e,t){return{$$typeof:pt,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cn(e){return typeof e=="object"&&e!==null&&e.$$typeof===pt}function Eu(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Rs=/\/+/g;function gn(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Eu(""+e.key):t.toString(36)}function Ht(e,t,r,n,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case pt:case lu:i=!0}}if(i)return i=e,o=o(i),e=n===""?"."+gn(i,0):n,ks(o)?(r="",e!=null&&(r=e.replace(Rs,"$&/")+"/"),Ht(o,t,r,"",function(u){return u})):o!=null&&(Cn(o)&&(o=wu(o,r+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(Rs,"$&/")+"/")+e)),t.push(o)),1;if(i=0,n=n===""?".":n+":",ks(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+gn(s,a);i+=Ht(s,t,r,l,o)}else if(l=yu(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+gn(s,a++),i+=Ht(s,t,r,l,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ot(e,t,r){if(e==null)return e;var n=[],o=0;return Ht(e,n,"","",function(s){return t.call(r,s,o++)}),n}function Cu(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var K={current:null},Kt={transition:null},vu={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:Kt,ReactCurrentOwner:En};function Ms(){throw Error("act(...) is not supported in production builds of React.")}I.Children={map:Ot,forEach:function(e,t,r){Ot(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ot(e,function(){t++}),t},toArray:function(e){return Ot(e,function(t){return t})||[]},only:function(e){if(!Cn(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};I.Component=qe;I.Fragment=cu;I.Profiler=pu;I.PureComponent=yn;I.StrictMode=uu;I.Suspense=Au;I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vu;I.act=Ms;I.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ts({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=En.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Ps.call(t,l)&&!_s.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:pt,type:e.type,key:o,ref:s,props:n,_owner:i}};I.createContext=function(e){return e={$$typeof:fu,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:du,_context:e},e.Consumer=e};I.createElement=Fs;I.createFactory=function(e){var t=Fs.bind(null,e);return t.type=e,t};I.createRef=function(){return{current:null}};I.forwardRef=function(e){return{$$typeof:hu,render:e}};I.isValidElement=Cn;I.lazy=function(e){return{$$typeof:gu,_payload:{_status:-1,_result:e},_init:Cu}};I.memo=function(e,t){return{$$typeof:mu,type:e,compare:t===void 0?null:t}};I.startTransition=function(e){var t=Kt.transition;Kt.transition={};try{e()}finally{Kt.transition=t}};I.unstable_act=Ms;I.useCallback=function(e,t){return K.current.useCallback(e,t)};I.useContext=function(e){return K.current.useContext(e)};I.useDebugValue=function(){};I.useDeferredValue=function(e){return K.current.useDeferredValue(e)};I.useEffect=function(e,t){return K.current.useEffect(e,t)};I.useId=function(){return K.current.useId()};I.useImperativeHandle=function(e,t,r){return K.current.useImperativeHandle(e,t,r)};I.useInsertionEffect=function(e,t){return K.current.useInsertionEffect(e,t)};I.useLayoutEffect=function(e,t){return K.current.useLayoutEffect(e,t)};I.useMemo=function(e,t){return K.current.useMemo(e,t)};I.useReducer=function(e,t,r){return K.current.useReducer(e,t,r)};I.useRef=function(e){return K.current.useRef(e)};I.useState=function(e){return K.current.useState(e)};I.useSyncExternalStore=function(e,t,r){return K.current.useSyncExternalStore(e,t,r)};I.useTransition=function(){return K.current.useTransition()};I.version="18.3.1"});var Je=pe((ry,$s)=>{"use strict";$s.exports=js()});var Di=pe(Ge=>{"use strict";var ai=Je();function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y=Object.prototype.hasOwnProperty,xu=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Us={},Os={};function li(e){return Y.call(Os,e)?!0:Y.call(Us,e)?!1:xu.test(e)?Os[e]=!0:(Us[e]=!0,!1)}function J(e,t,r,n,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$[e]=new J(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$[t]=new J(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$[e]=new J(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$[e]=new J(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$[e]=new J(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$[e]=new J(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$[e]=new J(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$[e]=new J(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$[e]=new J(e,5,!1,e.toLowerCase(),null,!1,!1)});var Rn=/[\-:]([a-z])/g;function Dn(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Rn,Dn);$[t]=new J(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Rn,Dn);$[t]=new J(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Rn,Dn);$[t]=new J(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$[e]=new J(e,1,!1,e.toLowerCase(),null,!1,!1)});$.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$[e]=new J(e,1,!1,e.toLowerCase(),null,!0,!0)});var Gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Su=["Webkit","ms","Moz","O"];Object.keys(Gt).forEach(function(e){Su.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gt[t]=Gt[e]})});var Bu=/["'&<>]/;function q(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=Bu.exec(e);if(t){var r="",n,o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var Iu=/([A-Z])/g,bu=/^ms-/,Bn=Array.isArray;function de(e,t){return{insertionMode:e,selectedValue:t}}function Qu(e,t,r){switch(t){case"select":return de(1,r.value!=null?r.value:r.defaultValue);case"svg":return de(2,null);case"math":return de(3,null);case"foreignObject":return de(1,null);case"table":return de(4,null);case"thead":case"tbody":case"tfoot":return de(5,null);case"colgroup":return de(7,null);case"tr":return de(6,null)}return 4<=e.insertionMode||e.insertionMode===0?de(1,null):e}var Hs=new Map;function ci(e,t,r){if(typeof r!="object")throw Error(x(62));t=!0;for(var n in r)if(Y.call(r,n)){var o=r[n];if(o!=null&&typeof o!="boolean"&&o!==""){if(n.indexOf("--")===0){var s=q(n);o=q((""+o).trim())}else{s=n;var i=Hs.get(s);i!==void 0||(i=q(s.replace(Iu,"-$1").toLowerCase().replace(bu,"-ms-")),Hs.set(s,i)),s=i,o=typeof o=="number"?o===0||Y.call(Gt,n)?""+o:o+"px":q((""+o).trim())}t?(t=!1,e.push(' style="',s,":",o)):e.push(";",s,":",o)}}t||e.push('"')}function Z(e,t,r,n){switch(r){case"style":ci(e,t,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=$.hasOwnProperty(r)?$[r]:null,t!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=t.attributeName,t.type){case 3:n&&e.push(" ",r,'=""');break;case 4:n===!0?e.push(" ",r,'=""'):n!==!1&&e.push(" ",r,'="',q(n),'"');break;case 5:isNaN(n)||e.push(" ",r,'="',q(n),'"');break;case 6:!isNaN(n)&&1<=n&&e.push(" ",r,'="',q(n),'"');break;default:t.sanitizeURL&&(n=""+n),e.push(" ",r,'="',q(n),'"')}}else if(li(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",r,'="',q(n),'"')}}}function Vt(e,t,r){if(t!=null){if(r!=null)throw Error(x(60));if(typeof t!="object"||!("__html"in t))throw Error(x(61));t=t.__html,t!=null&&e.push(""+t)}}function ku(e){var t="";return ai.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function vn(e,t,r,n){e.push(le(r));var o=r=null,s;for(s in t)if(Y.call(t,s)){var i=t[s];if(i!=null)switch(s){case"children":r=i;break;case"dangerouslySetInnerHTML":o=i;break;default:Z(e,n,s,i)}}return e.push(">"),Vt(e,o,r),typeof r=="string"?(e.push(q(r)),null):r}var Ru=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Ks=new Map;function le(e){var t=Ks.get(e);if(t===void 0){if(!Ru.test(e))throw Error(x(65,e));t="<"+e,Ks.set(e,t)}return t}function Du(e,t,r,n,o){switch(t){case"select":e.push(le("select"));var s=null,i=null;for(c in r)if(Y.call(r,c)){var a=r[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":i=a;break;case"defaultValue":case"value":break;default:Z(e,n,c,a)}}return e.push(">"),Vt(e,i,s),s;case"option":i=o.selectedValue,e.push(le("option"));var l=a=null,u=null,c=null;for(s in r)if(Y.call(r,s)){var p=r[s];if(p!=null)switch(s){case"children":a=p;break;case"selected":u=p;break;case"dangerouslySetInnerHTML":c=p;break;case"value":l=p;default:Z(e,n,s,p)}}if(i!=null)if(r=l!==null?""+l:ku(a),Bn(i)){for(n=0;n<i.length;n++)if(""+i[n]===r){e.push(' selected=""');break}}else""+i===r&&e.push(' selected=""');else u&&e.push(' selected=""');return e.push(">"),Vt(e,c,a),a;case"textarea":e.push(le("textarea")),c=i=s=null;for(a in r)if(Y.call(r,a)&&(l=r[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":i=l;break;case"dangerouslySetInnerHTML":throw Error(x(91));default:Z(e,n,a,l)}if(s===null&&i!==null&&(s=i),e.push(">"),c!=null){if(s!=null)throw Error(x(92));if(Bn(c)&&1<c.length)throw Error(x(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s!==null&&e.push(q(""+s)),null;case"input":e.push(le("input")),l=c=a=s=null;for(i in r)if(Y.call(r,i)&&(u=r[i],u!=null))switch(i){case"children":case"dangerouslySetInnerHTML":throw Error(x(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:Z(e,n,i,u)}return c!==null?Z(e,n,"checked",c):l!==null&&Z(e,n,"checked",l),s!==null?Z(e,n,"value",s):a!==null&&Z(e,n,"value",a),e.push("/>"),null;case"menuitem":e.push(le("menuitem"));for(var d in r)if(Y.call(r,d)&&(s=r[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(x(400));default:Z(e,n,d,s)}return e.push(">"),null;case"title":e.push(le("title")),s=null;for(p in r)if(Y.call(r,p)&&(i=r[p],i!=null))switch(p){case"children":s=i;break;case"dangerouslySetInnerHTML":throw Error(x(434));default:Z(e,n,p,i)}return e.push(">"),s;case"listing":case"pre":e.push(le(t)),i=s=null;for(l in r)if(Y.call(r,l)&&(a=r[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":i=a;break;default:Z(e,n,l,a)}if(e.push(">"),i!=null){if(s!=null)throw Error(x(60));if(typeof i!="object"||!("__html"in i))throw Error(x(61));r=i.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(`
`,r):e.push(""+r))}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(le(t));for(var f in r)if(Y.call(r,f)&&(s=r[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(x(399,t));default:Z(e,n,f,s)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return vn(e,r,t,n);case"html":return o.insertionMode===0&&e.push("<!DOCTYPE html>"),vn(e,r,t,n);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return vn(e,r,t,n);e.push(le(t)),i=s=null;for(u in r)if(Y.call(r,u)&&(a=r[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":i=a;break;case"style":ci(e,n,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:li(u)&&typeof a!="function"&&typeof a!="symbol"&&e.push(" ",u,'="',q(a),'"')}return e.push(">"),Vt(e,i,s),s}}function qs(e,t,r){if(e.push('<!--$?--><template id="'),r===null)throw Error(x(395));return e.push(r),e.push('"></template>')}function Tu(e,t,r,n){switch(r.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=n.toString(16),e.push(t),e.push('">');default:throw Error(x(397))}}function Nu(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(x(397))}}var Lu=/[<\u2028\u2029]/g;function xn(e){return JSON.stringify(e).replace(Lu,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Pu(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function Js(e,t,r,n){return r.generateStaticMarkup?(e.push(q(t)),!1):(t===""?e=n:(n&&e.push("<!-- -->"),e.push(q(t)),e=!0),e)}var ht=Object.assign,_u=Symbol.for("react.element"),ui=Symbol.for("react.portal"),pi=Symbol.for("react.fragment"),di=Symbol.for("react.strict_mode"),fi=Symbol.for("react.profiler"),hi=Symbol.for("react.provider"),Ai=Symbol.for("react.context"),mi=Symbol.for("react.forward_ref"),gi=Symbol.for("react.suspense"),yi=Symbol.for("react.suspense_list"),wi=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),Fu=Symbol.for("react.scope"),Mu=Symbol.for("react.debug_trace_mode"),ju=Symbol.for("react.legacy_hidden"),$u=Symbol.for("react.default_value"),Gs=Symbol.iterator;function In(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pi:return"Fragment";case ui:return"Portal";case fi:return"Profiler";case di:return"StrictMode";case gi:return"Suspense";case yi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ai:return(e.displayName||"Context")+".Consumer";case hi:return(e._context.displayName||"Context")+".Provider";case mi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wi:return t=e.displayName||null,t!==null?t:In(e.type)||"Memo";case Tn:t=e._payload,e=e._init;try{return In(e(t))}catch{}}return null}var Ei={};function Vs(e,t){if(e=e.contextTypes,!e)return Ei;var r={},n;for(n in e)r[n]=t[n];return r}var Re=null;function nr(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(x(401))}else{if(r===null)throw Error(x(401));nr(e,r)}t.context._currentValue2=t.value}}function Ci(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&Ci(e)}function vi(e){var t=e.parent;t!==null&&vi(t),e.context._currentValue2=e.value}function xi(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(x(402));e.depth===t.depth?nr(e,t):xi(e,t)}function Si(e,t){var r=t.parent;if(r===null)throw Error(x(402));e.depth===r.depth?nr(e,r):Si(e,r),t.context._currentValue2=t.value}function Xt(e){var t=Re;t!==e&&(t===null?vi(e):e===null?Ci(t):t.depth===e.depth?nr(t,e):t.depth>e.depth?xi(t,e):Si(t,e),Re=e)}var zs={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function Ys(e,t,r,n){var o=e.state!==void 0?e.state:null;e.updater=zs,e.props=r,e.state=o;var s={queue:[],replace:!1};e._reactInternals=s;var i=t.contextType;if(e.context=typeof i=="object"&&i!==null?i._currentValue2:n,i=t.getDerivedStateFromProps,typeof i=="function"&&(i=i(r,o),o=i==null?o:ht({},o,i),e.state=o),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&zs.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,i=s.replace,s.queue=null,s.replace=!1,i&&t.length===1)e.state=t[0];else{for(s=i?t[0]:e.state,o=!0,i=i?1:0;i<t.length;i++){var a=t[i];a=typeof a=="function"?a.call(e,s,r,n):a,a!=null&&(o?(o=!1,s=ht({},s,a)):ht(s,a))}e.state=s}else s.queue=null}var Uu={id:1,overflow:""};function bn(e,t,r){var n=e.id;e=e.overflow;var o=32-zt(n)-1;n&=~(1<<o),r+=1;var s=32-zt(t)+o;if(30<s){var i=o-o%5;return s=(n&(1<<i)-1).toString(32),n>>=i,o-=i,{id:1<<32-zt(t)+o|r<<o|n,overflow:s+e}}return{id:1<<s|r<<o|n,overflow:e}}var zt=Math.clz32?Math.clz32:Ku,Ou=Math.log,Hu=Math.LN2;function Ku(e){return e>>>=0,e===0?32:31-(Ou(e)/Hu|0)|0}function qu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ju=typeof Object.is=="function"?Object.is:qu,fe=null,Nn=null,Yt=null,R=null,dt=!1,Zt=!1,At=0,ge=null,or=0;function ke(){if(fe===null)throw Error(x(321));return fe}function Ws(){if(0<or)throw Error(x(312));return{memoizedState:null,queue:null,next:null}}function Ln(){return R===null?Yt===null?(dt=!1,Yt=R=Ws()):(dt=!0,R=Yt):R.next===null?(dt=!1,R=R.next=Ws()):(dt=!0,R=R.next),R}function Pn(){Nn=fe=null,Zt=!1,Yt=null,or=0,R=ge=null}function Bi(e,t){return typeof t=="function"?t(e):t}function Xs(e,t,r){if(fe=ke(),R=Ln(),dt){var n=R.queue;if(t=n.dispatch,ge!==null&&(r=ge.get(n),r!==void 0)){ge.delete(n),n=R.memoizedState;do n=e(n,r.action),r=r.next;while(r!==null);return R.memoizedState=n,[n,t]}return[R.memoizedState,t]}return e=e===Bi?typeof t=="function"?t():t:r!==void 0?r(t):t,R.memoizedState=e,e=R.queue={last:null,dispatch:null},e=e.dispatch=Gu.bind(null,fe,e),[R.memoizedState,e]}function Zs(e,t){if(fe=ke(),R=Ln(),t=t===void 0?null:t,R!==null){var r=R.memoizedState;if(r!==null&&t!==null){var n=r[1];e:if(n===null)n=!1;else{for(var o=0;o<n.length&&o<t.length;o++)if(!Ju(t[o],n[o])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),R.memoizedState=[e,t],e}function Gu(e,t,r){if(25<=or)throw Error(x(301));if(e===fe)if(Zt=!0,e={action:r,next:null},ge===null&&(ge=new Map),r=ge.get(t),r===void 0)ge.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function Vu(){throw Error(x(394))}function qt(){}var ei={readContext:function(e){return e._currentValue2},useContext:function(e){return ke(),e._currentValue2},useMemo:Zs,useReducer:Xs,useRef:function(e){fe=ke(),R=Ln();var t=R.memoizedState;return t===null?(e={current:e},R.memoizedState=e):t},useState:function(e){return Xs(Bi,e)},useInsertionEffect:qt,useLayoutEffect:function(){},useCallback:function(e,t){return Zs(function(){return e},t)},useImperativeHandle:qt,useEffect:qt,useDebugValue:qt,useDeferredValue:function(e){return ke(),e},useTransition:function(){return ke(),[!1,Vu]},useId:function(){var e=Nn.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-zt(e)-1)).toString(32)+t;var r=Wt;if(r===null)throw Error(x(404));return t=At++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return ke(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(x(407));return r()}},Wt=null,Sn=ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function zu(e){return console.error(e),null}function ft(){}function Yu(e,t,r,n,o,s,i,a,l){var u=[],c=new Set;return t={destination:null,responseState:t,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:o===void 0?zu:o,onAllReady:s===void 0?ft:s,onShellReady:i===void 0?ft:i,onShellError:a===void 0?ft:a,onFatalError:l===void 0?ft:l},r=er(t,0,null,r,!1,!1),r.parentFlushed=!0,e=_n(t,e,null,r,c,Ei,null,Uu),u.push(e),t}function _n(e,t,r,n,o,s,i,a){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var l={node:t,ping:function(){var u=e.pingedTasks;u.push(l),u.length===1&&Qi(e)},blockedBoundary:r,blockedSegment:n,abortSet:o,legacyContext:s,context:i,treeContext:a};return o.add(l),l}function er(e,t,r,n,o,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:o,textEmbedded:s}}function mt(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function tr(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function ti(e,t,r,n,o){for(fe={},Nn=t,At=0,e=r(n,o);Zt;)Zt=!1,At=0,or+=1,R=null,e=r(n,o);return Pn(),e}function ri(e,t,r,n){var o=r.render(),s=n.childContextTypes;if(s!=null){var i=t.legacyContext;if(typeof r.getChildContext!="function")n=i;else{r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(x(108,In(n)||"Unknown",a));n=ht({},i,r)}t.legacyContext=n,ee(e,t,o),t.legacyContext=i}else ee(e,t,o)}function ni(e,t){if(e&&e.defaultProps){t=ht({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Qn(e,t,r,n,o){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){o=Vs(r,t.legacyContext);var s=r.contextType;s=new r(n,typeof s=="object"&&s!==null?s._currentValue2:o),Ys(s,r,n,o),ri(e,t,s,r)}else{s=Vs(r,t.legacyContext),o=ti(e,t,r,n,s);var i=At!==0;if(typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0)Ys(o,r,n,s),ri(e,t,o,r);else if(i){n=t.treeContext,t.treeContext=bn(n,1,0);try{ee(e,t,o)}finally{t.treeContext=n}}else ee(e,t,o)}else if(typeof r=="string"){switch(o=t.blockedSegment,s=Du(o.chunks,r,n,e.responseState,o.formatContext),o.lastPushedText=!1,i=o.formatContext,o.formatContext=Qu(i,r,n),kn(e,t,s),o.formatContext=i,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:o.chunks.push("</",r,">")}o.lastPushedText=!1}else{switch(r){case ju:case Mu:case di:case fi:case pi:ee(e,t,n.children);return;case yi:ee(e,t,n.children);return;case Fu:throw Error(x(343));case gi:e:{r=t.blockedBoundary,o=t.blockedSegment,s=n.fallback,n=n.children,i=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:i,errorDigest:null},l=er(e,o.chunks.length,a,o.formatContext,!1,!1);o.children.push(l),o.lastPushedText=!1;var u=er(e,0,null,o.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=u;try{if(kn(e,t,n),e.responseState.generateStaticMarkup||u.lastPushedText&&u.textEmbedded&&u.chunks.push("<!-- -->"),u.status=1,rr(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=mt(e,c)}finally{t.blockedBoundary=r,t.blockedSegment=o}t=_n(e,s,r,l,i,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case mi:if(n=ti(e,t,r.render,n,o),At!==0){r=t.treeContext,t.treeContext=bn(r,1,0);try{ee(e,t,n)}finally{t.treeContext=r}}else ee(e,t,n);return;case wi:r=r.type,n=ni(r,n),Qn(e,t,r,n,o);return;case hi:if(o=n.children,r=r._context,n=n.value,s=r._currentValue2,r._currentValue2=n,i=Re,Re=n={parent:i,depth:i===null?0:i.depth+1,context:r,parentValue:s,value:n},t.context=n,ee(e,t,o),e=Re,e===null)throw Error(x(403));n=e.parentValue,e.context._currentValue2=n===$u?e.context._defaultValue:n,e=Re=e.parent,t.context=e;return;case Ai:n=n.children,n=n(r._currentValue2),ee(e,t,n);return;case Tn:o=r._init,r=o(r._payload),n=ni(r,n),Qn(e,t,r,n,void 0);return}throw Error(x(130,r==null?r:typeof r,""))}}function ee(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case _u:Qn(e,t,r.type,r.props,r.ref);return;case ui:throw Error(x(257));case Tn:var n=r._init;r=n(r._payload),ee(e,t,r);return}if(Bn(r)){oi(e,t,r);return}if(r===null||typeof r!="object"?n=null:(n=Gs&&r[Gs]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var o=[];do o.push(r.value),r=n.next();while(!r.done);oi(e,t,o)}return}throw e=Object.prototype.toString.call(r),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(n=t.blockedSegment,n.lastPushedText=Js(t.blockedSegment.chunks,r,e.responseState,n.lastPushedText)):typeof r=="number"&&(n=t.blockedSegment,n.lastPushedText=Js(t.blockedSegment.chunks,""+r,e.responseState,n.lastPushedText))}function oi(e,t,r){for(var n=r.length,o=0;o<n;o++){var s=t.treeContext;t.treeContext=bn(s,n,o);try{kn(e,t,r[o])}finally{t.treeContext=s}}}function kn(e,t,r){var n=t.blockedSegment.formatContext,o=t.legacyContext,s=t.context;try{return ee(e,t,r)}catch(l){if(Pn(),typeof l=="object"&&l!==null&&typeof l.then=="function"){r=l;var i=t.blockedSegment,a=er(e,i.chunks.length,null,i.formatContext,i.lastPushedText,!0);i.children.push(a),i.lastPushedText=!1,e=_n(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=n,t.legacyContext=o,t.context=s,Xt(s)}else throw t.blockedSegment.formatContext=n,t.legacyContext=o,t.context=s,Xt(s),l}}function Wu(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,bi(this,t,e)}function Ii(e,t,r){var n=e.blockedBoundary;e.blockedSegment.status=3,n===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,e=r===void 0?Error(x(432)):r,n.errorDigest=t.onError(e),n.parentFlushed&&t.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(o){return Ii(o,t,r)}),n.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(n=t.onAllReady,n()))}function rr(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&rr(e,r)}else e.completedSegments.push(t)}function bi(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(x(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=ft,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&rr(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Wu,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(rr(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function Qi(e){if(e.status!==2){var t=Re,r=Sn.current;Sn.current=ei;var n=Wt;Wt=e.responseState;try{var o=e.pingedTasks,s;for(s=0;s<o.length;s++){var i=o[s],a=e,l=i.blockedSegment;if(l.status===0){Xt(i.context);try{ee(a,i,i.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),i.abortSet.delete(i),l.status=1,bi(a,i.blockedBoundary,l)}catch(h){if(Pn(),typeof h=="object"&&h!==null&&typeof h.then=="function"){var u=i.ping;h.then(u,u)}else{i.abortSet.delete(i),l.status=4;var c=i.blockedBoundary,p=h,d=mt(a,p);if(c===null?tr(a,p):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=d,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}o.splice(0,s),e.destination!==null&&Fn(e,e.destination)}catch(h){mt(e,h),tr(e,h)}finally{Wt=n,Sn.current=r,r===ei&&Xt(t)}}}function Jt(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=n.toString(16),t.push(e),t.push('"></template>');case 1:r.status=2;var o=!0;n=r.chunks;var s=0;r=r.children;for(var i=0;i<r.length;i++){for(o=r[i];s<o.index;s++)t.push(n[s]);o=sr(e,t,o)}for(;s<n.length-1;s++)t.push(n[s]);return s<n.length&&(o=t.push(n[s])),o;default:throw Error(x(390))}}function sr(e,t,r){var n=r.boundary;if(n===null)return Jt(e,t,r);if(n.parentFlushed=!0,n.forceClientRender)return e.responseState.generateStaticMarkup||(n=n.errorDigest,t.push("<!--$!-->"),t.push("<template"),n&&(t.push(' data-dgst="'),n=q(n),t.push(n),t.push('"')),t.push("></template>")),Jt(e,t,r),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<n.pendingTasks){n.rootSegmentID=e.nextSegmentId++,0<n.completedSegments.length&&e.partialBoundaries.push(n);var o=e.responseState,s=o.nextSuspenseID++;return o=o.boundaryPrefix+s.toString(16),n=n.id=o,qs(t,e.responseState,n),Jt(e,t,r),t.push("<!--/$-->")}if(n.byteSize>e.progressiveChunkSize)return n.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(n),qs(t,e.responseState,n.id),Jt(e,t,r),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),r=n.completedSegments,r.length!==1)throw Error(x(391));return sr(e,t,r[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function si(e,t,r){return Tu(t,e.responseState,r.formatContext,r.id),sr(e,t,r),Nu(t,r.formatContext)}function ii(e,t,r){for(var n=r.completedSegments,o=0;o<n.length;o++)ki(e,t,r,n[o]);if(n.length=0,e=e.responseState,n=r.id,r=r.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),n===null)throw Error(x(395));return r=r.toString(16),t.push(n),t.push('","'),t.push(e.segmentPrefix),t.push(r),t.push('")<\/script>')}function ki(e,t,r,n){if(n.status===2)return!0;var o=n.id;if(o===-1){if((n.id=r.rootSegmentID)===-1)throw Error(x(392));return si(e,t,n)}return si(e,t,n),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),o=o.toString(16),t.push(o),t.push('","'),t.push(e.placeholderPrefix),t.push(o),t.push('")<\/script>')}function Fn(e,t){try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){sr(e,t,r),e.completedRootSegment=null;var n=e.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)t.push(n[r]);r<n.length&&t.push(n[r])}var o=e.clientRenderedBoundaries,s;for(s=0;s<o.length;s++){var i=o[s];n=t;var a=e.responseState,l=i.id,u=i.errorDigest,c=i.errorMessage,p=i.errorComponentStack;if(n.push(a.startInlineScript),a.sentClientRenderFunction?n.push('$RX("'):(a.sentClientRenderFunction=!0,n.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(x(395));if(n.push(l),n.push('"'),u||c||p){n.push(",");var d=xn(u||"");n.push(d)}if(c||p){n.push(",");var f=xn(c||"");n.push(f)}if(p){n.push(",");var h=xn(p);n.push(h)}if(!n.push(")<\/script>")){e.destination=null,s++,o.splice(0,s);return}}o.splice(0,s);var A=e.completedBoundaries;for(s=0;s<A.length;s++)if(!ii(e,t,A[s])){e.destination=null,s++,A.splice(0,s);return}A.splice(0,s);var E=e.partialBoundaries;for(s=0;s<E.length;s++){var C=E[s];e:{o=e,i=t;var w=C.completedSegments;for(a=0;a<w.length;a++)if(!ki(o,i,C,w[a])){a++,w.splice(0,a);var k=!1;break e}w.splice(0,a),k=!0}if(!k){e.destination=null,s++,E.splice(0,s);return}}E.splice(0,s);var P=e.completedBoundaries;for(s=0;s<P.length;s++)if(!ii(e,t,P[s])){e.destination=null,s++,P.splice(0,s);return}P.splice(0,s)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function Xu(e,t){try{var r=e.abortableTasks;r.forEach(function(n){return Ii(n,e,t)}),r.clear(),e.destination!==null&&Fn(e,e.destination)}catch(n){mt(e,n),tr(e,n)}}function Zu(){}function Ri(e,t,r,n){var o=!1,s=null,i="",a={push:function(u){return u!==null&&(i+=u),!0},destroy:function(u){o=!0,s=u}},l=!1;if(e=Yu(e,Pu(r,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Zu,void 0,function(){l=!0},void 0,void 0),Qi(e),Xu(e,n),e.status===1)e.status=2,a.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=a;try{Fn(e,a)}catch(u){mt(e,u),tr(e,u)}}if(o)throw s;if(!l)throw Error(x(426));return i}Ge.renderToNodeStream=function(){throw Error(x(207))};Ge.renderToStaticMarkup=function(e,t){return Ri(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Ge.renderToStaticNodeStream=function(){throw Error(x(208))};Ge.renderToString=function(e,t){return Ri(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Ge.version="18.3.1"});var ka=pe(oo=>{"use strict";var oa=Je();function S(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var re=null,ne=0;function y(e,t){if(t.length!==0)if(512<t.length)0<ne&&(e.enqueue(new Uint8Array(re.buffer,0,ne)),re=new Uint8Array(512),ne=0),e.enqueue(t);else{var r=re.length-ne;r<t.length&&(r===0?e.enqueue(re):(re.set(t.subarray(0,r),ne),e.enqueue(re),t=t.subarray(r)),re=new Uint8Array(512),ne=0),re.set(t,ne),ne+=t.length}}function N(e,t){return y(e,t),!0}function Ti(e){re&&0<ne&&(e.enqueue(new Uint8Array(re.buffer,0,ne)),re=null,ne=0)}var sa=new TextEncoder;function B(e){return sa.encode(e)}function m(e){return sa.encode(e)}function ia(e,t){typeof e.error=="function"?e.error(t):e.close()}var W=Object.prototype.hasOwnProperty,ep=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ni={},Li={};function aa(e){return W.call(Li,e)?!0:W.call(Ni,e)?!1:ep.test(e)?Li[e]=!0:(Ni[e]=!0,!1)}function G(e,t,r,n,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){O[e]=new G(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];O[t]=new G(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){O[e]=new G(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){O[e]=new G(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){O[e]=new G(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){O[e]=new G(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){O[e]=new G(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){O[e]=new G(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){O[e]=new G(e,5,!1,e.toLowerCase(),null,!1,!1)});var zn=/[\-:]([a-z])/g;function Yn(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zn,Yn);O[t]=new G(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zn,Yn);O[t]=new G(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zn,Yn);O[t]=new G(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){O[e]=new G(e,1,!1,e.toLowerCase(),null,!1,!1)});O.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){O[e]=new G(e,1,!1,e.toLowerCase(),null,!0,!0)});var lr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tp=["Webkit","ms","Moz","O"];Object.keys(lr).forEach(function(e){tp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),lr[t]=lr[e]})});var rp=/["'&<>]/;function U(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=rp.exec(e);if(t){var r="",n,o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var np=/([A-Z])/g,op=/^ms-/,Kn=Array.isArray,sp=m("<script>"),ip=m("<\/script>"),ap=m('<script src="'),lp=m('<script type="module" src="'),Pi=m('" async=""><\/script>'),cp=/(<\/|<)(s)(cript)/gi;function up(e,t,r,n){return""+t+(r==="s"?"\\u0073":"\\u0053")+n}function pp(e,t,r,n,o){e=e===void 0?"":e,t=t===void 0?sp:m('<script nonce="'+U(t)+'">');var s=[];if(r!==void 0&&s.push(t,B((""+r).replace(cp,up)),ip),n!==void 0)for(r=0;r<n.length;r++)s.push(ap,B(U(n[r])),Pi);if(o!==void 0)for(n=0;n<o.length;n++)s.push(lp,B(U(o[n])),Pi);return{bootstrapChunks:s,startInlineScript:t,placeholderPrefix:m(e+"P:"),segmentPrefix:m(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function ce(e,t){return{insertionMode:e,selectedValue:t}}function dp(e){return ce(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function fp(e,t,r){switch(t){case"select":return ce(1,r.value!=null?r.value:r.defaultValue);case"svg":return ce(2,null);case"math":return ce(3,null);case"foreignObject":return ce(1,null);case"table":return ce(4,null);case"thead":case"tbody":case"tfoot":return ce(5,null);case"colgroup":return ce(7,null);case"tr":return ce(6,null)}return 4<=e.insertionMode||e.insertionMode===0?ce(1,null):e}var Wn=m("<!-- -->");function _i(e,t,r,n){return t===""?n:(n&&e.push(Wn),e.push(B(U(t))),!0)}var Fi=new Map,hp=m(' style="'),Mi=m(":"),Ap=m(";");function la(e,t,r){if(typeof r!="object")throw Error(S(62));t=!0;for(var n in r)if(W.call(r,n)){var o=r[n];if(o!=null&&typeof o!="boolean"&&o!==""){if(n.indexOf("--")===0){var s=B(U(n));o=B(U((""+o).trim()))}else{s=n;var i=Fi.get(s);i!==void 0||(i=m(U(s.replace(np,"-$1").toLowerCase().replace(op,"-ms-"))),Fi.set(s,i)),s=i,o=typeof o=="number"?o===0||W.call(lr,n)?B(""+o):B(o+"px"):B(U((""+o).trim()))}t?(t=!1,e.push(hp,s,Mi,o)):e.push(Ap,s,Mi,o)}}t||e.push(De)}var ye=m(" "),Ve=m('="'),De=m('"'),ji=m('=""');function te(e,t,r,n){switch(r){case"style":la(e,t,n);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=O.hasOwnProperty(r)?O[r]:null,t!==null){switch(typeof n){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=B(t.attributeName),t.type){case 3:n&&e.push(ye,r,ji);break;case 4:n===!0?e.push(ye,r,ji):n!==!1&&e.push(ye,r,Ve,B(U(n)),De);break;case 5:isNaN(n)||e.push(ye,r,Ve,B(U(n)),De);break;case 6:!isNaN(n)&&1<=n&&e.push(ye,r,Ve,B(U(n)),De);break;default:t.sanitizeURL&&(n=""+n),e.push(ye,r,Ve,B(U(n)),De)}}else if(aa(r)){switch(typeof n){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(ye,B(r),Ve,B(U(n)),De)}}}var we=m(">"),$i=m("/>");function cr(e,t,r){if(t!=null){if(r!=null)throw Error(S(60));if(typeof t!="object"||!("__html"in t))throw Error(S(61));t=t.__html,t!=null&&e.push(B(""+t))}}function mp(e){var t="";return oa.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}var Mn=m(' selected=""');function jn(e,t,r,n){e.push(ue(r));var o=r=null,s;for(s in t)if(W.call(t,s)){var i=t[s];if(i!=null)switch(s){case"children":r=i;break;case"dangerouslySetInnerHTML":o=i;break;default:te(e,n,s,i)}}return e.push(we),cr(e,o,r),typeof r=="string"?(e.push(B(U(r))),null):r}var $n=m(`
`),gp=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Ui=new Map;function ue(e){var t=Ui.get(e);if(t===void 0){if(!gp.test(e))throw Error(S(65,e));t=m("<"+e),Ui.set(e,t)}return t}var yp=m("<!DOCTYPE html>");function wp(e,t,r,n,o){switch(t){case"select":e.push(ue("select"));var s=null,i=null;for(c in r)if(W.call(r,c)){var a=r[c];if(a!=null)switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":i=a;break;case"defaultValue":case"value":break;default:te(e,n,c,a)}}return e.push(we),cr(e,i,s),s;case"option":i=o.selectedValue,e.push(ue("option"));var l=a=null,u=null,c=null;for(s in r)if(W.call(r,s)){var p=r[s];if(p!=null)switch(s){case"children":a=p;break;case"selected":u=p;break;case"dangerouslySetInnerHTML":c=p;break;case"value":l=p;default:te(e,n,s,p)}}if(i!=null)if(r=l!==null?""+l:mp(a),Kn(i)){for(n=0;n<i.length;n++)if(""+i[n]===r){e.push(Mn);break}}else""+i===r&&e.push(Mn);else u&&e.push(Mn);return e.push(we),cr(e,c,a),a;case"textarea":e.push(ue("textarea")),c=i=s=null;for(a in r)if(W.call(r,a)&&(l=r[a],l!=null))switch(a){case"children":c=l;break;case"value":s=l;break;case"defaultValue":i=l;break;case"dangerouslySetInnerHTML":throw Error(S(91));default:te(e,n,a,l)}if(s===null&&i!==null&&(s=i),e.push(we),c!=null){if(s!=null)throw Error(S(92));if(Kn(c)&&1<c.length)throw Error(S(93));s=""+c}return typeof s=="string"&&s[0]===`
`&&e.push($n),s!==null&&e.push(B(U(""+s))),null;case"input":e.push(ue("input")),l=c=a=s=null;for(i in r)if(W.call(r,i)&&(u=r[i],u!=null))switch(i){case"children":case"dangerouslySetInnerHTML":throw Error(S(399,"input"));case"defaultChecked":l=u;break;case"defaultValue":a=u;break;case"checked":c=u;break;case"value":s=u;break;default:te(e,n,i,u)}return c!==null?te(e,n,"checked",c):l!==null&&te(e,n,"checked",l),s!==null?te(e,n,"value",s):a!==null&&te(e,n,"value",a),e.push($i),null;case"menuitem":e.push(ue("menuitem"));for(var d in r)if(W.call(r,d)&&(s=r[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(S(400));default:te(e,n,d,s)}return e.push(we),null;case"title":e.push(ue("title")),s=null;for(p in r)if(W.call(r,p)&&(i=r[p],i!=null))switch(p){case"children":s=i;break;case"dangerouslySetInnerHTML":throw Error(S(434));default:te(e,n,p,i)}return e.push(we),s;case"listing":case"pre":e.push(ue(t)),i=s=null;for(l in r)if(W.call(r,l)&&(a=r[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":i=a;break;default:te(e,n,l,a)}if(e.push(we),i!=null){if(s!=null)throw Error(S(60));if(typeof i!="object"||!("__html"in i))throw Error(S(61));r=i.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push($n,B(r)):e.push(B(""+r)))}return typeof s=="string"&&s[0]===`
`&&e.push($n),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ue(t));for(var f in r)if(W.call(r,f)&&(s=r[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(S(399,t));default:te(e,n,f,s)}return e.push($i),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return jn(e,r,t,n);case"html":return o.insertionMode===0&&e.push(yp),jn(e,r,t,n);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return jn(e,r,t,n);e.push(ue(t)),i=s=null;for(u in r)if(W.call(r,u)&&(a=r[u],a!=null))switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":i=a;break;case"style":la(e,n,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:aa(u)&&typeof a!="function"&&typeof a!="symbol"&&e.push(ye,B(u),Ve,B(U(a)),De)}return e.push(we),cr(e,i,s),s}}var Ep=m("</"),Cp=m(">"),vp=m('<template id="'),xp=m('"></template>'),Sp=m("<!--$-->"),Bp=m('<!--$?--><template id="'),Ip=m('"></template>'),bp=m("<!--$!-->"),Qp=m("<!--/$-->"),kp=m("<template"),Rp=m('"'),Dp=m(' data-dgst="');m(' data-msg="');m(' data-stck="');var Tp=m("></template>");function Oi(e,t,r){if(y(e,Bp),r===null)throw Error(S(395));return y(e,r),N(e,Ip)}var Np=m('<div hidden id="'),Lp=m('">'),Pp=m("</div>"),_p=m('<svg aria-hidden="true" style="display:none" id="'),Fp=m('">'),Mp=m("</svg>"),jp=m('<math aria-hidden="true" style="display:none" id="'),$p=m('">'),Up=m("</math>"),Op=m('<table hidden id="'),Hp=m('">'),Kp=m("</table>"),qp=m('<table hidden><tbody id="'),Jp=m('">'),Gp=m("</tbody></table>"),Vp=m('<table hidden><tr id="'),zp=m('">'),Yp=m("</tr></table>"),Wp=m('<table hidden><colgroup id="'),Xp=m('">'),Zp=m("</colgroup></table>");function ed(e,t,r,n){switch(r.insertionMode){case 0:case 1:return y(e,Np),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,Lp);case 2:return y(e,_p),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,Fp);case 3:return y(e,jp),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,$p);case 4:return y(e,Op),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,Hp);case 5:return y(e,qp),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,Jp);case 6:return y(e,Vp),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,zp);case 7:return y(e,Wp),y(e,t.segmentPrefix),y(e,B(n.toString(16))),N(e,Xp);default:throw Error(S(397))}}function td(e,t){switch(t.insertionMode){case 0:case 1:return N(e,Pp);case 2:return N(e,Mp);case 3:return N(e,Up);case 4:return N(e,Kp);case 5:return N(e,Gp);case 6:return N(e,Yp);case 7:return N(e,Zp);default:throw Error(S(397))}}var rd=m('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),nd=m('$RS("'),od=m('","'),sd=m('")<\/script>'),id=m('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),ad=m('$RC("'),ld=m('","'),cd=m('")<\/script>'),ud=m('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),pd=m('$RX("'),dd=m('"'),fd=m(")<\/script>"),Un=m(","),hd=/[<\u2028\u2029]/g;function On(e){return JSON.stringify(e).replace(hd,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var wt=Object.assign,Ad=Symbol.for("react.element"),ca=Symbol.for("react.portal"),ua=Symbol.for("react.fragment"),pa=Symbol.for("react.strict_mode"),da=Symbol.for("react.profiler"),fa=Symbol.for("react.provider"),ha=Symbol.for("react.context"),Aa=Symbol.for("react.forward_ref"),ma=Symbol.for("react.suspense"),ga=Symbol.for("react.suspense_list"),ya=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),md=Symbol.for("react.scope"),gd=Symbol.for("react.debug_trace_mode"),yd=Symbol.for("react.legacy_hidden"),wd=Symbol.for("react.default_value"),Hi=Symbol.iterator;function qn(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ua:return"Fragment";case ca:return"Portal";case da:return"Profiler";case pa:return"StrictMode";case ma:return"Suspense";case ga:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ha:return(e.displayName||"Context")+".Consumer";case fa:return(e._context.displayName||"Context")+".Provider";case Aa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ya:return t=e.displayName||null,t!==null?t:qn(e.type)||"Memo";case Xn:t=e._payload,e=e._init;try{return qn(e(t))}catch{}}return null}var wa={};function Ki(e,t){if(e=e.contextTypes,!e)return wa;var r={},n;for(n in e)r[n]=t[n];return r}var Ne=null;function yr(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(S(401))}else{if(r===null)throw Error(S(401));yr(e,r)}t.context._currentValue=t.value}}function Ea(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&Ea(e)}function Ca(e){var t=e.parent;t!==null&&Ca(t),e.context._currentValue=e.value}function va(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(S(402));e.depth===t.depth?yr(e,t):va(e,t)}function xa(e,t){var r=t.parent;if(r===null)throw Error(S(402));e.depth===r.depth?yr(e,r):xa(e,r),t.context._currentValue=t.value}function fr(e){var t=Ne;t!==e&&(t===null?Ca(e):e===null?Ea(t):t.depth===e.depth?yr(t,e):t.depth>e.depth?va(t,e):xa(t,e),Ne=e)}var qi={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function Ji(e,t,r,n){var o=e.state!==void 0?e.state:null;e.updater=qi,e.props=r,e.state=o;var s={queue:[],replace:!1};e._reactInternals=s;var i=t.contextType;if(e.context=typeof i=="object"&&i!==null?i._currentValue:n,i=t.getDerivedStateFromProps,typeof i=="function"&&(i=i(r,o),o=i==null?o:wt({},o,i),e.state=o),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&qi.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,i=s.replace,s.queue=null,s.replace=!1,i&&t.length===1)e.state=t[0];else{for(s=i?t[0]:e.state,o=!0,i=i?1:0;i<t.length;i++){var a=t[i];a=typeof a=="function"?a.call(e,s,r,n):a,a!=null&&(o?(o=!1,s=wt({},s,a)):wt(s,a))}e.state=s}else s.queue=null}var Ed={id:1,overflow:""};function Jn(e,t,r){var n=e.id;e=e.overflow;var o=32-ur(n)-1;n&=~(1<<o),r+=1;var s=32-ur(t)+o;if(30<s){var i=o-o%5;return s=(n&(1<<i)-1).toString(32),n>>=i,o-=i,{id:1<<32-ur(t)+o|r<<o|n,overflow:s+e}}return{id:1<<s|r<<o|n,overflow:e}}var ur=Math.clz32?Math.clz32:xd,Cd=Math.log,vd=Math.LN2;function xd(e){return e>>>=0,e===0?32:31-(Cd(e)/vd|0)|0}function Sd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bd=typeof Object.is=="function"?Object.is:Sd,he=null,Zn=null,pr=null,D=null,gt=!1,hr=!1,Et=0,Ee=null,wr=0;function Te(){if(he===null)throw Error(S(321));return he}function Gi(){if(0<wr)throw Error(S(312));return{memoizedState:null,queue:null,next:null}}function eo(){return D===null?pr===null?(gt=!1,pr=D=Gi()):(gt=!0,D=pr):D.next===null?(gt=!1,D=D.next=Gi()):(gt=!0,D=D.next),D}function to(){Zn=he=null,hr=!1,pr=null,wr=0,D=Ee=null}function Sa(e,t){return typeof t=="function"?t(e):t}function Vi(e,t,r){if(he=Te(),D=eo(),gt){var n=D.queue;if(t=n.dispatch,Ee!==null&&(r=Ee.get(n),r!==void 0)){Ee.delete(n),n=D.memoizedState;do n=e(n,r.action),r=r.next;while(r!==null);return D.memoizedState=n,[n,t]}return[D.memoizedState,t]}return e=e===Sa?typeof t=="function"?t():t:r!==void 0?r(t):t,D.memoizedState=e,e=D.queue={last:null,dispatch:null},e=e.dispatch=Id.bind(null,he,e),[D.memoizedState,e]}function zi(e,t){if(he=Te(),D=eo(),t=t===void 0?null:t,D!==null){var r=D.memoizedState;if(r!==null&&t!==null){var n=r[1];e:if(n===null)n=!1;else{for(var o=0;o<n.length&&o<t.length;o++)if(!Bd(t[o],n[o])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),D.memoizedState=[e,t],e}function Id(e,t,r){if(25<=wr)throw Error(S(301));if(e===he)if(hr=!0,e={action:r,next:null},Ee===null&&(Ee=new Map),r=Ee.get(t),r===void 0)Ee.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function bd(){throw Error(S(394))}function ir(){}var Yi={readContext:function(e){return e._currentValue},useContext:function(e){return Te(),e._currentValue},useMemo:zi,useReducer:Vi,useRef:function(e){he=Te(),D=eo();var t=D.memoizedState;return t===null?(e={current:e},D.memoizedState=e):t},useState:function(e){return Vi(Sa,e)},useInsertionEffect:ir,useLayoutEffect:function(){},useCallback:function(e,t){return zi(function(){return e},t)},useImperativeHandle:ir,useEffect:ir,useDebugValue:ir,useDeferredValue:function(e){return Te(),e},useTransition:function(){return Te(),[!1,bd]},useId:function(){var e=Zn.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-ur(e)-1)).toString(32)+t;var r=dr;if(r===null)throw Error(S(404));return t=Et++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Te(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(S(407));return r()}},dr=null,Hn=oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Qd(e){return console.error(e),null}function yt(){}function kd(e,t,r,n,o,s,i,a,l){var u=[],c=new Set;return t={destination:null,responseState:t,progressiveChunkSize:n===void 0?12800:n,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:u,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:o===void 0?Qd:o,onAllReady:s===void 0?yt:s,onShellReady:i===void 0?yt:i,onShellError:a===void 0?yt:a,onFatalError:l===void 0?yt:l},r=Ar(t,0,null,r,!1,!1),r.parentFlushed=!0,e=ro(t,e,null,r,c,wa,null,Ed),u.push(e),t}function ro(e,t,r,n,o,s,i,a){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var l={node:t,ping:function(){var u=e.pingedTasks;u.push(l),u.length===1&&ba(e)},blockedBoundary:r,blockedSegment:n,abortSet:o,legacyContext:s,context:i,treeContext:a};return o.add(l),l}function Ar(e,t,r,n,o,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:n,boundary:r,lastPushedText:o,textEmbedded:s}}function Ct(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function mr(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,ia(e.destination,t)):(e.status=1,e.fatalError=t)}function Wi(e,t,r,n,o){for(he={},Zn=t,Et=0,e=r(n,o);hr;)hr=!1,Et=0,wr+=1,D=null,e=r(n,o);return to(),e}function Xi(e,t,r,n){var o=r.render(),s=n.childContextTypes;if(s!=null){var i=t.legacyContext;if(typeof r.getChildContext!="function")n=i;else{r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(S(108,qn(n)||"Unknown",a));n=wt({},i,r)}t.legacyContext=n,oe(e,t,o),t.legacyContext=i}else oe(e,t,o)}function Zi(e,t){if(e&&e.defaultProps){t=wt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Gn(e,t,r,n,o){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){o=Ki(r,t.legacyContext);var s=r.contextType;s=new r(n,typeof s=="object"&&s!==null?s._currentValue:o),Ji(s,r,n,o),Xi(e,t,s,r)}else{s=Ki(r,t.legacyContext),o=Wi(e,t,r,n,s);var i=Et!==0;if(typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0)Ji(o,r,n,s),Xi(e,t,o,r);else if(i){n=t.treeContext,t.treeContext=Jn(n,1,0);try{oe(e,t,o)}finally{t.treeContext=n}}else oe(e,t,o)}else if(typeof r=="string"){switch(o=t.blockedSegment,s=wp(o.chunks,r,n,e.responseState,o.formatContext),o.lastPushedText=!1,i=o.formatContext,o.formatContext=fp(i,r,n),Vn(e,t,s),o.formatContext=i,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:o.chunks.push(Ep,B(r),Cp)}o.lastPushedText=!1}else{switch(r){case yd:case gd:case pa:case da:case ua:oe(e,t,n.children);return;case ga:oe(e,t,n.children);return;case md:throw Error(S(343));case ma:e:{r=t.blockedBoundary,o=t.blockedSegment,s=n.fallback,n=n.children,i=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:i,errorDigest:null},l=Ar(e,o.chunks.length,a,o.formatContext,!1,!1);o.children.push(l),o.lastPushedText=!1;var u=Ar(e,0,null,o.formatContext,!1,!1);u.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=u;try{if(Vn(e,t,n),u.lastPushedText&&u.textEmbedded&&u.chunks.push(Wn),u.status=1,gr(a,u),a.pendingTasks===0)break e}catch(c){u.status=4,a.forceClientRender=!0,a.errorDigest=Ct(e,c)}finally{t.blockedBoundary=r,t.blockedSegment=o}t=ro(e,s,r,l,i,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Aa:if(n=Wi(e,t,r.render,n,o),Et!==0){r=t.treeContext,t.treeContext=Jn(r,1,0);try{oe(e,t,n)}finally{t.treeContext=r}}else oe(e,t,n);return;case ya:r=r.type,n=Zi(r,n),Gn(e,t,r,n,o);return;case fa:if(o=n.children,r=r._context,n=n.value,s=r._currentValue,r._currentValue=n,i=Ne,Ne=n={parent:i,depth:i===null?0:i.depth+1,context:r,parentValue:s,value:n},t.context=n,oe(e,t,o),e=Ne,e===null)throw Error(S(403));n=e.parentValue,e.context._currentValue=n===wd?e.context._defaultValue:n,e=Ne=e.parent,t.context=e;return;case ha:n=n.children,n=n(r._currentValue),oe(e,t,n);return;case Xn:o=r._init,r=o(r._payload),n=Zi(r,n),Gn(e,t,r,n,void 0);return}throw Error(S(130,r==null?r:typeof r,""))}}function oe(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case Ad:Gn(e,t,r.type,r.props,r.ref);return;case ca:throw Error(S(257));case Xn:var n=r._init;r=n(r._payload),oe(e,t,r);return}if(Kn(r)){ea(e,t,r);return}if(r===null||typeof r!="object"?n=null:(n=Hi&&r[Hi]||r["@@iterator"],n=typeof n=="function"?n:null),n&&(n=n.call(r))){if(r=n.next(),!r.done){var o=[];do o.push(r.value),r=n.next();while(!r.done);ea(e,t,o)}return}throw e=Object.prototype.toString.call(r),Error(S(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(n=t.blockedSegment,n.lastPushedText=_i(t.blockedSegment.chunks,r,e.responseState,n.lastPushedText)):typeof r=="number"&&(n=t.blockedSegment,n.lastPushedText=_i(t.blockedSegment.chunks,""+r,e.responseState,n.lastPushedText))}function ea(e,t,r){for(var n=r.length,o=0;o<n;o++){var s=t.treeContext;t.treeContext=Jn(s,n,o);try{Vn(e,t,r[o])}finally{t.treeContext=s}}}function Vn(e,t,r){var n=t.blockedSegment.formatContext,o=t.legacyContext,s=t.context;try{return oe(e,t,r)}catch(l){if(to(),typeof l=="object"&&l!==null&&typeof l.then=="function"){r=l;var i=t.blockedSegment,a=Ar(e,i.chunks.length,null,i.formatContext,i.lastPushedText,!0);i.children.push(a),i.lastPushedText=!1,e=ro(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=n,t.legacyContext=o,t.context=s,fr(s)}else throw t.blockedSegment.formatContext=n,t.legacyContext=o,t.context=s,fr(s),l}}function Rd(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,Ia(this,t,e)}function Ba(e,t,r){var n=e.blockedBoundary;e.blockedSegment.status=3,n===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(n.pendingTasks--,n.forceClientRender||(n.forceClientRender=!0,e=r===void 0?Error(S(432)):r,n.errorDigest=t.onError(e),n.parentFlushed&&t.clientRenderedBoundaries.push(n)),n.fallbackAbortableTasks.forEach(function(o){return Ba(o,t,r)}),n.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(n=t.onAllReady,n()))}function gr(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&gr(e,r)}else e.completedSegments.push(t)}function Ia(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(S(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=yt,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&gr(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Rd,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(gr(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function ba(e){if(e.status!==2){var t=Ne,r=Hn.current;Hn.current=Yi;var n=dr;dr=e.responseState;try{var o=e.pingedTasks,s;for(s=0;s<o.length;s++){var i=o[s],a=e,l=i.blockedSegment;if(l.status===0){fr(i.context);try{oe(a,i,i.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(Wn),i.abortSet.delete(i),l.status=1,Ia(a,i.blockedBoundary,l)}catch(h){if(to(),typeof h=="object"&&h!==null&&typeof h.then=="function"){var u=i.ping;h.then(u,u)}else{i.abortSet.delete(i),l.status=4;var c=i.blockedBoundary,p=h,d=Ct(a,p);if(c===null?mr(a,p):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=d,c.parentFlushed&&a.clientRenderedBoundaries.push(c))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}o.splice(0,s),e.destination!==null&&no(e,e.destination)}catch(h){Ct(e,h),mr(e,h)}finally{dr=n,Hn.current=r,r===Yi&&fr(t)}}}function ar(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var n=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,y(t,vp),y(t,e.placeholderPrefix),e=B(n.toString(16)),y(t,e),N(t,xp);case 1:r.status=2;var o=!0;n=r.chunks;var s=0;r=r.children;for(var i=0;i<r.length;i++){for(o=r[i];s<o.index;s++)y(t,n[s]);o=Er(e,t,o)}for(;s<n.length-1;s++)y(t,n[s]);return s<n.length&&(o=N(t,n[s])),o;default:throw Error(S(390))}}function Er(e,t,r){var n=r.boundary;if(n===null)return ar(e,t,r);if(n.parentFlushed=!0,n.forceClientRender)n=n.errorDigest,N(t,bp),y(t,kp),n&&(y(t,Dp),y(t,B(U(n))),y(t,Rp)),N(t,Tp),ar(e,t,r);else if(0<n.pendingTasks){n.rootSegmentID=e.nextSegmentId++,0<n.completedSegments.length&&e.partialBoundaries.push(n);var o=e.responseState,s=o.nextSuspenseID++;o=m(o.boundaryPrefix+s.toString(16)),n=n.id=o,Oi(t,e.responseState,n),ar(e,t,r)}else if(n.byteSize>e.progressiveChunkSize)n.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(n),Oi(t,e.responseState,n.id),ar(e,t,r);else{if(N(t,Sp),r=n.completedSegments,r.length!==1)throw Error(S(391));Er(e,t,r[0])}return N(t,Qp)}function ta(e,t,r){return ed(t,e.responseState,r.formatContext,r.id),Er(e,t,r),td(t,r.formatContext)}function ra(e,t,r){for(var n=r.completedSegments,o=0;o<n.length;o++)Qa(e,t,r,n[o]);if(n.length=0,e=e.responseState,n=r.id,r=r.rootSegmentID,y(t,e.startInlineScript),e.sentCompleteBoundaryFunction?y(t,ad):(e.sentCompleteBoundaryFunction=!0,y(t,id)),n===null)throw Error(S(395));return r=B(r.toString(16)),y(t,n),y(t,ld),y(t,e.segmentPrefix),y(t,r),N(t,cd)}function Qa(e,t,r,n){if(n.status===2)return!0;var o=n.id;if(o===-1){if((n.id=r.rootSegmentID)===-1)throw Error(S(392));return ta(e,t,n)}return ta(e,t,n),e=e.responseState,y(t,e.startInlineScript),e.sentCompleteSegmentFunction?y(t,nd):(e.sentCompleteSegmentFunction=!0,y(t,rd)),y(t,e.segmentPrefix),o=B(o.toString(16)),y(t,o),y(t,od),y(t,e.placeholderPrefix),y(t,o),N(t,sd)}function no(e,t){re=new Uint8Array(512),ne=0;try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){Er(e,t,r),e.completedRootSegment=null;var n=e.responseState.bootstrapChunks;for(r=0;r<n.length-1;r++)y(t,n[r]);r<n.length&&N(t,n[r])}var o=e.clientRenderedBoundaries,s;for(s=0;s<o.length;s++){var i=o[s];n=t;var a=e.responseState,l=i.id,u=i.errorDigest,c=i.errorMessage,p=i.errorComponentStack;if(y(n,a.startInlineScript),a.sentClientRenderFunction?y(n,pd):(a.sentClientRenderFunction=!0,y(n,ud)),l===null)throw Error(S(395));if(y(n,l),y(n,dd),(u||c||p)&&(y(n,Un),y(n,B(On(u||"")))),(c||p)&&(y(n,Un),y(n,B(On(c||"")))),p&&(y(n,Un),y(n,B(On(p)))),!N(n,fd)){e.destination=null,s++,o.splice(0,s);return}}o.splice(0,s);var d=e.completedBoundaries;for(s=0;s<d.length;s++)if(!ra(e,t,d[s])){e.destination=null,s++,d.splice(0,s);return}d.splice(0,s),Ti(t),re=new Uint8Array(512),ne=0;var f=e.partialBoundaries;for(s=0;s<f.length;s++){var h=f[s];e:{o=e,i=t;var A=h.completedSegments;for(a=0;a<A.length;a++)if(!Qa(o,i,h,A[a])){a++,A.splice(0,a);var E=!1;break e}A.splice(0,a),E=!0}if(!E){e.destination=null,s++,f.splice(0,s);return}}f.splice(0,s);var C=e.completedBoundaries;for(s=0;s<C.length;s++)if(!ra(e,t,C[s])){e.destination=null,s++,C.splice(0,s);return}C.splice(0,s)}finally{Ti(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function na(e,t){try{var r=e.abortableTasks;r.forEach(function(n){return Ba(n,e,t)}),r.clear(),e.destination!==null&&no(e,e.destination)}catch(n){Ct(e,n),mr(e,n)}}oo.renderToReadableStream=function(e,t){return new Promise(function(r,n){var o,s,i=new Promise(function(c,p){s=c,o=p}),a=kd(e,pp(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),dp(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,s,function(){var c=new ReadableStream({type:"bytes",pull:function(p){if(a.status===1)a.status=2,ia(p,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=p;try{no(a,p)}catch(d){Ct(a,d),mr(a,d)}}},cancel:function(){na(a)}},{highWaterMark:0});c.allReady=i,r(c)},function(c){i.catch(function(){}),n(c)},o);if(t&&t.signal){var l=t.signal,u=function(){na(a,l.reason),l.removeEventListener("abort",u)};l.addEventListener("abort",u)}ba(a)})};oo.version="18.3.1"});var Da=pe(Le=>{"use strict";var ze,Ra;ze=Di(),Ra=ka();Le.version=ze.version;Le.renderToString=ze.renderToString;Le.renderToStaticMarkup=ze.renderToStaticMarkup;Le.renderToNodeStream=ze.renderToNodeStream;Le.renderToStaticNodeStream=ze.renderToStaticNodeStream;Le.renderToReadableStream=Ra.renderToReadableStream});function Td(e){let t={},r;if(e)for(Ta.lastIndex=0,e=" "+(e||"")+" ";r=Ta.exec(e);)r[0]!==" "&&(t[r[1]]=r[3]);return t}function _a(e){let t=typeof e=="string"?e:e.value,r,n,o,s,i,a,l,u,c,p=[];M.lastIndex=0,n=r={type:0,children:[]};let d=0;function f(){s=t.substring(d,M.lastIndex-o[0].length),s&&n.children.push({type:2,value:s,parent:n})}for(;o=M.exec(t);){if(a=o[5]||o[8],l=o[6]||o[9],u=o[7]||o[10],so.has(n.name)&&o[2]!==n.name){i=M.lastIndex-o[0].length,n.children.length>0&&(n.children[0].value+=o[0]);continue}else if(a==="<!--"){if(i=M.lastIndex-o[0].length,so.has(n.name))continue;c={type:3,value:l,parent:n,loc:[{start:i,end:i+a.length},{start:M.lastIndex-u.length,end:M.lastIndex}]},p.push(c),c.parent.children.push(c)}else if(a==="<!")i=M.lastIndex-o[0].length,c={type:4,value:l,parent:n,loc:[{start:i,end:i+a.length},{start:M.lastIndex-u.length,end:M.lastIndex}]},p.push(c),c.parent.children.push(c);else if(o[1]!=="/")if(f(),so.has(n.name)){d=M.lastIndex,f();continue}else c={type:1,name:o[2]+"",attributes:Td(o[3]),parent:n,children:[],loc:[{start:M.lastIndex-o[0].length,end:M.lastIndex}]},p.push(c),c.parent.children.push(c),o[4]&&o[4].indexOf("/")>-1||Dd.has(c.name)?(c.loc[1]=c.loc[0],c.isSelfClosingTag=!0):n=c;else f(),o[2]+""===n.name?(c=n,n=c.parent,c.loc.push({start:M.lastIndex-o[0].length,end:M.lastIndex}),s=t.substring(c.loc[0].end,c.loc[1].start),c.children.length===0&&c.children.push({type:2,value:s,parent:n})):o[2]+""===p[p.length-1].name&&p[p.length-1].isSelfClosingTag===!0&&(c=p[p.length-1],c.loc.push({start:M.lastIndex-o[0].length,end:M.lastIndex}));d=M.lastIndex}return s=t.slice(d),n.children.push({type:2,value:s,parent:n}),r}var Na,La,Pa,iy,Dd,so,Ta,M,ay,ly,cy,Fa=j(()=>{Na=0,La=1,Pa=2,iy=Symbol("Fragment"),Dd=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),so=new Set(["script","style"]),Ta=/([\@\.a-z0-9_\:\-]*)\s*?=?\s*?(['"]?)([\s\S]*?)\2\s+/gim,M=/(?:<(\/?)([a-zA-Z][a-zA-Z0-9\:-]*)(?:\s([^>]*?))?((?:\s*\/)?)>|(<\!\-\-)([\s\S]*?)(\-\->)|(<\!)([\s\S]*?)(>))/gm;ay=Symbol("HTMLString"),ly=Symbol("AttrString"),cy=Symbol("RenderFn")});var Ma={};ut(Ma,{default:()=>Ld});function Ld(e){let t=_a(e.toString().trim()),r=Nd++,n=0;function o(i){let a=Array.isArray(i.children)&&i.children.length?i.children.map(l=>o(l)).filter(Boolean):void 0;if(i.type===Na)return(0,vt.createElement)(vt.Fragment,{},a);if(i.type===La){let{class:l,...u}=i.attributes;return(0,vt.createElement)(i.name,{...u,className:l,key:`${r}-${n++}`},a)}else if(i.type===Pa)return i.value.trim()?i.value:void 0}return o(t).props.children}var vt,Nd,ja=j(()=>{vt=Qe(Je(),1);Fa();Nd=0});function Fd(e){if(io.has(e))return io.get(e);let t={currentIndex:0,get id(){return _d+this.currentIndex.toString()}};return io.set(e,t),t}function Md(e){let t=Fd(e),r=t.id;return t.currentIndex++,r}async function Ud(e,t,r){if(typeof e=="object")return e.$$typeof.toString().slice(7).startsWith("react");if(typeof e!="function"||e.name==="QwikComponent"||typeof e=="function"&&e.$$typeof===Symbol.for("react.forward_ref"))return!1;if(e.prototype!=null&&typeof e.prototype.render=="function")return Ae.default.Component.isPrototypeOf(e)||Ae.default.PureComponent.isPrototypeOf(e);let n=!1;function o(...s){try{let i=e(...s);i&&i.$$typeof===$d&&(n=!0)}catch{}return Ae.default.createElement("div")}return await Ua(o,t,r,{}),n}async function Od(){let e="node:stream",{Writable:t}=await import(e);return t}function $a(e){return e.astroStaticSlot?!!e.hydrate:!0}async function Ua(e,t,{default:r,...n},o){let s;this&&this.result&&(s=Md(this.result));let i={prefix:s};delete t.class;let a={};for(let[h,A]of Object.entries(n)){let E=jd(h);a[E]=Ae.default.createElement(ao,{hydrate:$a(o),value:A,name:E})}let l={...t,...a},u=r??t.children;if(r&&Pd.experimentalReactChildren){i["data-react-children"]=!0;let h=await Promise.resolve().then(()=>(ja(),Ma)).then(A=>A.default);l.children=h(r)}else u!=null&&(l.children=Ae.default.createElement(ao,{hydrate:$a(o),value:u}));let c=this?await Hd(this):void 0;c&&(i["data-action-result"]=JSON.stringify(c[0]),i["data-action-key"]=c[1],i["data-action-name"]=c[2]);let p=Ae.default.createElement(e,l),d={identifierPrefix:s,formState:c},f;return"renderToReadableStream"in Cr.default?f=await Jd(p,d):f=await Kd(p,d),{html:f,attrs:i}}async function Hd({result:e}){let{request:t,actionResult:r}=e;if(!r||!Vd(t.headers.get("content-type")))return;let{searchParams:n}=new URL(t.url),o=await t.clone().formData(),s=o.get("$ACTION_KEY")?.toString(),i=n.get("_astroAction")??o.get("_astroAction")?.toString();if(!(!s||!i))return[r,s,i]}async function Kd(e,t){let r=await Od(),n="";return new Promise((o,s)=>{let i,a=Cr.default.renderToPipeableStream(e,{...t,onError(l){i=l,s(i)},onAllReady(){a.pipe(new r({write(l,u,c){n+=l.toString("utf-8"),c()},destroy(){o(n)}}))}})})}async function qd(e){let t=e.getReader(),r="",n=new TextDecoder("utf-8");for(;;){let{done:o,value:s}=await t.read();if(o)return s?r+=n.decode(s):n.decode(new Uint8Array),r;r+=n.decode(s,{stream:!0})}}async function Jd(e,t){return await qd(await Cr.default.renderToReadableStream(e,t))}function Vd(e){let t=e?.split(";")[0].toLowerCase();return Gd.some(r=>t===r)}var Ae,Cr,Pd,io,_d,ao,jd,$d,Gd,zd,Ye,vr=j(()=>{Ae=Qe(Je(),1),Cr=Qe(Da(),1),Pd={experimentalReactChildren:!1},io=new WeakMap,_d="r";ao=({value:e,name:t,hydrate:r=!0})=>e?(0,Ae.createElement)(r?"astro-slot":"astro-static-slot",{name:t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:e}}):null;ao.shouldComponentUpdate=()=>!1;jd=e=>e.trim().replace(/[-_]([a-z])/g,(t,r)=>r.toUpperCase()),$d=Symbol.for("react.element");Gd=["application/x-www-form-urlencoded","multipart/form-data"];zd={name:"@astrojs/react",check:Ud,renderToStaticMarkup:Ua,supportsAstroStaticSlot:!0},Ye=[Object.assign({name:"@astrojs/react",clientEntrypoint:"@astrojs/react/client.js",serverEntrypoint:"@astrojs/react/server.js"},{ssr:zd})]});function xr(e){return e.endsWith("/")?e:e+"/"}function xt(e){return e[0]==="/"?e:"/"+e}function St(e){return e.endsWith("/")?e.slice(0,e.length-1):e}function Yd(e){return e.startsWith("/")?e.substring(1):e}function lo(e){return e.replace(/^\/|\/$/g,"")}function Wd(e){return typeof e=="string"||e instanceof String}function Ce(...e){return e.filter(Wd).map((t,r)=>r===0?St(t):r===e.length-1?Yd(t):lo(t)).join("/")}function We(e){return/^(?:http|ftp|https|ws):?\/\//.test(e)||e.startsWith("data:")}function co(e){return e.replace(/\\/g,"/")}function Oa(e){let t=e.split(".").pop();return t!==e?`.${t}`:""}var Bt=j(()=>{});function T(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),n=`\x1B[${e}m`,o=`\x1B[${t}m`;return function(s){return!Xd.enabled||s==null?s:n+(~(""+s).indexOf(o)?s.replace(r,o+n):s)+o}}var uo,Ha,Ka,qa,Ja,Xd,hy,Sr,po,Ay,my,gy,yy,wy,Ey,Ga,Cy,Va,za,vy,xy,Sy,By,Iy,by,Qy,ky,Ry,Dy,Ty,Ny,Ly,It=j(()=>{Ja=!0;typeof process<"u"&&({FORCE_COLOR:uo,NODE_DISABLE_COLORS:Ha,NO_COLOR:Ka,TERM:qa}=process.env||{},Ja=process.stdout&&process.stdout.isTTY);Xd={enabled:!Ha&&Ka==null&&qa!=="dumb"&&(uo!=null&&uo!=="0"||Ja)};hy=T(0,0),Sr=T(1,22),po=T(2,22),Ay=T(3,23),my=T(4,24),gy=T(7,27),yy=T(8,28),wy=T(9,29),Ey=T(30,39),Ga=T(31,39),Cy=T(32,39),Va=T(33,39),za=T(34,39),vy=T(35,39),xy=T(36,39),Sy=T(37,39),By=T(90,39),Iy=T(90,39),by=T(40,49),Qy=T(41,49),ky=T(42,49),Ry=T(43,49),Dy=T(44,49),Ty=T(45,49),Ny=T(46,49),Ly=T(47,49)});var nl={};ut(nl,{A:()=>g,B:()=>So,C:()=>fo,D:()=>$r,E:()=>Co,F:()=>Pr,G:()=>go,H:()=>Br,I:()=>Tr,J:()=>vo,K:()=>pf,L:()=>Fr,M:()=>Ao,N:()=>Dr,O:()=>Ze,P:()=>Nr,R:()=>Pe,S:()=>ho,a:()=>Mr,b:()=>jr,c:()=>ve,d:()=>Qt,e:()=>Ir,f:()=>xe,g:()=>_r,h:()=>Xe,i:()=>wo,j:()=>Ur,k:()=>me,l:()=>Bo,m:()=>yo,n:()=>Lr,o:()=>Hr,p:()=>xo,q:()=>Eo,r:()=>Or,s:()=>Rt,t:()=>Qr,u:()=>br,v:()=>mo,w:()=>kr,x:()=>bt,y:()=>kt,z:()=>Rr});function tf(e){return e.replace(/\r\n|\r(?!\n)|\n/g,`
`)}function rf(e,t){if(!t||t.line===void 0||t.column===void 0)return"";let r=tf(e).split(`
`).map(i=>i.replace(/\t/g,"  ")),n=[];for(let i=-2;i<=2;i++)r[t.line+i]&&n.push(t.line+i);let o=0;for(let i of n){let a=`> ${i}`;a.length>o&&(o=a.length)}let s="";for(let i of n){let a=i===t.line-1;s+=a?"> ":"  ",s+=`${i+1} | ${r[i]}
`,a&&(s+=`${Array.from({length:o}).join(" ")}  | ${Array.from({length:t.column}).join(" ")}^
`)}return s}function me(e){return typeof e=="object"}function Ur(e){return typeof e=="string"}async function Or(e){return typeof e=="object"&&"then"in e?(await e).default??await e:e}function nf(e,t){return sf(e,t.protocol)&&rl(e,t.hostname,!0)&&of(e,t.port)&&af(e,t.pathname)}function of(e,t){return!t||t===e.port}function sf(e,t){return!t||t===e.protocol.slice(0,-1)}function rl(e,t,r){if(t){if(!r||!t.startsWith("*"))return t===e.hostname;if(t.startsWith("**.")){let n=t.slice(2);return n!==e.hostname&&e.hostname.endsWith(n)}else if(t.startsWith("*.")){let n=t.slice(1);return e.hostname.replace(n,"").split(".").filter(Boolean).length===1}}else return!0;return!1}function af(e,t,r){if(t)if(t.endsWith("*")){if(t.endsWith("/**")){let n=t.slice(0,-2);return n!==e.pathname&&e.pathname.startsWith(n)}else if(t.endsWith("/*")){let n=t.slice(0,-1);return e.pathname.replace(n,"").split("/").filter(Boolean).length===1}}else return t===e.pathname;else return!0;return!1}function Hr(e,{domains:t=[],remotePatterns:r=[]}){if(!We(e))return!1;let n=new URL(e);return t.some(o=>rl(n,o))||r.some(o=>nf(n,o))}function Bo(e){return e?"transform"in e:!1}function tl(e){let t=e.width,r=e.height;if(me(e.src)){let n=e.src.width/e.src.height;r&&!t?t=Math.round(r*n):t&&!r?r=Math.round(t/n):!t&&!r&&(t=e.src.width,r=e.src.height)}return{targetWidth:t,targetHeight:r}}var Br,fo,ho,bt,Ze,Ao,ve,Ir,Qt,br,Qr,mo,kr,go,Rr,Dr,Tr,Nr,Lr,yo,Ya,Pr,Wa,Zd,kt,Xe,_r,wo,ef,xe,Pe,Eo,Rt,Co,Fr,vo,Xa,Mr,jr,xo,So,g,Za,el,$r,lf,cf,uf,pf,Dt=j(()=>{Bt();Br={name:"ClientAddressNotAvailable",title:"`Astro.clientAddress` is not available in current adapter.",message:e=>`\`Astro.clientAddress\` is not available in the \`${e}\` adapter. File an issue with the adapter to add support.`},fo={name:"PrerenderClientAddressNotAvailable",title:"`Astro.clientAddress` cannot be used inside prerendered routes.",message:"`Astro.clientAddress` cannot be used inside prerendered routes"},ho={name:"StaticClientAddressNotAvailable",title:"`Astro.clientAddress` is not available in static mode.",message:"`Astro.clientAddress` is only available when using `output: 'server'` or `output: 'hybrid'`. Update your Astro config if you need SSR features.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/ for more information on how to enable SSR."},bt={name:"NoMatchingStaticPathFound",title:"No static path found for requested path.",message:e=>`A \`getStaticPaths()\` route pattern was matched, but no matching static path was found for requested path \`${e}\`.`,hint:e=>`Possible dynamic routes being matched: ${e.join(", ")}.`},Ze={name:"OnlyResponseCanBeReturned",title:"Invalid type returned by Astro page.",message:(e,t)=>`Route \`${e||""}\` returned a \`${t}\`. Only a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) can be returned from Astro files.`,hint:"See https://docs.astro.build/en/guides/server-side-rendering/#response for more information."},Ao={name:"MissingMediaQueryDirective",title:"Missing value for `client:media` directive.",message:'Media query not provided for `client:media` directive. A media query similar to `client:media="(max-width: 600px)"` must be provided'},ve={name:"NoMatchingRenderer",title:"No matching renderer found.",message:(e,t,r,n)=>`Unable to render \`${e}\`.

${n>0?`There ${r?"are":"is"} ${n} renderer${r?"s":""} configured in your \`astro.config.mjs\` file,
but ${r?"none were":"it was not"} able to server-side render \`${e}\`.`:`No valid renderer was found ${t?`for the \`.${t}\` file extension.`:"for this file extension."}`}`,hint:e=>`Did you mean to enable the ${e} integration?

See https://docs.astro.build/en/guides/framework-components/ for more information on how to install and configure integrations.`},Ir={name:"NoClientEntrypoint",title:"No client entrypoint specified in renderer.",message:(e,t,r)=>`\`${e}\` component has a \`client:${t}\` directive, but no client entrypoint was provided by \`${r}\`.`,hint:"See https://docs.astro.build/en/reference/integrations-reference/#addrenderer-option for more information on how to configure your renderer."},Qt={name:"NoClientOnlyHint",title:"Missing hint on client:only directive.",message:e=>`Unable to render \`${e}\`. When using the \`client:only\` hydration strategy, Astro needs a hint to use the correct renderer.`,hint:e=>`Did you mean to pass \`client:only="${e}"\`? See https://docs.astro.build/en/reference/directives-reference/#clientonly for more information on client:only`},br={name:"InvalidGetStaticPathsEntry",title:"Invalid entry inside getStaticPath's return value",message:e=>`Invalid entry returned by getStaticPaths. Expected an object, got \`${e}\``,hint:"If you're using a `.map` call, you might be looking for `.flatMap()` instead. See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},Qr={name:"InvalidGetStaticPathsReturn",title:"Invalid value returned by getStaticPaths.",message:e=>`Invalid type returned by \`getStaticPaths\`. Expected an \`array\`, got \`${e}\``,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},mo={name:"GetStaticPathsExpectedParams",title:"Missing params property on `getStaticPaths` route.",message:"Missing or empty required `params` property on `getStaticPaths` route.",hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},kr={name:"GetStaticPathsInvalidRouteParam",title:"Invalid value for `getStaticPaths` route parameter.",message:(e,t,r)=>`Invalid getStaticPaths route parameter for \`${e}\`. Expected undefined, a string or a number, received \`${r}\` (\`${t}\`)`,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},go={name:"GetStaticPathsRequired",title:"`getStaticPaths()` function required for dynamic routes.",message:"`getStaticPaths()` function is required for dynamic routes. Make sure that you `export` a `getStaticPaths` function from your dynamic route.",hint:'See https://docs.astro.build/en/guides/routing/#dynamic-routes for more information on dynamic routes.\n\nAlternatively, set `output: "server"` or `output: "hybrid"` in your Astro config file to switch to a non-static server build. This error can also occur if using `export const prerender = true;`.\nSee https://docs.astro.build/en/guides/server-side-rendering/ for more information on non-static rendering.'},Rr={name:"ReservedSlotName",title:"Invalid slot name.",message:e=>`Unable to create a slot named \`${e}\`. \`${e}\` is a reserved slot name. Please update the name of this slot.`},Dr={name:"NoMatchingImport",title:"No import found for component.",message:e=>`Could not render \`${e}\`. No matching import has been found for \`${e}\`.`,hint:"Please make sure the component is properly imported."},Tr={name:"InvalidComponentArgs",title:"Invalid component arguments.",message:e=>`Invalid arguments passed to${e?` <${e}>`:""} component.`,hint:"Astro components cannot be rendered directly via function call, such as `Component()` or `{items.map(Component)}`."},Nr={name:"PageNumberParamNotFound",title:"Page number param not found.",message:e=>`[paginate()] page number param \`${e}\` not found in your filepath.`,hint:"Rename your file to `[page].astro` or `[...page].astro`."},Lr={name:"ImageMissingAlt",title:'Image missing required "alt" property.',message:'Image missing "alt" property. "alt" text is required to describe important images on the page.',hint:'Use an empty string ("") for decorative images.'},yo={name:"InvalidImageService",title:"Error while loading image service.",message:"There was an error loading the configured image service. Please see the stack trace for more information."},Ya={name:"MissingImageDimension",title:"Missing image dimensions",message:(e,t)=>`Missing ${e==="both"?"width and height attributes":`${e} attribute`} for ${t}. When using remote images, both dimensions are required in order to avoid CLS.`,hint:"If your image is inside your `src` folder, you probably meant to import it instead. See [the Imports guide for more information](https://docs.astro.build/en/guides/imports/#other-assets). You can also use `inferSize={true}` for remote images to get the original dimensions."},Pr={name:"FailedToFetchRemoteImageDimensions",title:"Failed to retrieve remote image dimensions",message:e=>`Failed to get the dimensions for ${e}.`,hint:"Verify your remote image URL is accurate, and that you are not using `inferSize` with a file located in your `public/` folder."},Wa={name:"UnsupportedImageFormat",title:"Unsupported image format",message:(e,t,r)=>`Received unsupported format \`${e}\` from \`${t}\`. Currently only ${r.join(", ")} are supported by our image services.`,hint:"Using an `img` tag directly instead of the `Image` component might be what you're looking for."},Zd={name:"UnsupportedImageConversion",title:"Unsupported image conversion",message:"Converting between vector (such as SVGs) and raster (such as PNGs and JPEGs) images is not currently supported."},kt={name:"PrerenderDynamicEndpointPathCollide",title:"Prerendered dynamic endpoint has path collision.",message:e=>`Could not render \`${e}\` with an \`undefined\` param as the generated path will collide during prerendering. Prevent passing \`undefined\` as \`params\` for the endpoint's \`getStaticPaths()\` function, or add an additional extension to the endpoint's filename.`,hint:e=>`Rename \`${e}\` to \`${e.replace(/\.(?:js|ts)/,t=>".json"+t)}\``},Xe={name:"ExpectedImage",title:"Expected src to be an image.",message:(e,t,r)=>`Expected \`src\` property for \`getImage\` or \`<Image />\` to be either an ESM imported image or a string with the path of a remote image. Received \`${e}\` (type: \`${t}\`).

Full serialized options received: \`${r}\`.`,hint:"This error can often happen because of a wrong path. Make sure the path to your image is correct. If you're passing an async function, make sure to call and await it."},_r={name:"ExpectedImageOptions",title:"Expected image options.",message:e=>`Expected getImage() parameter to be an object. Received \`${e}\`.`},wo={name:"ExpectedNotESMImage",title:"Expected image options, not an ESM-imported image.",message:"An ESM-imported image cannot be passed directly to `getImage()`. Instead, pass an object with the image in the `src` property.",hint:"Try changing `getImage(myImage)` to `getImage({ src: myImage })`"},ef={name:"IncompatibleDescriptorOptions",title:"Cannot set both `densities` and `widths`",message:"Only one of `densities` or `widths` can be specified. In most cases, you'll probably want to use only `widths` if you require specific widths.",hint:"Those attributes are used to construct a `srcset` attribute, which cannot have both `x` and `w` descriptors."},xe={name:"NoImageMetadata",title:"Could not process image metadata.",message:e=>`Could not process image metadata${e?` for \`${e}\``:""}.`,hint:"This is often caused by a corrupted or malformed image. Re-exporting the image from your image editor may fix this issue."},Pe={name:"ResponseSentError",title:"Unable to set response.",message:"The response has already been sent to the browser and cannot be altered."},Eo={name:"MiddlewareNoDataOrNextCalled",title:"The middleware didn't return a `Response`.",message:"Make sure your middleware returns a `Response` object, either directly or by returning the `Response` from calling the `next` function."},Rt={name:"MiddlewareNotAResponse",title:"The middleware returned something that is not a `Response` object.",message:"Any data returned from middleware must be a valid `Response` object."},Co={name:"EndpointDidNotReturnAResponse",title:"The endpoint did not return a `Response`.",message:"An endpoint must return either a `Response`, or a `Promise` that resolves with a `Response`."},Fr={name:"LocalsNotAnObject",title:"Value assigned to `locals` is not accepted.",message:"`locals` can only be assigned to an object. Other values like numbers, strings, etc. are not accepted.",hint:"If you tried to remove some information from the `locals` object, try to use `delete` or set the property to `undefined`."},vo={name:"AstroResponseHeadersReassigned",title:"`Astro.response.headers` must not be reassigned.",message:"Individual headers can be added to and removed from `Astro.response.headers`, but it must not be replaced with another instance of `Headers` altogether.",hint:"Consider using `Astro.response.headers.add()`, and `Astro.response.headers.delete()`."},Xa={name:"LocalImageUsedWrongly",title:"Local images must be imported.",message:e=>`\`Image\`'s and \`getImage\`'s \`src\` parameter must be an imported image or an URL, it cannot be a string filepath. Received \`${e}\`.`,hint:"If you want to use an image from your `src` folder, you need to either import it or if the image is coming from a content collection, use the [image() schema helper](https://docs.astro.build/en/guides/images/#images-in-content-collections). See https://docs.astro.build/en/guides/images/#src-required for more information on the `src` property."},Mr={name:"AstroGlobUsedOutside",title:"Astro.glob() used outside of an Astro file.",message:e=>`\`Astro.glob(${e})\` can only be used in \`.astro\` files. \`import.meta.glob(${e})\` can be used instead to achieve a similar result.`,hint:"See Vite's documentation on `import.meta.glob` for more information: https://vite.dev/guide/features.html#glob-import"},jr={name:"AstroGlobNoMatch",title:"Astro.glob() did not match any files.",message:e=>`\`Astro.glob(${e})\` did not return any matching files.`,hint:"Check the pattern for typos."},xo={name:"i18nNoLocaleFoundInPath",title:"The path doesn't contain any locale",message:"You tried to use an i18n utility on a path that doesn't contain any locale. You can use `pathHasLocale` first to determine if the path has a locale."},So={name:"RewriteWithBodyUsed",title:"Cannot use Astro.rewrite after the request body has been read",message:"Astro.rewrite() cannot be used if the request body has already been read. If you need to read the body, first clone the request."};g=class extends Error{loc;title;hint;frame;type="AstroError";constructor(t,r){let{name:n,title:o,message:s,stack:i,location:a,hint:l,frame:u}=t;super(s,r),this.title=o,this.name=n,s&&(this.message=s),this.stack=i||this.stack,this.loc=a,this.hint=l,this.frame=u}setLocation(t){this.loc=t}setName(t){this.name=t}setMessage(t){this.message=t}setHint(t){this.hint=t}setFrame(t,r){this.frame=rf(t,r)}static is(t){return t.type==="AstroError"}},Za=["jpeg","jpg","png","tiff","webp","gif","svg","avif"],el="webp",$r=["src","width","height","format","quality"];lf={propertiesToHash:$r,validateOptions(e){if(!e.src||typeof e.src!="string"&&typeof e.src!="object")throw new g({...Xe,message:Xe.message(JSON.stringify(e.src),typeof e.src,JSON.stringify(e,(t,r)=>r===void 0?null:r))});if(me(e.src)){if(!Za.includes(e.src.format))throw new g({...Wa,message:Wa.message(e.src.format,e.src.src,Za)});if(e.widths&&e.densities)throw new g(ef);if(e.src.format==="svg"&&(e.format="svg"),e.src.format==="svg"&&e.format!=="svg"||e.src.format!=="svg"&&e.format==="svg")throw new g(Zd)}else{if(e.src.startsWith("/@fs/")||!We(e.src)&&!e.src.startsWith("/"))throw new g({...Xa,message:Xa.message(e.src)});let t;if(!e.width&&!e.height?t="both":!e.width&&e.height?t="width":e.width&&!e.height&&(t="height"),t)throw new g({...Ya,message:Ya.message(t,e.src)})}return e.format||(e.format=el),e.width&&(e.width=Math.round(e.width)),e.height&&(e.height=Math.round(e.height)),e},getHTMLAttributes(e){let{targetWidth:t,targetHeight:r}=tl(e),{src:n,width:o,height:s,format:i,quality:a,densities:l,widths:u,formats:c,...p}=e;return{...p,width:t,height:r,loading:p.loading??"lazy",decoding:p.decoding??"async"}},getSrcSet(e){let t=[],{targetWidth:r}=tl(e),{widths:n,densities:o}=e,s=e.format??el,i=e.width,a=1/0;me(e.src)&&(i=e.src.width,a=i);let{width:l,height:u,...c}=e,p=[];if(o){let d=o.map(h=>typeof h=="number"?h:parseFloat(h)),f=d.sort().map(h=>Math.round(r*h));p.push(...f.map((h,A)=>({maxTargetWidth:Math.min(h,a),descriptor:`${d[A]}x`})))}else n&&p.push(...n.map(d=>({maxTargetWidth:Math.min(d,a),descriptor:`${d}w`})));for(let{maxTargetWidth:d,descriptor:f}of p){let h={...c};d!==i?h.width=d:e.width&&e.height&&(h.width=e.width,h.height=e.height),t.push({transform:h,descriptor:f,attributes:{type:`image/${s}`}})}return t},getURL(e,t){let r=new URLSearchParams;if(me(e.src))r.append("href",e.src.src);else if(Hr(e.src,t))r.append("href",e.src);else return e.src;return Object.entries({w:"width",h:"height",q:"quality",f:"format"}).forEach(([s,i])=>{e[i]&&r.append(s,e[i].toString())}),`${Ce("/","/_image")}?${r}`},parseURL(e){let t=e.searchParams;return t.has("href")?{src:t.get("href"),width:t.has("w")?parseInt(t.get("w")):void 0,height:t.has("h")?parseInt(t.get("h")):void 0,format:t.get("f"),quality:t.get("q")}:void 0}};cf={...lf,propertiesToHash:["src"],async transform(e,t){return{data:e,format:t.format}}},uf=cf,pf=Object.freeze(Object.defineProperty({__proto__:null,default:uf},Symbol.toStringTag,{value:"Module"}))});function ol(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=ol(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Io(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=ol(e))&&(n&&(n+=" "),n+=t);return n}var et=j(()=>{});var df,ff,hf,Af,Kr,bo=j(()=>{({replace:df}=""),ff=/[&<>'"]/g,hf={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Af=e=>hf[e],Kr=e=>df.call(e,ff,Af)});function Qo(e){let t="";for(let r=0;r<e.length;r++)t+=sl[e[r]>>4],t+=sl[e[r]&15];return t}function ko(e){if(e.length%2!==0)throw new Error("Invalid hex string");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){if(!(e[r]in qr))throw new Error("Invalid character");if(!(e[r+1]in qr))throw new Error("Invalid character");t[r/2]|=qr[e[r]]<<4,t[r/2]|=qr[e[r+1]]}return t}var sl,qr,il=j(()=>{sl="0123456789ABCDEF",qr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}});var al,ll,cl=j(()=>{(function(e){e[e.Include=0]="Include",e[e.None=1]="None"})(al||(al={}));(function(e){e[e.Required=0]="Required",e[e.Ignore=1]="Ignore"})(ll||(ll={}))});function Ro(e){return mf(e,gf,Jr.Include)}function mf(e,t,r){let n="";for(let o=0;o<e.byteLength;o+=3){let s=0,i=0;for(let a=0;a<3&&o+a<e.byteLength;a++)s=s<<8|e[o+a],i+=8;for(let a=0;a<4;a++)i>=6?(n+=t[s>>i-6&63],i-=6):i>0?(n+=t[s<<6-i&63],i=0):r===Jr.Include&&(n+="=")}return n}function Gr(e){return yf(e,wf,Tt.Required)}function yf(e,t,r){let n=new Uint8Array(Math.ceil(e.length/4)*3),o=0;for(let s=0;s<e.length;s+=4){let i=0,a=0;for(let u=0;u<4;u++)if(!(r===Tt.Required&&e[s+u]==="=")&&!(r===Tt.Ignore&&(s+u>=e.length||e[s+u]==="="))){if(u>0&&e[s+u-1]==="=")throw new Error("Invalid padding");if(!(e[s+u]in t))throw new Error("Invalid character");i|=t[e[s+u]]<<(3-u)*6,a+=6}if(a<24){let u;if(a===12)u=i&65535;else if(a===18)u=i&255;else throw new Error("Invalid padding");if(u!==0)throw new Error("Invalid padding")}let l=Math.floor(a/8);for(let u=0;u<l;u++)n[o]=i>>16-u*8&255,o++}return n.slice(0,o)}var gf,Jr,Tt,wf,ul=j(()=>{gf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(e){e[e.Include=0]="Include",e[e.None=1]="None"})(Jr||(Jr={}));(function(e){e[e.Required=0]="Required",e[e.Ignore=1]="Ignore"})(Tt||(Tt={}));wf={0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"+":62,"/":63}});var pl=j(()=>{il();cl();ul()});var fl=pe((a0,dl)=>{"use strict";var Ef={},Cf=Ef.hasOwnProperty,vf=function(t,r){if(!t)return r;var n={};for(var o in r)n[o]=Cf.call(t,o)?t[o]:r[o];return n},xf=/[ -,\.\/:-@\[-\^`\{-~]/,Sf=/[ -,\.\/:-@\[\]\^`\{-~]/,Bf=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Do=function e(t,r){r=vf(r,e.options),r.quotes!="single"&&r.quotes!="double"&&(r.quotes="single");for(var n=r.quotes=="double"?'"':"'",o=r.isIdentifier,s=t.charAt(0),i="",a=0,l=t.length;a<l;){var u=t.charAt(a++),c=u.charCodeAt(),p=void 0;if(c<32||c>126){if(c>=55296&&c<=56319&&a<l){var d=t.charCodeAt(a++);(d&64512)==56320?c=((c&1023)<<10)+(d&1023)+65536:a--}p="\\"+c.toString(16).toUpperCase()+" "}else r.escapeEverything?xf.test(u)?p="\\"+u:p="\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(u)?p="\\"+c.toString(16).toUpperCase()+" ":u=="\\"||!o&&(u=='"'&&n==u||u=="'"&&n==u)||o&&Sf.test(u)?p="\\"+u:p=u;i+=p}return o&&(/^-[-\d]/.test(i)?i="\\-"+i.slice(1):/\d/.test(s)&&(i="\\3"+s+" "+i.slice(1))),i=i.replace(Bf,function(f,h,A){return h&&h.length%2?f:(h||"")+A}),!o&&r.wrap?n+i+n:i};Do.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};Do.version="3.0.0";dl.exports=Do});async function Il(e,t,r,n){let{request:o,url:s}=t,i=o.method.toUpperCase(),a=e[i]??e.ALL;if(!r&&r===!1&&i!=="GET"&&n.warn("router",`${s.pathname} ${Sr(i)} requests are not available for a static site. Update your config to \`output: 'server'\` or \`output: 'hybrid'\` to enable.`),a===void 0)return n.warn("router",`No API Route handler exists for the method "${i}" for the route "${s.pathname}".
Found handlers: ${Object.keys(e).map(u=>JSON.stringify(u)).join(", ")}
`+("all"in e?`One of the exported handlers is "all" (lowercase), did you mean to export 'ALL'?
`:"")),new Response(null,{status:404});if(typeof a!="function")return n.error("router",`The route "${s.pathname}" exports a value for the method "${i}", but it is of the type ${typeof a} instead of a function.`),new Response(null,{status:500});let l=await a.call(e,t);if(!l||!(l instanceof Response))throw new g(Co);if(Vo.includes(l.status))try{l.headers.set(ie,"no")}catch(u){if(u.message?.includes("immutable"))l=new Response(l.body,l),l.headers.set(ie,"no");else throw u}return l}function If(e){return!(e.length!==3||!e[0]||typeof e[0]!="object")}function bl(e,t,r){let n=t?.split("/").pop()?.replace(".astro","")??"",o=(...s)=>{if(!If(s))throw new g({...Tr,message:Tr.message(n)});return e(...s)};return Object.defineProperty(o,"name",{value:n,writable:!1}),o.isAstroComponentFactory=!0,o.moduleId=t,o.propagation=r,o}function bf(e){return bl(e.factory,e.moduleId,e.propagation)}function ot(e,t,r){return typeof e=="function"?bl(e,t,r):bf(e)}function Qf(){return t=>{if(typeof t=="string")throw new g({...Mr,message:Mr.message(JSON.stringify(t))});let r=[...Object.values(t)];if(r.length===0)throw new g({...jr,message:jr.message(JSON.stringify(t))});return Promise.all(r.map(n=>n()))}}function Mt(e){return{site:void 0,generator:`Astro v${Go}`,glob:Qf()}}function Zr(e){return!!e&&typeof e=="object"&&"then"in e&&typeof e.then=="function"}async function*kf(e){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}function Rf(e){return Object.prototype.toString.call(e)==="[object HTMLString]"}function Df(e){return new zr(e)}function Ql(e){return typeof e.getReader=="function"}async function*hl(e){if(Ql(e))for await(let t of kf(e))yield Pt(t);else for await(let t of e)yield Pt(t)}function*Tf(e){for(let t of e)yield Pt(t)}function Pt(e){if(e&&typeof e=="object"){if(e instanceof Uint8Array)return Df(e);if(e instanceof Response&&e.body){let t=e.body;return hl(t)}else{if(typeof e.then=="function")return Promise.resolve(e).then(t=>Pt(t));if(e[Symbol.for("astro:slot-string")])return e;if(Symbol.iterator in e)return Tf(e);if(Symbol.asyncIterator in e||Ql(e))return hl(e)}}return Q(e)}function Al(e){return e&&typeof e=="object"&&e[kl]}function Yr(e){return Object.defineProperty(e,Rl,{value:!0})}function Yo(e){return e&&typeof e=="object"&&e[Rl]}function To(e,t={},r=new WeakSet){if(r.has(e))throw new Error(`Cyclic reference detected while serializing props for <${t.displayName} client:${t.hydrate}>!

Cyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);r.add(e);let n=e.map(o=>Tl(o,t,r));return r.delete(e),n}function Dl(e,t={},r=new WeakSet){if(r.has(e))throw new Error(`Cyclic reference detected while serializing props for <${t.displayName} client:${t.hydrate}>!

Cyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);r.add(e);let n=Object.fromEntries(Object.entries(e).map(([o,s])=>[o,Tl(s,t,r)]));return r.delete(e),n}function Tl(e,t={},r=new WeakSet){switch(Object.prototype.toString.call(e)){case"[object Date]":return[V.Date,e.toISOString()];case"[object RegExp]":return[V.RegExp,e.source];case"[object Map]":return[V.Map,To(Array.from(e),t,r)];case"[object Set]":return[V.Set,To(Array.from(e),t,r)];case"[object BigInt]":return[V.BigInt,e.toString()];case"[object URL]":return[V.URL,e.toString()];case"[object Array]":return[V.JSON,To(e,t,r)];case"[object Uint8Array]":return[V.Uint8Array,Array.from(e)];case"[object Uint16Array]":return[V.Uint16Array,Array.from(e)];case"[object Uint32Array]":return[V.Uint32Array,Array.from(e)];default:return e!==null&&typeof e=="object"?[V.Value,Dl(e,t,r)]:e===1/0?[V.Infinity,1]:e===-1/0?[V.Infinity,-1]:e===void 0?[V.Value]:[V.Value,e]}}function Nl(e,t){return JSON.stringify(Dl(e,t))}function Nf(e,t){let r={isPage:!1,hydration:null,props:{},propsWithoutTransitionAttributes:{}};for(let[n,o]of Object.entries(e))if(n.startsWith("server:")&&n==="server:root"&&(r.isPage=!0),n.startsWith("client:"))switch(r.hydration||(r.hydration={directive:"",value:"",componentUrl:"",componentExport:{value:""}}),n){case"client:component-path":{r.hydration.componentUrl=o;break}case"client:component-export":{r.hydration.componentExport.value=o;break}case"client:component-hydration":break;case"client:display-name":break;default:{if(r.hydration.directive=n.split(":")[1],r.hydration.value=o,!t.has(r.hydration.directive)){let s=Array.from(t.keys()).map(i=>`client:${i}`).join(", ");throw new Error(`Error: invalid hydration directive "${n}". Supported hydration methods: ${s}`)}if(r.hydration.directive==="media"&&typeof r.hydration.value!="string")throw new g(Ao);break}}else r.props[n]=o,Ll.includes(n)||(r.propsWithoutTransitionAttributes[n]=o);for(let n of Object.getOwnPropertySymbols(e))r.props[n]=e[n],r.propsWithoutTransitionAttributes[n]=e[n];return r}async function Lf(e,t){let{renderer:r,result:n,astroId:o,props:s,attrs:i}=e,{hydrate:a,componentUrl:l,componentExport:u}=t;if(!u.value)throw new g({...Dr,message:Dr.message(t.displayName)});let c={children:"",props:{uid:o}};if(i)for(let[d,f]of Object.entries(i))c.props[d]=Lt(f);c.props["component-url"]=await n.resolve(decodeURI(l)),r.clientEntrypoint&&(c.props["component-export"]=u.value,c.props["renderer-url"]=await n.resolve(decodeURI(r.clientEntrypoint)),c.props.props=Lt(Nl(s,t))),c.props.ssr="",c.props.client=a;let p=await n.resolve("astro:scripts/before-hydration.js");return p.length&&(c.props["before-hydration-url"]=p),c.props.opts=Lt(JSON.stringify({name:t.displayName,value:t.hydrateArgs||""})),Ll.forEach(d=>{typeof s[d]<"u"&&(c.props[d]=s[d])}),c}function Pf(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t=(t<<5)-t+n,t=t&t}return t}function _f(e){let t,r="",n=Pf(e),o=n<0?"Z":"";for(n=Math.abs(n);n>=No;)t=n%No,n=Math.floor(n/No),r=Mo[t]+r;return n>0&&(r=Mo[n]+r),o+r}function Pl(e){return e==null?!1:e.isAstroComponentFactory===!0}function Ff(e,t){let r=t.propagation||"none";return t.moduleId&&e.componentMetadata.has(t.moduleId)&&r==="none"&&(r=e.componentMetadata.get(t.moduleId).propagation),r==="in-tree"||r==="self"}function Wo(e){return typeof e=="object"&&e!==null&&!!e[Mf]}function Uf(e){return e._metadata.hasHydrationScript?!1:e._metadata.hasHydrationScript=!0}function Of(e,t){return e._metadata.hasDirectives.has(t)?!1:(e._metadata.hasDirectives.add(t),!0)}function ml(e,t){let n=e.clientDirectives.get(t);if(!n)throw new Error(`Unknown directive: ${t}`);return n}function Hf(e,t,r){switch(t){case"both":return`${$f}<script>${ml(e,r)};${jf}<\/script>`;case"directive":return`<script>${ml(e,r)}<\/script>`}return""}function Xf(e){let t="";for(let[r,n]of Object.entries(e))t+=`const ${Yf(r)} = ${JSON.stringify(n)?.replace(/<\/script>/g,"\\x3C/script>")};
`;return Q(t)}function Lo(e){return e.length===1?e[0]:`${e.slice(0,-1).join(", ")} or ${e[e.length-1]}`}function je(e,t,r=!0){if(e==null)return"";if(e===!1)return qf.test(t)||Jf.test(t)?Q(` ${t}="false"`):"";if(zf.has(t))return console.warn(`[astro] The "${t}" directive cannot be applied dynamically at runtime. It will not be rendered as an attribute.

Make sure to use the static attribute syntax (\`${t}={value}\`) instead of the dynamic spread syntax (\`{...{ "${t}": value }}\`).`),"";if(t==="class:list"){let n=_e(Io(e),r);return n===""?"":Q(` ${t.slice(0,-5)}="${n}"`)}if(t==="style"&&!(e instanceof Me)){if(Array.isArray(e)&&e.length===2)return Q(` ${t}="${_e(`${gl(e[0])};${e[1]}`,r)}"`);if(typeof e=="object")return Q(` ${t}="${_e(gl(e),r)}"`)}return t==="className"?Q(` class="${_e(e,r)}"`):typeof e=="string"&&e.includes("&")&&nh(e)?Q(` ${t}="${_e(e,!1)}"`):e===!0&&(t.startsWith("data-")||Kf.test(t))?Q(` ${t}`):Q(` ${t}="${_e(e,r)}"`)}function jo(e,t=!0){let r="";for(let[n,o]of Object.entries(e))r+=je(o,n,t);return Q(r)}function Nt(e,{props:t,children:r=""},n=!0){let{lang:o,"data-astro-id":s,"define:vars":i,...a}=t;return i&&(e==="style"&&(delete a["is:global"],delete a["is:scoped"]),e==="script"&&(delete a.hoist,r=Xf(i)+`
`+r)),(r==null||r=="")&&Xo.test(e)?`<${e}${jo(a,n)}>`:`<${e}${jo(a,n)}>${r}</${e}>`}function _l(e){return new $o(e)}function yl(){let e,t;return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}function nh(e){try{let t=new URL(e);return rh.includes(t.protocol)}catch{return!1}}function wl(e){e._metadata.hasRenderedHead=!0;let t=Array.from(e.styles).filter(Po).map(s=>s.props.rel==="stylesheet"?Nt("link",s):Nt("style",s));e.styles.clear();let r=Array.from(e.scripts).filter(Po).map(s=>Nt("script",s,!1)),n=Array.from(e.links).filter(Po).map(s=>Nt("link",s,!1)),o=t.join(`
`)+n.join(`
`)+r.join(`
`);if(e._metadata.extraHead.length>0)for(let s of e._metadata.extraHead)o+=s;return Q(o)}function Fl(){return Yr({type:"head"})}function en(){return Yr({type:"maybe-head"})}function Oo(e){return typeof e=="object"&&e!==null&&!!e[Ml]}function se(e,...t){return new Uo(e,t)}function oh(e){return!!e[Ho]}function tn(e,t,r){return!t&&r?tn(e,r):{async render(n){await Fe(n,typeof t=="function"?t(e):t)}}}async function Ie(e,t,r){let n="",o=null,s={write(a){if(a instanceof _t)n+=a,a.instructions&&(o??=[],o.push(...a.instructions));else{if(a instanceof Response)return;typeof a=="object"&&"type"in a&&typeof a.type=="string"?(o===null&&(o=[]),o.push(a)):n+=Be(e,a)}}};return await tn(e,t,r).render(s),Q(new _t(n,o))}async function jl(e,t={}){let r=null,n={};return t&&await Promise.all(Object.entries(t).map(([o,s])=>Ie(e,s).then(i=>{i.instructions&&(r===null&&(r=[]),r.push(...i.instructions)),n[o]=i}))),{slotInstructions:r,children:n}}function $l(e){return function(){return se`${Pt(e)}`}}function Zo(e,t){if(Yo(t)){let r=t;switch(r.type){case"directive":{let{hydration:n}=r,o=n&&Uf(e),s=n&&Of(e,n.directive),i=o?"both":s?"directive":null;if(i){let a=Hf(e,i,n.directive);return Q(a)}else return""}case"head":return e._metadata.hasRenderedHead||e.partial?"":wl(e);case"maybe-head":return e._metadata.hasRenderedHead||e._metadata.headInTree||e.partial?"":wl(e);case"renderer-hydration-script":{let{rendererSpecificHydrationScripts:n}=e._metadata,{rendererName:o}=r;return n.has(o)?"":(n.add(o),r.render())}default:throw new Error(`Unknown chunk type: ${t.type}`)}}else{if(t instanceof Response)return"";if(oh(t)){let r="",n=t;if(n.instructions)for(let o of n.instructions)r+=Zo(e,o);return r+=t.toString(),r}}return t.toString()}function Be(e,t){return ArrayBuffer.isView(t)?ih.decode(t):Zo(e,t)}function Ul(e,t){if(ArrayBuffer.isView(t))return t;{let r=Zo(e,t);return Ft.encode(r.toString())}}function ah(e){return!!e&&typeof e=="object"&&"render"in e&&typeof e.render=="function"}async function Fe(e,t){if(Zr(t)&&(t=await t),t instanceof _t)e.write(t);else if(Rf(t))e.write(t);else if(Array.isArray(t)){let r=t.map(n=>_l(o=>Fe(o,n)));for(let n of r)n&&await n.renderToFinalDestination(e)}else if(typeof t=="function")await Fe(e,t());else if(typeof t=="string")e.write(Q(Lt(t)));else if(!(!t&&t!==0))if(ah(t))await t.render(e);else if(Oo(t))await t.render(e);else if(uh(t))await t.render(e);else if(ArrayBuffer.isView(t))e.write(t);else if(typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t))for await(let r of t)await Fe(e,r);else e.write(t)}function lh(e,t){if(e!=null)for(let r of Object.keys(e))r.startsWith("client:")&&console.warn(`You are attempting to render <${t} ${r} />, but ${t} is an Astro component. Astro components do not render in the client and should not have a hydration directive. Please use a framework component for client rendering.`)}function ch(e,t,r,n,o={}){lh(n,t);let s=new Ko(e,n,o,r);return Ff(e,r)&&e._metadata.propagators.add(s),s}function uh(e){return typeof e=="object"&&e!==null&&!!e[Ol]}async function Hl(e,t,r,n,o=!1,s){let i=await ts(e,t,r,n,s);if(i instanceof Response)return i;let a="",l=!1;o&&await rs(e);let u={write(c){if(o&&!l&&(l=!0,!e.partial&&!es.test(String(c)))){let p=e.compressHTML?"<!DOCTYPE html>":`<!DOCTYPE html>
`;a+=p}c instanceof Response||(a+=Be(e,c))}};return await i.render(u),a}async function ph(e,t,r,n,o=!1,s){let i=await ts(e,t,r,n,s);if(i instanceof Response)return i;let a=!1;return o&&await rs(e),new ReadableStream({start(l){let u={write(c){if(o&&!a&&(a=!0,!e.partial&&!es.test(String(c)))){let d=e.compressHTML?"<!DOCTYPE html>":`<!DOCTYPE html>
`;l.enqueue(Ft.encode(d))}if(c instanceof Response)throw new g({...Pe});let p=Ul(e,c);l.enqueue(p)}};(async()=>{try{await i.render(u),l.close()}catch(c){g.is(c)&&!c.loc&&c.setLocation({file:s?.component}),setTimeout(()=>l.error(c),0)}})()},cancel(){e.cancelled=!0}})}async function ts(e,t,r,n,o){let s=await t(e,r,n);if(s instanceof Response)return s;if(Wo(s)){if(!Oo(s.content))throw new g({...Ze,message:Ze.message(o?.route,typeof s),location:{file:o?.component}});return s.content}else if(!Oo(s))throw new g({...Ze,message:Ze.message(o?.route,typeof s),location:{file:o?.component}});return s}async function rs(e){let t=e._metadata.propagators.values();for(;;){let{value:r,done:n}=t.next();if(n)break;let o=await r.init(e);Wo(o)&&e._metadata.extraHead.push(o.head)}}async function dh(e,t,r,n,o=!1,s){let i=await ts(e,t,r,n,s);if(i instanceof Response)return i;let a=!1;o&&await rs(e);let l=null,u=null,c=[],p=!1,d={async next(){if(e.cancelled)return{done:!0,value:void 0};if(u!==null?await u.promise:!p&&!c.length&&(u=yl(),await u.promise),p||(u=yl()),l)throw l;let A=0;for(let k=0,P=c.length;k<P;k++)A+=c[k].length;let E=new Uint8Array(A),C=0;for(let k=0,P=c.length;k<P;k++){let z=c[k];E.set(z,C),C+=z.length}return c.length=0,{done:A===0&&p,value:E}},async return(){return e.cancelled=!0,{done:!0,value:void 0}}},f={write(A){if(o&&!a&&(a=!0,!e.partial&&!es.test(String(A)))){let C=e.compressHTML?"<!DOCTYPE html>":`<!DOCTYPE html>
`;c.push(Ft.encode(C))}if(A instanceof Response)throw new g(Pe);let E=Ul(e,A);E.length>0?(c.push(E),u?.resolve()):c.length>0&&u?.resolve()}};return i.render(f).then(()=>{p=!0,u?.resolve()}).catch(A=>{l=A,p=!0,u?.resolve()}),{[Symbol.asyncIterator](){return d}}}function fh(e){return typeof HTMLElement<"u"&&HTMLElement.isPrototypeOf(e)}async function hh(e,t,r,n){let o=Ah(t),s="";for(let i in r)s+=` ${i}="${_e(await r[i])}"`;return Q(`<${o}${s}>${await Ie(e,n?.default)}</${o}>`)}function Ah(e){let t=customElements.getName(e);return t||e.name.replace(/^HTML|Element$/g,"").replace(/[A-Z]/g,"-$&").toLowerCase().replace(/^-/,"html-")}async function Kl(e){let t=Gr(e);return crypto.subtle.importKey("raw",t,ns,!0,["encrypt","decrypt"])}async function yh(e,t){let r=crypto.getRandomValues(new Uint8Array(qo/2)),n=mh.encode(t),o=await crypto.subtle.encrypt({name:ns,iv:r},e,n);return Qo(r)+Ro(new Uint8Array(o))}async function ql(e,t){let r=ko(t.slice(0,qo)),n=Gr(t.slice(qo)),o=await crypto.subtle.decrypt({name:ns,iv:r},e,n);return gh.decode(o)}function Eh(e){return"server:component-directive"in e}function Vr(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/\//g,"\\u002f")}function Ch(e,t,r,n){return{async render(o){let s=r["server:component-path"],i=r["server:component-export"],a=e.serverIslandNameMap.get(s);if(!a)throw new Error("Could not find server component name");for(let h of Object.keys(r))wh.has(h)&&delete r[h];o.write("<!--[if astro]>server-island-start<![endif]-->");let l={};for(let h in n)if(h!=="fallback"){let A=await Ie(e,n[h]);l[h]=A.toString()}else await Fe(o,n.fallback(e));let u=await e.key,c=await yh(u,JSON.stringify(r)),p=crypto.randomUUID(),d=e.base.endsWith("/")?"":"/",f=`${e.base}${d}_server-islands/${a}${e.trailingSlash==="always"?"/":""}`;o.write(`<script async type="module" data-island-id="${p}">
let componentId = ${Vr(a)};
let componentExport = ${Vr(i)};
let script = document.querySelector('script[data-island-id="${p}"]');
let data = {
	componentExport,
	encryptedProps: ${Vr(c)},
	slots: ${Vr(l)},
};

let response = await fetch('${f}', {
	method: 'POST',
	body: JSON.stringify(data),
});
if (script) {
	if(response.status === 200 && response.headers.get('content-type') === 'text/html') {
	let html = await response.text();

	// Swap!
	while(script.previousSibling &&
		script.previousSibling.nodeType !== 8 &&
		script.previousSibling.data !== '[if astro]>server-island-start<![endif]') {
		script.previousSibling.remove();
	}
	script.previousSibling?.remove();

	let frag = document.createRange().createContextualFragment(html);
	script.before(frag);
}
script.remove();
}
<\/script>`)}}}function xh(e){switch(e?.split(".").pop()){case"svelte":return["@astrojs/svelte"];case"vue":return["@astrojs/vue"];case"jsx":case"tsx":return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue (jsx)"];case void 0:default:return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue","@astrojs/svelte","@astrojs/lit"]}}function Sh(e){return e===sh}function Bh(e){return e&&e["astro:html"]===!0}function Qh(e,t=!0){let r=t?bh:Ih;return e.replace(r,"")}async function kh(e,t,r,n,o={}){if(!r&&!("client:only"in n))throw new Error(`Unable to render ${t} because it is ${r}!
Did you forget to import the component or is it possible there is a typo?`);let{renderers:s,clientDirectives:i}=e,a={astroStaticSlot:!0,displayName:t},{hydration:l,isPage:u,props:c,propsWithoutTransitionAttributes:p}=Nf(n,i),d="",f;l&&(a.hydrate=l.directive,a.hydrateArgs=l.value,a.componentExport=l.componentExport,a.componentUrl=l.componentUrl);let h=xh(a.componentUrl),A=s.filter(v=>v.name!=="astro:jsx"),{children:E,slotInstructions:C}=await jl(e,o),w;if(a.hydrate!=="only"){let v=!1;try{v=r&&r[El]}catch{}if(v){let b=r[El];w=s.find(({name:F})=>F===b)}if(!w){let b;for(let F of s)try{if(await F.ssr.check.call({result:e},r,c,E)){w=F;break}}catch(An){b??=An}if(!w&&b)throw b}if(!w&&typeof HTMLElement=="function"&&fh(r)){let b=await hh(e,r,n,o);return{render(F){F.write(b)}}}}else{if(a.hydrateArgs){let v=tt.has(a.hydrateArgs)?tt.get(a.hydrateArgs):a.hydrateArgs;_o.has(v)&&(w=s.find(({name:b})=>b===`@astrojs/${v}`||b===v))}if(!w&&A.length===1&&(w=A[0]),!w){let v=a.componentUrl?.split(".").pop();w=s.find(({name:b})=>b===`@astrojs/${v}`||b===v)}}if(w)if(a.hydrate==="only"){let v=tt.has(a.hydrateArgs)?tt.get(a.hydrateArgs):a.hydrateArgs;_o.has(v)||console.warn(`The client:only directive for ${a.displayName} is not recognized. The renderer ${w.name} will be used. If you intended to use a different renderer, please provide a valid client:only directive.`),d=await Ie(e,o?.fallback)}else performance.now(),{html:d,attrs:f}=await w.ssr.renderToStaticMarkup.call({result:e},r,p,E,a);else if(a.hydrate==="only"){let v=tt.has(a.hydrateArgs)?tt.get(a.hydrateArgs):a.hydrateArgs;if(_o.has(v)){let b=A.length>1;throw new g({...ve,message:ve.message(a.displayName,a?.componentUrl?.split(".").pop(),b,A.length),hint:ve.hint(Lo(h.map(F=>"`"+F+"`")))})}else throw new g({...Qt,message:Qt.message(a.displayName),hint:Qt.hint(h.map(b=>b.replace("@astrojs/","")).join("|"))})}else if(typeof r!="string"){let v=A.filter(F=>h.includes(F.name)),b=A.length>1;if(v.length===0)throw new g({...ve,message:ve.message(a.displayName,a?.componentUrl?.split(".").pop(),b,A.length),hint:ve.hint(Lo(h.map(F=>"`"+F+"`")))});if(v.length===1)w=v[0],{html:d,attrs:f}=await w.ssr.renderToStaticMarkup.call({result:e},r,p,E,a);else throw new Error(`Unable to render ${a.displayName}!

This component likely uses ${Lo(h)},
but Astro encountered an error during server-side rendering.

Please ensure that ${a.displayName}:
1. Does not unconditionally access browser-specific globals like \`window\` or \`document\`.
   If this is unavoidable, use the \`client:only\` hydration directive.
2. Does not conditionally return \`null\` or \`undefined\` when rendered on the server.

If you're still stuck, please open an issue on GitHub or join us at https://astro.build/chat.`)}if(w&&!w.clientEntrypoint&&w.name!=="@astrojs/lit"&&a.hydrate)throw new g({...Ir,message:Ir.message(t,a.hydrate,w.name)});if(!d&&typeof r=="string"){let v=Rh(r),b=Object.values(E).join(""),F=se`<${v}${jo(c)}${Q(b===""&&Xo.test(v)?"/>":`>${b}</${v}>`)}`;d="";let An={write(bs){bs instanceof Response||(d+=Be(e,bs))}};await F.render(An)}if(!l)return{render(v){if(C)for(let b of C)v.write(b);u||w?.name==="astro:jsx"?v.write(d):d&&d.length>0&&v.write(Q(Qh(d,w?.ssr?.supportsAstroStaticSlot)))}};let k=_f(`<!--${a.componentExport.value}:${a.componentUrl}-->
${d}
${Nl(c,a)}`),P=await Lf({renderer:w,result:e,astroId:k,props:c,attrs:f},a),z=[];if(d){if(Object.keys(E).length>0)for(let v of Object.keys(E)){let b=w?.ssr?.supportsAstroStaticSlot?a.hydrate?"astro-slot":"astro-static-slot":"astro-slot",F=v==="default"?`<${b}>`:`<${b} name="${v}">`;d.includes(F)||z.push(v)}}else z=Object.keys(E);let Ke=z.length>0?z.map(v=>`<template data-astro-template${v!=="default"?`="${v}"`:""}>${E[v]}</template>`).join(""):"";return P.children=`${d??""}${Ke}`,P.children&&(P.props["await-children"]="",P.children+="<!--astro:end-->"),{render(v){if(C)for(let F of C)v.write(F);v.write(Yr({type:"directive",hydration:l})),l.directive!=="only"&&w?.ssr.renderHydrationScript&&v.write(Yr({type:"renderer-hydration-script",rendererName:w.name,render:w.ssr.renderHydrationScript}));let b=Nt("astro-island",P,!1);v.write(Q(b))}}}function Rh(e){let t=/[&<>'"\s]+/;return t.test(e)?e.trim().split(t)[0].trim():e}async function Dh(e,t={}){let r=await Ie(e,t?.default);return{render(n){r!=null&&n.write(r)}}}async function Th(e,t,r,n={}){let{slotInstructions:o,children:s}=await jl(e,n),i=t({slots:s}),a=o?o.map(l=>Be(e,l)).join(""):"";return{render(l){l.write(Q(a+i))}}}function Nh(e,t,r,n,o={}){if(Eh(n))return Ch(e,t,n,o);let s=ch(e,t,r,n,o);return{async render(i){await s.render(i)}}}async function st(e,t,r,n,o={}){if(Zr(r)&&(r=await r.catch(s)),Sh(r))return await Dh(e,o).catch(s);if(n=Lh(n),Bh(r))return await Th(e,r,n,o).catch(s);if(Pl(r))return Nh(e,t,r,n,o);return await kh(e,t,r,n,o).catch(s);function s(i){if(e.cancelled)return{render(){}};throw i}}function Lh(e){if(e["class:list"]!==void 0){let t=e["class:list"];delete e["class:list"],e.class=Io(e.class,t),e.class===""&&delete e.class}return e}async function Jo(e,t,r,n,o={},s=!1,i){let a="",l=!1,u="";s&&!e.partial&&Ph(r)&&(u+=Be(e,en()));try{let c={write(d){if(s&&!e.partial&&!l&&(l=!0,!/<!doctype html/i.test(String(d)))){let f=e.compressHTML?"<!DOCTYPE html>":`<!DOCTYPE html>
`;a+=f+u}d instanceof Response||(a+=Be(e,d))}};await(await st(e,t,r,n,o)).render(c)}catch(c){throw g.is(c)&&!c.loc&&c.setLocation({file:i?.component}),c}return a}function Ph(e){return!!e?.[vh]}async function Se(e,t){switch(!0){case t instanceof Me:return t.toString().trim()===""?"":t;case typeof t=="string":return Q(Lt(t));case typeof t=="function":return t;case(!t&&t!==0):return"";case Array.isArray(t):return Q((await Promise.all(t.map(r=>Se(e,r)))).join(""))}return Jl(e,t)}async function Jl(e,t){if(Al(t)){switch(!0){case!t.type:throw new Error(`Unable to render ${e.pathname} because it contains an undefined Component!
Did you forget to import the component or is it possible there is a typo?`);case t.type===Symbol.for("astro:fragment"):return Se(e,t.props.children);case t.type.isAstroComponentFactory:{let r={},n={};for(let[i,a]of Object.entries(t.props??{}))i==="children"||a&&typeof a=="object"&&a.$$slot?n[i==="children"?"default":i]=()=>Se(e,a):r[i]=a;let o=await Hl(e,t.type,r,n);if(o instanceof Response)throw o;return Q(o)}case(!t.type&&t.type!==0):return"";case(typeof t.type=="string"&&t.type!==Cl):return Q(await _h(e,t.type,t.props??{}))}if(t.type){let r=function(u){if(Array.isArray(u))return u.map(c=>r(c));if(!Al(u)){s.default.push(u);return}if("slot"in u.props){s[u.props.slot]=[...s[u.props.slot]??[],u],delete u.props.slot;return}s.default.push(u)};if(typeof t.type=="function"&&t.props["server:root"]){let u=await t.type(t.props??{});return await Se(e,u)}if(typeof t.type=="function")if(t.props[Fo]){delete t.props[Fo];let u=await t.type(t.props??{});return u?.[kl]||!u?await Jl(e,u):void 0}else t.props[Fo]=!0;let{children:n=null,...o}=t.props??{},s={default:[]};r(n);for(let[u,c]of Object.entries(o))c?.$$slot&&(s[u]=c,delete o[u]);let i=[],a={};for(let[u,c]of Object.entries(s))i.push(Se(e,c).then(p=>{p.toString().trim().length!==0&&(a[u]=()=>p)}));await Promise.all(i);let l;return t.type===Cl&&t.props["client:only"]?l=await Jo(e,t.props["client:display-name"]??"",null,o,a):l=await Jo(e,typeof t.type=="function"?t.type.name:t.type,t.type,o,a),Q(l)}}return Q(`${t}`)}async function _h(e,t,{children:r,...n}){return Q(`<${t}${be(n)}${Q((r==null||r=="")&&Xo.test(t)?"/>":`>${r==null?"":await Se(e,Fh(t,r))}</${t}>`)}`)}function Fh(e,t){return typeof t=="string"&&(e==="style"||e==="script")?Q(t):t}async function Gl(e,t,r,n,o,s){if(!Pl(t)){e._metadata.headInTree=e.componentMetadata.get(t.moduleId)?.containsHead??!1;let c={...r??{},"server:root":!0},p=await Jo(e,t.name,t,c,{},!0,s),d=Ft.encode(p);return new Response(d,{headers:new Headers([["Content-Type","text/html; charset=utf-8"],["Content-Length",d.byteLength.toString()]])})}e._metadata.headInTree=e.componentMetadata.get(t.moduleId)?.containsHead??!1;let i;if(o?eh&&!th?i=await dh(e,t,r,n,!0,s):i=await ph(e,t,r,n,!0,s):i=await Hl(e,t,r,n,!0,s),i instanceof Response)return i;let a=e.response,l=new Headers(a.headers);!o&&typeof i=="string"&&(i=Ft.encode(i),l.set("Content-Length",i.byteLength.toString())),s?.component.endsWith(".md")&&l.set("Content-Type","text/html; charset=utf-8");let u=a.status;return s?.route==="/404"?u=404:s?.route==="/500"&&(u=500),u?new Response(i,{...a,headers:l,status:u}):new Response(i,{...a,headers:l})}function be(e={},t,{class:r}={}){let n="";r&&(typeof e.class<"u"?e.class+=` ${r}`:typeof e["class:list"]<"u"?e["class:list"]=[e["class:list"],r]:e.class=r);for(let[o,s]of Object.entries(e))n+=je(s,o,!0);return Q(n)}var f0,Go,ie,vl,xl,Sl,rt,nt,Vo,Wr,zo,Bl,Xr,Lt,zr,Me,Q,kl,Rl,V,Ll,Mo,No,Mf,jf,$f,Xo,Kf,qf,Jf,Gf,Vf,zf,Yf,_e,Wf,gl,Zf,$o,eh,th,rh,Po,Ml,Uo,Ho,_t,sh,El,Ft,ih,Ol,Ko,es,ns,mh,gh,qo,wh,vh,tt,_o,Ih,bh,Cl,Fo,it=j(()=>{It();Dt();et();bo();pl();f0=Qe(fl(),1),Go="4.16.17",ie="X-Astro-Reroute",vl="X-Astro-Rewrite",xl="yes",Sl="X-Astro-Noop",rt="X-Astro-Route-Type",nt="astro-default-404.astro",Vo=[404,500],Wr=Symbol.for("astro.clientAddress"),zo=Symbol.for("astro.locals"),Bl=Symbol.for("astro.originPathname"),Xr=Symbol.for("astro.responseSent");Lt=Kr,zr=class extends Uint8Array{};Object.defineProperty(zr.prototype,Symbol.toStringTag,{get(){return"HTMLBytes"}});Me=class extends String{get[Symbol.toStringTag](){return"HTMLString"}},Q=e=>e instanceof Me?e:typeof e=="string"?new Me(e):e;kl="astro:jsx";Rl=Symbol.for("astro:render");V={Value:0,JSON:1,RegExp:2,Date:3,Map:4,Set:5,BigInt:6,URL:7,Uint8Array:8,Uint16Array:9,Uint32Array:10,Infinity:11};Ll=Object.freeze(["data-astro-transition-scope","data-astro-transition-persist","data-astro-transition-persist-props"]);Mo="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXY",No=Mo.length;Mf=Symbol.for("astro.headAndContent");jf='(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();',$f="<style>astro-island,astro-slot,astro-static-slot{display:contents}</style>";Xo=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Kf=/^(?:allowfullscreen|async|autofocus|autoplay|checked|controls|default|defer|disabled|disablepictureinpicture|disableremoteplayback|formnovalidate|hidden|loop|nomodule|novalidate|open|playsinline|readonly|required|reversed|scoped|seamless|selected|itemscope)$/i,qf=/^(?:contenteditable|draggable|spellcheck|value)$/i,Jf=/^(?:autoReverse|externalResourcesRequired|focusable|preserveAlpha)$/i,Gf=/&/g,Vf=/"/g,zf=new Set(["set:html","set:text"]),Yf=e=>e.trim().replace(/(?!^)\b\w|\s+|\W+/g,(t,r)=>/\W/.test(t)?"":r===0?t:t.toUpperCase()),_e=(e,t=!0)=>t?String(e).replace(Gf,"&#38;").replace(Vf,"&#34;"):e,Wf=e=>e.toLowerCase()===e?e:e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`),gl=e=>Object.entries(e).filter(([t,r])=>typeof r=="string"&&r.trim()||typeof r=="number").map(([t,r])=>t[0]!=="-"&&t[1]!=="-"?`${Wf(t)}:${r}`:`${t}:${r}`).join(";");Zf=()=>{},$o=class{chunks=[];renderPromise;destination;constructor(t){this.renderPromise=t(this),Promise.resolve(this.renderPromise).catch(Zf)}write(t){this.destination?this.destination.write(t):this.chunks.push(t)}async renderToFinalDestination(t){for(let r of this.chunks)t.write(r);this.destination=t,await this.renderPromise}};eh=typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]",th=typeof Deno<"u";rh=["http:","https:"];Po=(e,t,r)=>{let n=JSON.stringify(e.props),o=e.children;return t===r.findIndex(s=>JSON.stringify(s.props)===n&&s.children==o)};Ml=Symbol.for("astro.renderTemplateResult"),Uo=class{[Ml]=!0;htmlParts;expressions;error;constructor(t,r){this.htmlParts=t,this.error=void 0,this.expressions=r.map(n=>Zr(n)?Promise.resolve(n).catch(o=>{if(!this.error)throw this.error=o,o}):n)}async render(t){let r=this.expressions.map(n=>_l(o=>{if(n||n===0)return Fe(o,n)}));for(let n=0;n<this.htmlParts.length;n++){let o=this.htmlParts[n],s=r[n];t.write(Q(o)),s&&await s.renderToFinalDestination(t)}}};Ho=Symbol.for("astro:slot-string"),_t=class extends Me{instructions;[Ho];constructor(t,r){super(t),this.instructions=r,this[Ho]=!0}};sh=Symbol.for("astro:fragment"),El=Symbol.for("astro:renderer"),Ft=new TextEncoder,ih=new TextDecoder;Ol=Symbol.for("astro.componentInstance"),Ko=class{[Ol]=!0;result;props;slotValues;factory;returnValue;constructor(t,r,n,o){this.result=t,this.props=r,this.factory=o,this.slotValues={};for(let s in n){let i=!1,a=n[s](t);this.slotValues[s]=()=>i?n[s](t):(i=!0,a)}}async init(t){return this.returnValue!==void 0?this.returnValue:(this.returnValue=this.factory(t,this.props,this.slotValues),Zr(this.returnValue)&&this.returnValue.then(r=>{this.returnValue=r}).catch(()=>{}),this.returnValue)}async render(t){let r=await this.init(this.result);Wo(r)?await r.content.render(t):await Fe(t,r)}};es=/<!doctype html/i;ns="AES-GCM";mh=new TextEncoder,gh=new TextDecoder,qo=24;wh=new Set(["server:component-path","server:component-export","server:component-directive","server:defer"]);vh=Symbol.for("astro.needsHeadRendering"),tt=new Map([["solid","solid-js"]]),_o=new Set(["solid-js","react","preact","vue","svelte","lit"]);Ih=/<\/?astro-slot\b[^>]*>/g,bh=/<\/?astro-static-slot\b[^>]*>/g;Cl="astro-client-only",Fo=Symbol("hasTriedRenderComponent");"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_".split("").reduce((e,t)=>(e[t.charCodeAt(0)]=t,e),[]);"-0123456789_".split("").reduce((e,t)=>(e[t.charCodeAt(0)]=t,e),[])});var ss=pe(os=>{"use strict";os.parse=Hh;os.serialize=Kh;var Mh=Object.prototype.toString,jh=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,$h=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,Uh=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Oh=/^[\u0020-\u003A\u003D-\u007E]*$/;function Hh(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");var r={},n=e.length;if(n<2)return r;var o=t&&t.decode||qh,s=0,i=0,a=0;do{if(i=e.indexOf("=",s),i===-1)break;if(a=e.indexOf(";",s),a===-1)a=n;else if(i>a){s=e.lastIndexOf(";",i-1)+1;continue}var l=Vl(e,s,i),u=zl(e,i,l),c=e.slice(l,u);if(!r.hasOwnProperty(c)){var p=Vl(e,i+1,a),d=zl(e,a,p);e.charCodeAt(p)===34&&e.charCodeAt(d-1)===34&&(p++,d--);var f=e.slice(p,d);r[c]=Gh(f,o)}s=a+1}while(s<n);return r}function Vl(e,t,r){do{var n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function zl(e,t,r){for(;t>r;){var n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function Kh(e,t,r){var n=r&&r.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!jh.test(e))throw new TypeError("argument name is invalid");var o=n(t);if(!$h.test(o))throw new TypeError("argument val is invalid");var s=e+"="+o;if(!r)return s;if(r.maxAge!=null){var i=Math.floor(r.maxAge);if(!isFinite(i))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+i}if(r.domain){if(!Uh.test(r.domain))throw new TypeError("option domain is invalid");s+="; Domain="+r.domain}if(r.path){if(!Oh.test(r.path))throw new TypeError("option path is invalid");s+="; Path="+r.path}if(r.expires){var a=r.expires;if(!Jh(a)||isNaN(a.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+a.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.partitioned&&(s+="; Partitioned"),r.priority){var l=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(l){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var u=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(u){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function qh(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function Jh(e){return Mh.call(e)==="[object Date]"}function Gh(e,t){try{return t(e)}catch{return e}}});function xs(e){let t=(""+e).trim().toLowerCase(),r=t.lastIndexOf(".");return um[~r?t.substring(++r):t]}var um,Ic=j(()=>{um={"3g2":"video/3gpp2","3gp":"video/3gpp","3gpp":"video/3gpp","3mf":"model/3mf",aac:"audio/aac",ac:"application/pkix-attr-cert",adp:"audio/adpcm",adts:"audio/aac",ai:"application/postscript",aml:"application/automationml-aml+xml",amlx:"application/automationml-amlx+zip",amr:"audio/amr",apng:"image/apng",appcache:"text/cache-manifest",appinstaller:"application/appinstaller",appx:"application/appx",appxbundle:"application/appxbundle",asc:"application/pgp-keys",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",au:"audio/basic",avci:"image/avci",avcs:"image/avcs",avif:"image/avif",aw:"application/applixware",bdoc:"application/bdoc",bin:"application/octet-stream",bmp:"image/bmp",bpk:"application/octet-stream",btf:"image/prs.btif",btif:"image/prs.btif",buffer:"application/octet-stream",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cer:"application/pkix-cert",cgm:"image/cgm",cjs:"application/node",class:"application/java-vm",coffee:"text/coffeescript",conf:"text/plain",cpl:"application/cpl+xml",cpt:"application/mac-compactpro",crl:"application/pkix-crl",css:"text/css",csv:"text/csv",cu:"application/cu-seeme",cwl:"application/cwl",cww:"application/prs.cww",davmount:"application/davmount+xml",dbk:"application/docbook+xml",deb:"application/octet-stream",def:"text/plain",deploy:"application/octet-stream",dib:"image/bmp","disposition-notification":"message/disposition-notification",dist:"application/octet-stream",distz:"application/octet-stream",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",dot:"application/msword",dpx:"image/dpx",drle:"image/dicom-rle",dsc:"text/prs.lines.tag",dssc:"application/dssc+der",dtd:"application/xml-dtd",dump:"application/octet-stream",dwd:"application/atsc-dwd+xml",ear:"application/java-archive",ecma:"application/ecmascript",elc:"application/octet-stream",emf:"image/emf",eml:"message/rfc822",emma:"application/emma+xml",emotionml:"application/emotionml+xml",eps:"application/postscript",epub:"application/epub+zip",exe:"application/octet-stream",exi:"application/exi",exp:"application/express",exr:"image/aces",ez:"application/andrew-inset",fdf:"application/fdf",fdt:"application/fdt+xml",fits:"image/fits",g3:"image/g3fax",gbr:"application/rpki-ghostbusters",geojson:"application/geo+json",gif:"image/gif",glb:"model/gltf-binary",gltf:"model/gltf+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gram:"application/srgs",grxml:"application/srgs+xml",gxf:"application/gxf",gz:"application/gzip",h261:"video/h261",h263:"video/h263",h264:"video/h264",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",held:"application/atsc-held+xml",hjson:"application/hjson",hlp:"application/winhlp",hqx:"application/mac-binhex40",hsj2:"image/hsj2",htm:"text/html",html:"text/html",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",img:"application/octet-stream",in:"text/plain",ini:"text/plain",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",iso:"application/octet-stream",its:"application/its+xml",jade:"text/jade",jar:"application/java-archive",jhc:"image/jphc",jls:"image/jls",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpf:"image/jpx",jpg:"image/jpeg",jpg2:"image/jp2",jpgm:"image/jpm",jpgv:"video/jpeg",jph:"image/jph",jpm:"image/jpm",jpx:"image/jpx",js:"text/javascript",json:"application/json",json5:"application/json5",jsonld:"application/ld+json",jsonml:"application/jsonml+json",jsx:"text/jsx",jt:"model/jt",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",kar:"audio/midi",ktx:"image/ktx",ktx2:"image/ktx2",less:"text/less",lgr:"application/lgr+xml",list:"text/plain",litcoffee:"text/coffeescript",log:"text/plain",lostxml:"application/lost+xml",lrf:"application/octet-stream",m1v:"video/mpeg",m21:"application/mp21",m2a:"audio/mpeg",m2v:"video/mpeg",m3a:"audio/mpeg",m4a:"audio/mp4",m4p:"application/mp4",m4s:"video/iso.segment",ma:"application/mathematica",mads:"application/mads+xml",maei:"application/mmt-aei+xml",man:"text/troff",manifest:"text/cache-manifest",map:"application/json",mar:"application/octet-stream",markdown:"text/markdown",mathml:"application/mathml+xml",mb:"application/mathematica",mbox:"application/mbox",md:"text/markdown",mdx:"text/mdx",me:"text/troff",mesh:"model/mesh",meta4:"application/metalink4+xml",metalink:"application/metalink+xml",mets:"application/mets+xml",mft:"application/rpki-manifest",mid:"audio/midi",midi:"audio/midi",mime:"message/rfc822",mj2:"video/mj2",mjp2:"video/mj2",mjs:"text/javascript",mml:"text/mathml",mods:"application/mods+xml",mov:"video/quicktime",mp2:"audio/mpeg",mp21:"application/mp21",mp2a:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mp4a:"audio/mp4",mp4s:"application/mp4",mp4v:"video/mp4",mpd:"application/dash+xml",mpe:"video/mpeg",mpeg:"video/mpeg",mpf:"application/media-policy-dataset+xml",mpg:"video/mpeg",mpg4:"video/mp4",mpga:"audio/mpeg",mpp:"application/dash-patch+xml",mrc:"application/marc",mrcx:"application/marcxml+xml",ms:"text/troff",mscml:"application/mediaservercontrol+xml",msh:"model/mesh",msi:"application/octet-stream",msix:"application/msix",msixbundle:"application/msixbundle",msm:"application/octet-stream",msp:"application/octet-stream",mtl:"model/mtl",musd:"application/mmt-usd+xml",mxf:"application/mxf",mxmf:"audio/mobile-xmf",mxml:"application/xv+xml",n3:"text/n3",nb:"application/mathematica",nq:"application/n-quads",nt:"application/n-triples",obj:"model/obj",oda:"application/oda",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",omdoc:"application/omdoc+xml",onepkg:"application/onenote",onetmp:"application/onenote",onetoc:"application/onenote",onetoc2:"application/onenote",opf:"application/oebps-package+xml",opus:"audio/ogg",otf:"font/otf",owl:"application/rdf+xml",oxps:"application/oxps",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",pdf:"application/pdf",pfr:"application/font-tdpfr",pgp:"application/pgp-encrypted",pkg:"application/octet-stream",pki:"application/pkixcmp",pkipath:"application/pkix-pkipath",pls:"application/pls+xml",png:"image/png",prc:"model/prc",prf:"application/pics-rules",provx:"application/provenance+xml",ps:"application/postscript",pskcxml:"application/pskc+xml",pti:"image/prs.pti",qt:"video/quicktime",raml:"application/raml+yaml",rapd:"application/route-apd+xml",rdf:"application/rdf+xml",relo:"application/p2p-overlay+xml",rif:"application/reginfo+xml",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rmi:"audio/midi",rnc:"application/relax-ng-compact-syntax",rng:"application/xml",roa:"application/rpki-roa",roff:"text/troff",rq:"application/sparql-query",rs:"application/rls-services+xml",rsat:"application/atsc-rsat+xml",rsd:"application/rsd+xml",rsheet:"application/urc-ressheet+xml",rss:"application/rss+xml",rtf:"text/rtf",rtx:"text/richtext",rusd:"application/route-usd+xml",s3m:"audio/s3m",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",ser:"application/java-serialized-object",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",sgi:"image/sgi",sgm:"text/sgml",sgml:"text/sgml",shex:"text/shex",shf:"application/shf+xml",shtml:"text/html",sieve:"application/sieve",sig:"application/pgp-signature",sil:"audio/silk",silo:"model/mesh",siv:"application/sieve",slim:"text/slim",slm:"text/slim",sls:"application/route-s-tsid+xml",smi:"application/smil+xml",smil:"application/smil+xml",snd:"audio/basic",so:"application/octet-stream",spdx:"text/spdx",spp:"application/scvp-vp-response",spq:"application/scvp-vp-request",spx:"audio/ogg",sql:"application/sql",sru:"application/sru+xml",srx:"application/sparql-results+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",stk:"application/hyperstudio",stl:"model/stl",stpx:"model/step+xml",stpxz:"model/step-xml+zip",stpz:"model/step+zip",styl:"text/stylus",stylus:"text/stylus",svg:"image/svg+xml",svgz:"image/svg+xml",swidtag:"application/swid+xml",t:"text/troff",t38:"image/t38",td:"application/urc-targetdesc+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",text:"text/plain",tfi:"application/thraud+xml",tfx:"image/tiff-fx",tif:"image/tiff",tiff:"image/tiff",toml:"application/toml",tr:"text/troff",trig:"application/trig",ts:"video/mp2t",tsd:"application/timestamped-data",tsv:"text/tab-separated-values",ttc:"font/collection",ttf:"font/ttf",ttl:"text/turtle",ttml:"application/ttml+xml",txt:"text/plain",u3d:"model/u3d",u8dsn:"message/global-delivery-status",u8hdr:"message/global-headers",u8mdn:"message/global-disposition-notification",u8msg:"message/global",ubj:"application/ubjson",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vrml:"model/vrml",vtt:"text/vtt",vxml:"application/voicexml+xml",war:"application/java-archive",wasm:"application/wasm",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webmanifest:"application/manifest+json",webp:"image/webp",wgsl:"text/wgsl",wgt:"application/widget",wif:"application/watcherinfo+xml",wmf:"image/wmf",woff:"font/woff",woff2:"font/woff2",wrl:"model/vrml",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",x3d:"model/x3d+xml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3dz:"model/x3d+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xcs:"application/calendar+xml",xdf:"application/xcap-diff+xml",xdssc:"application/dssc+xml",xel:"application/xcap-el+xml",xenc:"application/xenc+xml",xer:"application/patch-ops-error+xml",xfdf:"application/xfdf",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xhvml:"application/xv+xml",xlf:"application/xliff+xml",xm:"audio/xm",xml:"text/xml",xns:"application/xcap-ns+xml",xop:"application/xop+xml",xpl:"application/xproc+xml",xsd:"application/xml",xsf:"application/prs.xsf+xml",xsl:"application/xml",xslt:"application/xml",xspf:"application/xspf+xml",xvm:"application/xv+xml",xvml:"application/xv+xml",yaml:"text/yaml",yang:"application/yang",yin:"application/yin+xml",yml:"text/yaml",zip:"application/zip"}});var Oc={};ut(Oc,{page:()=>Lg,renderers:()=>Ye});function dm(e){return e.fsPath&&!("fsPath"in e)}function ae(e,t,r,n){r=r||0;let o=n?"BE":"LE",s="readUInt"+t+o;return Am[s](e,r)}function mm(e,t){if(e.length-t<4)return;let r=_(e,t);if(!(e.length-t<r))return{name:L(e,4+t,8+t),offset:t,size:r}}function Ue(e,t,r){for(;r<e.length;){let n=mm(e,r);if(!n)break;if(n.name===t)return n;r+=n.size}}function kc(e,t){let r=e[t];return r===0?256:r}function Rc(e,t){let r=wm+t*Em;return{height:kc(e,r+1),width:kc(e,r)}}function Im(e,t,r){let n={};for(let o=t;o<=r;o+=4){let s=L(e,o,o+4);s in Mc&&(n[s]=1)}if("avif"in n)return"avif";if("heic"in n||"heix"in n||"hevc"in n||"hevx"in n)return"heic";if("mif1"in n||"msf1"in n)return"heif"}function Dc(e,t){let r=t+Rm;return[L(e,t,r),_(e,r)]}function Tc(e){let t=Dm[e];return{width:t,height:t,type:e}}function Um(e){return ct(e,2,6)===Pm}function Om(e,t){return{height:pn(e,t),width:pn(e,t+2)}}function Hm(e,t){let n=Bs+8,o=ae(e,16,n,t);for(let s=0;s<o;s++){let i=n+$m+s*Nc,a=i+Nc;if(i>e.length)return;let l=e.slice(i,a);if(ae(l,16,0,t)===274)return ae(l,16,2,t)!==3||ae(l,32,4,t)!==1?void 0:ae(l,16,8,t)}}function Km(e,t){let r=e.slice(_m,t),n=ct(r,Bs,Bs+Fm),o=n===Mm;if(o||n===jm)return Hm(r,o)}function qm(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}function dn(e){let t=Zm.exec(e);if(t)return Math.round(Number(t[1])*($c[t[2]]||1))}function eg(e){let t=e.split(" ");return{height:dn(t[3]),width:dn(t[2])}}function tg(e){let t=cn.width.exec(e),r=cn.height.exec(e),n=cn.viewbox.exec(e);return{height:r&&dn(r[2]),viewbox:n&&eg(n[2]),width:t&&dn(t[2])}}function rg(e){return{height:e.height,width:e.width}}function ng(e,t){let r=t.width/t.height;return e.width?{height:Math.floor(e.width/r),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*r)}:{height:t.height,width:t.width}}function ig(e,t){let r=ae(e,32,4,t);return e.slice(r+2)}function ag(e,t){let r=ae(e,16,8,t);return(ae(e,16,10,t)<<16)+r}function lg(e){if(e.length>24)return e.slice(12)}function cg(e,t){let r={},n=e;for(;n&&n.length;){let o=ae(n,16,0,t),s=ae(n,16,2,t),i=ae(n,32,4,t);if(o===0)break;i===1&&(s===3||s===4)&&(r[o]=ag(n,t)),n=lg(n)}return r}function ug(e){let t=L(e,0,2);if(t==="II")return"LE";if(t==="MM")return"BE"}function fg(e){return{height:1+Qc(e,7),width:1+Qc(e,4)}}function hg(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function Ag(e){return{height:bc(e,8)&16383,width:bc(e,6)&16383}}function wg(e){let t=e[0],r=yg.get(t);return r&&fn.get(r).validate(e)?r:gg.find(n=>fn.get(n).validate(e))}function Cg(e){let t=wg(e);if(typeof t<"u"){if(Eg.disabledTypes.includes(t))throw new TypeError("disabled file type: "+t);let r=fn.get(t).calculate(e);if(r!==void 0)return r.type=r.type??t,r}throw new TypeError("unsupported file type: "+t)}async function vg(e,t){try{let r=Cg(e);if(!r.height||!r.width||!r.type)throw new g({...xe,message:xe.message(t)});let{width:n,height:o,type:s,orientation:i}=r,a=(i||0)>=5;return{width:a?o:n,height:a?n:o,format:s,orientation:i}}catch{throw new g({...xe,message:xe.message(t)})}}async function xg(e){let t=await fetch(e);if(!t.body||!t.ok)throw new g({...Pr,message:Pr.message(e)});let r=t.body.getReader(),n,o,s=new Uint8Array;for(;!n;){let i=await r.read();if(n=i.done,n)break;if(i.value){o=i.value;let a=new Uint8Array(s.length+o.length);a.set(s,0),a.set(o,s.length),s=a;try{let l=await vg(s,e);if(l)return await r.cancel(),l}catch{}}}throw new g({...xe,message:xe.message(e)})}async function Uc(){if(!globalThis?.astroAsset?.imageService){let{default:e}=await Promise.resolve().then(()=>(Dt(),nl)).then(t=>t.K).catch(t=>{let r=new g(yo);throw r.cause=t,r});return globalThis.astroAsset||(globalThis.astroAsset={}),globalThis.astroAsset.imageService=e,e}return globalThis.astroAsset.imageService}async function Sg(e,t){if(!e||typeof e!="object")throw new g({..._r,message:_r.message(JSON.stringify(e))});if(typeof e.src>"u")throw new g({...Xe,message:Xe.message(e.src,"undefined",JSON.stringify(e))});if(dm(e))throw new g(wo);let r=await Uc(),n={...e,src:await Or(e.src)};if(e.inferSize&&Ur(n.src)&&We(n.src)){let c=await xg(n.src);n.width??=c.width,n.height??=c.height,delete n.inferSize}let o=me(n.src)?n.src.fsPath:void 0,s=me(n.src)?n.src.clone??n.src:n.src;n.src=s;let i=r.validateOptions?await r.validateOptions(n,t):n,a=r.getSrcSet?await r.getSrcSet(i,t):[],l=await r.getURL(i,t),u=await Promise.all(a.map(async c=>({transform:c.transform,url:await r.getURL(c.transform,t),descriptor:c.descriptor,attributes:c.attributes})));if(Bo(r)&&globalThis.astroAsset.addStaticImage&&!(Ur(i.src)&&l===i.src)){let c=r.propertiesToHash??$r;l=globalThis.astroAsset.addStaticImage(i,c,o),u=a.map(p=>({transform:p.transform,url:globalThis.astroAsset.addStaticImage(p.transform,c,o),descriptor:p.descriptor,attributes:p.attributes}))}return{rawOptions:n,options:i,src:l,srcSet:{values:u,attribute:u.map(c=>`${c.url} ${c.descriptor}`).join(", ")},attributes:r.getHTMLAttributes!==void 0?await r.getHTMLAttributes(i,t):{}}}async function Dg(e,t){try{let r=await fetch(e,{headers:t});return r.ok?await r.arrayBuffer():void 0}catch{return}}var fm,L,ct,bc,pn,X,Qc,hm,_,Oe,Am,gm,ym,wm,Em,Fc,Cm,vm,xm,Sm,Bm,Mc,bm,Qm,km,Rm,Dm,Tm,Nm,Lm,Pm,_m,Bs,Fm,Mm,jm,Nc,$m,Jm,Gm,Vm,zm,Lc,Ym,Pc,_c,Wm,Xm,jc,cn,Ss,$c,Zm,og,sg,pg,dg,mg,fn,gg,yg,Eg,Bg,Ig,bg,Qg,un,Is,kg,Rg,Tg,Ng,Lg,Hc=j(()=>{Bt();Dt();it();et();Ic();vr();fm=new TextDecoder,L=(e,t=0,r=e.length)=>fm.decode(e.slice(t,r)),ct=(e,t=0,r=e.length)=>e.slice(t,r).reduce((n,o)=>n+("0"+o.toString(16)).slice(-2),""),bc=(e,t=0)=>{let r=e[t]+e[t+1]*256;return r|(r&2**15)*131070},pn=(e,t=0)=>e[t]*2**8+e[t+1],X=(e,t=0)=>e[t]+e[t+1]*2**8,Qc=(e,t=0)=>e[t]+e[t+1]*2**8+e[t+2]*2**16,hm=(e,t=0)=>e[t]+e[t+1]*2**8+e[t+2]*2**16+(e[t+3]<<24),_=(e,t=0)=>e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3],Oe=(e,t=0)=>e[t]+e[t+1]*2**8+e[t+2]*2**16+e[t+3]*2**24,Am={readUInt16BE:pn,readUInt16LE:X,readUInt32BE:_,readUInt32LE:Oe};gm={validate:e=>L(e,0,2)==="BM",calculate:e=>({height:Math.abs(hm(e,22)),width:Oe(e,18)})},ym=1,wm=6,Em=16;Fc={validate(e){let t=X(e,0),r=X(e,4);return t!==0||r===0?!1:X(e,2)===ym},calculate(e){let t=X(e,4),r=Rc(e,0);if(t===1)return r;let n=[r];for(let o=1;o<t;o+=1)n.push(Rc(e,o));return{height:r.height,images:n,width:r.width}}},Cm=2,vm={validate(e){let t=X(e,0),r=X(e,4);return t!==0||r===0?!1:X(e,2)===Cm},calculate:e=>Fc.calculate(e)},xm={validate:e=>Oe(e,0)===542327876,calculate:e=>({height:Oe(e,12),width:Oe(e,16)})},Sm=/^GIF8[79]a/,Bm={validate:e=>Sm.test(L(e,0,6)),calculate:e=>({height:X(e,8),width:X(e,6)})},Mc={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"};bm={validate(e){let t=L(e,4,8),r=L(e,8,12);return t==="ftyp"&&r in Mc},calculate(e){let t=Ue(e,"meta",0),r=t&&Ue(e,"iprp",t.offset+12),n=r&&Ue(e,"ipco",r.offset+8),o=n&&Ue(e,"ispe",n.offset+8);if(o)return{height:_(e,o.offset+16),width:_(e,o.offset+12),type:Im(e,8,t.offset)};throw new TypeError("Invalid HEIF, no size found")}},Qm=8,km=4,Rm=4,Dm={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};Tm={validate:e=>L(e,0,4)==="icns",calculate(e){let t=e.length,r=_(e,km),n=Qm,o=Dc(e,n),s=Tc(o[0]);if(n+=o[1],n===r)return s;let i={height:s.height,images:[s],width:s.width};for(;n<r&&n<t;)o=Dc(e,n),s=Tc(o[0]),n+=o[1],i.images.push(s);return i}},Nm={validate:e=>ct(e,0,4)==="ff4fff51",calculate:e=>({height:_(e,12),width:_(e,8)})},Lm={validate(e){if(_(e,4)!==1783636e3||_(e,0)<1)return!1;let t=Ue(e,"ftyp",0);return t?_(e,t.offset+4)===1718909296:!1},calculate(e){let t=Ue(e,"jp2h",0),r=t&&Ue(e,"ihdr",t.offset+8);if(r)return{height:_(e,r.offset+8),width:_(e,r.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},Pm="45786966",_m=2,Bs=6,Fm=2,Mm="4d4d",jm="4949",Nc=12,$m=2;Jm={validate:e=>ct(e,0,2)==="ffd8",calculate(e){e=e.slice(4);let t,r;for(;e.length;){let n=pn(e,0);if(e[n]!==255){e=e.slice(n);continue}if(Um(e)&&(t=Km(e,n)),qm(e,n),r=e[n+1],r===192||r===193||r===194){let o=Om(e,n+5);return t?{height:o.height,orientation:t,width:o.width}:o}e=e.slice(n+2)}throw new TypeError("Invalid JPG, no size found")}},Gm={validate:e=>{let t=L(e,1,7);return["KTX 11","KTX 20"].includes(t)},calculate:e=>{let t=e[5]===49?"ktx":"ktx2",r=t==="ktx"?36:20;return{height:Oe(e,r+4),width:Oe(e,r),type:t}}},Vm=`PNG\r

`,zm="IHDR",Lc="CgBI",Ym={validate(e){if(Vm===L(e,1,8)){let t=L(e,12,16);if(t===Lc&&(t=L(e,28,32)),t!==zm)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return L(e,12,16)===Lc?{height:_(e,36),width:_(e,32)}:{height:_(e,20),width:_(e,16)}}},Pc={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},_c={default:e=>{let t=[];for(;e.length>0;){let r=e.shift();if(r[0]!=="#"){t=r.split(" ");break}}if(t.length===2)return{height:parseInt(t[1],10),width:parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{let t={};for(;e.length>0;){let r=e.shift();if(r.length>16||r.charCodeAt(0)>128)continue;let[n,o]=r.split(" ");if(n&&o&&(t[n.toLowerCase()]=parseInt(o,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}},Wm={validate:e=>L(e,0,2)in Pc,calculate(e){let t=L(e,0,2),r=Pc[t],n=L(e,3).split(/[\r\n]+/);return(_c[r]||_c.default)(n)}},Xm={validate:e=>L(e,0,4)==="8BPS",calculate:e=>({height:_(e,14),width:_(e,18)})},jc=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,cn={height:/\sheight=(['"])([^%]+?)\1/,root:jc,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},Ss=2.54,$c={in:96,cm:96/Ss,em:16,ex:8,m:96/Ss*100,mm:96/Ss/10,pc:96/72/12,pt:96/72,px:1},Zm=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys($c).join("|")})?$`);og={validate:e=>jc.test(L(e,0,1e3)),calculate(e){let t=cn.root.exec(L(e));if(t){let r=tg(t[0]);if(r.width&&r.height)return rg(r);if(r.viewbox)return ng(r,r.viewbox)}throw new TypeError("Invalid SVG")}},sg={validate(e){return X(e,0)===0&&X(e,4)===0},calculate(e){return{height:X(e,14),width:X(e,12)}}};pg=["49492a00","4d4d002a"],dg={validate:e=>pg.includes(ct(e,0,4)),calculate(e){let t=ug(e)==="BE",r=ig(e,t),n=cg(r,t),o=n[256],s=n[257];if(!o||!s)throw new TypeError("Invalid Tiff. Missing tags");return{height:s,width:o}}};mg={validate(e){let t=L(e,0,4)==="RIFF",r=L(e,8,12)==="WEBP",n=L(e,12,15)==="VP8";return t&&r&&n},calculate(e){let t=L(e,12,16);if(e=e.slice(20,30),t==="VP8X"){let n=e[0],o=(n&192)===0,s=(n&1)===0;if(o&&s)return fg(e);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&e[0]!==47)return Ag(e);let r=ct(e,3,6);if(t==="VP8L"&&r!=="9d012a")return hg(e);throw new TypeError("Invalid WebP")}},fn=new Map([["bmp",gm],["cur",vm],["dds",xm],["gif",Bm],["heif",bm],["icns",Tm],["ico",Fc],["j2c",Nm],["jp2",Lm],["jpg",Jm],["ktx",Gm],["png",Ym],["pnm",Wm],["psd",Xm],["svg",og],["tga",sg],["tiff",dg],["webp",mg]]),gg=Array.from(fn.keys()),yg=new Map([[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]);Eg={disabledTypes:[]};Bg=Mt(),Ig=ot(async(e,t,r)=>{let n=e.createAstro(Bg,t,r);n.self=Ig;let o=n.props;if(o.alt===void 0||o.alt===null)throw new g(Lr);typeof o.width=="string"&&(o.width=parseInt(o.width)),typeof o.height=="string"&&(o.height=parseInt(o.height));let s=await Is(o),i={};return s.srcSet.values.length>0&&(i.srcset=s.srcSet.attribute),se`${en()}<img${je(s.src,"src")}${be(i)}${be(s.attributes)}>`},"/home/snoob/Documents/GitHub/thelorebook/node_modules/astro/components/Image.astro",void 0),bg=Mt(),Qg=ot(async(e,t,r)=>{let n=e.createAstro(bg,t,r);n.self=Qg;let o=["webp"],s="png",i=["gif","svg","jpg","jpeg"],{formats:a=o,pictureAttributes:l={},fallbackFormat:u,...c}=n.props;if(c.alt===void 0||c.alt===null)throw new g(Lr);let p=c.class?.match(/\bastro-\w{8}\b/)?.[0];p&&(l.class?l.class=`${l.class} ${p}`:l.class=p);for(let w in c)w.startsWith("data-astro-cid")&&(l[w]=c[w]);let d=await Or(c.src),f=await Promise.all(a.map(async w=>await Is({...c,src:d,format:w,widths:c.widths,densities:c.densities}))),h=u??s;!u&&me(d)&&i.includes(d.format)&&(h=d.format);let A=await Is({...c,format:h,widths:c.widths,densities:c.densities}),E={},C={};return c.sizes&&(C.sizes=c.sizes),A.srcSet.values.length>0&&(E.srcset=A.srcSet.attribute),se`${en()}<picture${be(l)}> ${Object.entries(f).map(([w,k])=>{let P=c.densities||!c.densities&&!c.widths?`${k.src}${k.srcSet.values.length>0?", "+k.srcSet.attribute:""}`:k.srcSet.attribute;return se`<source${je(P,"srcset")}${je(xs(k.options.format??k.src)??`image/${k.options.format}`,"type")}${be(C)}>`})} <img${je(A.src,"src")}${be(E)}${be(A.attributes)}> </picture>`},"/home/snoob/Documents/GitHub/thelorebook/node_modules/astro/components/Picture.astro",void 0),un={service:{entrypoint:"astro/assets/services/noop",config:{}},domains:[],remotePatterns:[]},Is=async e=>await Sg(e,un),kg=e=>{let t=e.length,r=0,n=0,o=8997,s=0,i=33826,a=0,l=40164,u=0,c=52210;for(;r<t;)o^=e.charCodeAt(r++),n=o*435,s=i*435,a=l*435,u=c*435,a+=o<<8,u+=i<<8,s+=n>>>16,o=n&65535,a+=s>>>16,i=s&65535,c=u+(a>>>16)&65535,l=a&65535;return(c&15)*281474976710656+l*4294967296+i*65536+(o^c>>4)},Rg=(e,t=!1)=>(t?'W/"':'"')+kg(e).toString(36)+e.length.toString(36)+'"';Tg=async({request:e})=>{try{let t=await Uc();if(!("transform"in t))throw new Error("Configured image service is not a local service");let r=new URL(e.url),n=await t.parseURL(r,un);if(!n?.src)throw new Error("Incorrect transform returned by `parseURL`");let o,s=We(n.src),i=s?new URL(n.src):new URL(n.src,r.origin);if(s&&Hr(n.src,un)===!1)return new Response("Forbidden",{status:403});if(o=await Dg(i,s?new Headers:e.headers),!o)return new Response("Not Found",{status:404});let{data:a,format:l}=await t.transform(new Uint8Array(o),n,un);return new Response(a,{status:200,headers:{"Content-Type":xs(l)??`image/${l}`,"Cache-Control":"public, max-age=31536000",ETag:Rg(a.toString()),Date:new Date().toUTCString()}})}catch(t){return console.error("Could not process image request:",t),new Response(`Server Error: ${t}`,{status:500})}},Ng=Object.freeze(Object.defineProperty({__proto__:null,GET:Tg},Symbol.toStringTag,{value:"Module"})),Lg=()=>Ng});var qc=pe(hn=>{"use strict";var Pg=Je(),_g=Symbol.for("react.element"),Fg=Symbol.for("react.fragment"),Mg=Object.prototype.hasOwnProperty,jg=Pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$g={key:!0,ref:!0,__self:!0,__source:!0};function Kc(e,t,r){var n,o={},s=null,i=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Mg.call(t,n)&&!$g.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:_g,type:e,key:s,ref:i,props:o,_owner:jg.current}}hn.Fragment=Fg;hn.jsx=Kc;hn.jsxs=Kc});var Gc=pe((rw,Jc)=>{"use strict";Jc.exports=qc()});var zc={};ut(zc,{page:()=>Gg,renderers:()=>Ye});function Og(){return(0,He.jsx)("div",{className:"bg-white",children:(0,He.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-24 text-center sm:px-6 md:py-48 lg:px-8",children:[(0,He.jsx)("span",{className:"font-serif text-xl uppercase tracking-widest text-gray-500",children:"The Lore Book"}),(0,He.jsx)("h2",{className:"font-avenir-reg mt-2 text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl",children:"Create compelling narratives for your life."}),(0,He.jsx)("p",{className:"mx-auto mt-6 max-w-2xl text-lg text-gray-500",children:"Download now"})]})})}var He,Ug,Vc,Hg,Kg,qg,Jg,Gg,Yc=j(()=>{it();It();et();He=Qe(Gc(),1);vr();Ug=Mt(),Vc=ot((e,t,r)=>{let n=e.createAstro(Ug,t,r);n.self=Vc;let{title:o}=n.props;return se`<html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"><title>${o}</title>${Fl()}</head> <body> <main class="mx-auto py-8"> ${tn(e,r.default)}  </main> </body></html>`},"/home/snoob/Documents/GitHub/thelorebook/apps/astro/src/layouts/Layout.astro",void 0);Hg=ot((e,t,r)=>se`${st(e,"Layout",Vc,{title:"The Lore Book: The greatest story ever told is yours."},{default:n=>se` ${st(n,"Hero",Og,{"client:load":!0,"client:component-hydration":"load","client:component-path":"/home/snoob/Documents/GitHub/thelorebook/apps/astro/src/components/react/hero.tsx","client:component-export":"Hero"})} `})}`,"/home/snoob/Documents/GitHub/thelorebook/apps/astro/src/pages/index.astro",void 0),Kg="/home/snoob/Documents/GitHub/thelorebook/apps/astro/src/pages/index.astro",qg="",Jg=Object.freeze(Object.defineProperty({__proto__:null,default:Hg,file:Kg,url:qg},Symbol.toStringTag,{value:"Module"})),Gg=()=>Jg});var Wc={};ut(Wc,{onRequest:()=>Vg});var Vg,Xc=j(()=>{Vg=(e,t)=>t()});vr();Bt();it();Dt();var Ut=Qe(ss(),1);It();it();function is(e){let t=zh(e),r=new ArrayBuffer(t.length),n=new DataView(r);for(let o=0;o<r.byteLength;o++)n.setUint8(o,t.charCodeAt(o));return r}var Vh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function zh(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=Vh.indexOf(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}function as(e,t){return Yl(JSON.parse(e),t)}function Yl(e,t){if(typeof e=="number")return o(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");let r=e,n=Array(r.length);function o(s,i=!1){if(s===-1)return;if(s===-3)return NaN;if(s===-4)return 1/0;if(s===-5)return-1/0;if(s===-6)return-0;if(i)throw new Error("Invalid input");if(s in n)return n[s];let a=r[s];if(!a||typeof a!="object")n[s]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){let l=a[0],u=t?.[l];if(u)return n[s]=u(o(a[1]));switch(l){case"Date":n[s]=new Date(a[1]);break;case"Set":let c=new Set;n[s]=c;for(let f=1;f<a.length;f+=1)c.add(o(a[f]));break;case"Map":let p=new Map;n[s]=p;for(let f=1;f<a.length;f+=2)p.set(o(a[f]),o(a[f+1]));break;case"RegExp":n[s]=new RegExp(a[1],a[2]);break;case"Object":n[s]=Object(a[1]);break;case"BigInt":n[s]=BigInt(a[1]);break;case"null":let d=Object.create(null);n[s]=d;for(let f=1;f<a.length;f+=2)d[a[f]]=o(a[f+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{let f=globalThis[l],h=a[1],A=is(h),E=new f(A);n[s]=E;break}case"ArrayBuffer":{let f=a[1],h=is(f);n[s]=h;break}default:throw new Error(`Unknown type ${l}`)}}else{let l=new Array(a.length);n[s]=l;for(let u=0;u<a.length;u+=1){let c=a[u];c!==-2&&(l[u]=o(c))}}else{let l={};n[s]=l;for(let u in a){let c=a[u];l[u]=o(c)}}return n[s]}return o(0)}bo();var lt=async(e,t)=>{let r=await t();return r.headers.set(Sl,"true"),r},Yh={actionName:"_astroAction",actionPayload:"_astroActionPayload",actionRedirect:"_astroActionRedirect"},Wh={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:void 0,SSR:!0},Wl={BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,TIMEOUT:405,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500},Xh=Object.entries(Wl).reduce((e,[t,r])=>({...e,[r]:t}),{}),at=class e extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(t){super(t.message),this.code=t.code,this.status=e.codeToStatus(t.code),t.stack&&(this.stack=t.stack)}static codeToStatus(t){return Wl[t]}static statusToCode(t){return Xh[t]??"INTERNAL_SERVER_ERROR"}static fromJson(t){return eA(t)?new ls(t.issues):Zh(t)?new e(t):new e({code:"INTERNAL_SERVER_ERROR"})}};function Zh(e){return typeof e=="object"&&e!=null&&"type"in e&&e.type==="AstroActionError"}function eA(e){return typeof e=="object"&&e!=null&&"type"in e&&e.type==="AstroActionInputError"&&"issues"in e&&Array.isArray(e.issues)}var ls=class extends at{type="AstroActionInputError";issues;fields;constructor(t){super({message:`Failed to validate: ${JSON.stringify(t,null,2)}`,code:"BAD_REQUEST"}),this.issues=t,this.fields={};for(let r of t)if(r.path.length>0){let n=r.path[0].toString();this.fields[n]??=[],this.fields[n]?.push(r.message)}}};function Xl(e){return`?${new URLSearchParams({[Yh.actionName]:e}).toString()}`}function cs(e){if(e.type==="error"){let t;try{t=JSON.parse(e.body)}catch{return{data:void 0,error:new at({message:e.body,code:"INTERNAL_SERVER_ERROR"})}}if(Object.assign(Wh,{_:process.env._})?.PROD)return{error:at.fromJson(t),data:void 0};{let r=at.fromJson(t);return r.stack=tA.get(),{error:r,data:void 0}}}return e.type==="empty"?{data:void 0,error:void 0}:{data:as(e.body,{URL:t=>new URL(t)}),error:void 0}}var tA=function(){let t;return{set(r){t=r},get(){return t}}}();function rA({title:e,pathname:t,statusCode:r=404,tabTitle:n,body:o}){return`<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>${n}</title>
		<style>
			:root {
				--gray-10: hsl(258, 7%, 10%);
				--gray-20: hsl(258, 7%, 20%);
				--gray-30: hsl(258, 7%, 30%);
				--gray-40: hsl(258, 7%, 40%);
				--gray-50: hsl(258, 7%, 50%);
				--gray-60: hsl(258, 7%, 60%);
				--gray-70: hsl(258, 7%, 70%);
				--gray-80: hsl(258, 7%, 80%);
				--gray-90: hsl(258, 7%, 90%);
				--black: #13151A;
				--accent-light: #E0CCFA;
			}

			* {
				box-sizing: border-box;
			}

			html {
				background: var(--black);
				color-scheme: dark;
				accent-color: var(--accent-light);
			}

			body {
				background-color: var(--gray-10);
				color: var(--gray-80);
				font-family: ui-monospace, Menlo, Monaco, "Cascadia Mono", "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace", "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New", monospace;
				line-height: 1.5;
				margin: 0;
			}

			a {
				color: var(--accent-light);
			}

			.center {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				height: 100vh;
				width: 100vw;
			}

			h1 {
				margin-bottom: 8px;
				color: white;
				font-family: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
				font-weight: 700;
				margin-top: 1rem;
				margin-bottom: 0;
			}

			.statusCode {
				color: var(--accent-light);
			}

			.astro-icon {
				height: 124px;
				width: 124px;
			}

			pre, code {
				padding: 2px 8px;
				background: rgba(0,0,0, 0.25);
				border: 1px solid rgba(255,255,255, 0.25);
				border-radius: 4px;
				font-size: 1.2em;
				margin-top: 0;
				max-width: 60em;
			}
		</style>
	</head>
	<body>
		<main class="center">
			<svg class="astro-icon" xmlns="http://www.w3.org/2000/svg" width="64" height="80" viewBox="0 0 64 80" fill="none"> <path d="M20.5253 67.6322C16.9291 64.3531 15.8793 57.4632 17.3776 52.4717C19.9755 55.6188 23.575 56.6157 27.3035 57.1784C33.0594 58.0468 38.7122 57.722 44.0592 55.0977C44.6709 54.7972 45.2362 54.3978 45.9045 53.9931C46.4062 55.4451 46.5368 56.9109 46.3616 58.4028C45.9355 62.0362 44.1228 64.8429 41.2397 66.9705C40.0868 67.8215 38.8669 68.5822 37.6762 69.3846C34.0181 71.8508 33.0285 74.7426 34.403 78.9491C34.4357 79.0516 34.4649 79.1541 34.5388 79.4042C32.6711 78.5705 31.3069 77.3565 30.2674 75.7604C29.1694 74.0757 28.6471 72.2121 28.6196 70.1957C28.6059 69.2144 28.6059 68.2244 28.4736 67.257C28.1506 64.8985 27.0406 63.8425 24.9496 63.7817C22.8036 63.7192 21.106 65.0426 20.6559 67.1268C20.6215 67.2865 20.5717 67.4446 20.5218 67.6304L20.5253 67.6322Z" fill="white"/> <path d="M20.5253 67.6322C16.9291 64.3531 15.8793 57.4632 17.3776 52.4717C19.9755 55.6188 23.575 56.6157 27.3035 57.1784C33.0594 58.0468 38.7122 57.722 44.0592 55.0977C44.6709 54.7972 45.2362 54.3978 45.9045 53.9931C46.4062 55.4451 46.5368 56.9109 46.3616 58.4028C45.9355 62.0362 44.1228 64.8429 41.2397 66.9705C40.0868 67.8215 38.8669 68.5822 37.6762 69.3846C34.0181 71.8508 33.0285 74.7426 34.403 78.9491C34.4357 79.0516 34.4649 79.1541 34.5388 79.4042C32.6711 78.5705 31.3069 77.3565 30.2674 75.7604C29.1694 74.0757 28.6471 72.2121 28.6196 70.1957C28.6059 69.2144 28.6059 68.2244 28.4736 67.257C28.1506 64.8985 27.0406 63.8425 24.9496 63.7817C22.8036 63.7192 21.106 65.0426 20.6559 67.1268C20.6215 67.2865 20.5717 67.4446 20.5218 67.6304L20.5253 67.6322Z" fill="url(#paint0_linear_738_686)"/> <path d="M0 51.6401C0 51.6401 10.6488 46.4654 21.3274 46.4654L29.3786 21.6102C29.6801 20.4082 30.5602 19.5913 31.5538 19.5913C32.5474 19.5913 33.4275 20.4082 33.7289 21.6102L41.7802 46.4654C54.4274 46.4654 63.1076 51.6401 63.1076 51.6401C63.1076 51.6401 45.0197 2.48776 44.9843 2.38914C44.4652 0.935933 43.5888 0 42.4073 0H20.7022C19.5206 0 18.6796 0.935933 18.1251 2.38914C18.086 2.4859 0 51.6401 0 51.6401Z" fill="white"/> <defs> <linearGradient id="paint0_linear_738_686" x1="31.554" y1="75.4423" x2="39.7462" y2="48.376" gradientUnits="userSpaceOnUse"> <stop stop-color="#D83333"/> <stop offset="1" stop-color="#F041FF"/> </linearGradient> </defs> </svg>
			<h1>${r?`<span class="statusCode">${r}: </span> `:""}<span class="statusMessage">${e}</span></h1>
			${o||`
				<pre>Path: ${Kr(t)}</pre>
			`}
			</main>
	</body>
</html>`}var rn={component:nt,generate:()=>"",params:[],pattern:/\/404/,prerender:!1,pathname:"/404",segments:[[{content:"404",dynamic:!1,spread:!1}]],type:"page",route:"/404",fallbackRoutes:[],isIndex:!1};function Zl(e){return e.routes.some(t=>t.route==="/404")||e.routes.push(rn),e}async function ec({pathname:e}){return new Response(rA({statusCode:404,title:"Not found",tabTitle:"404: Not Found",pathname:e}),{status:404,headers:{"Content-Type":"text/html; charset=utf-8"}})}ec.isAstroComponentFactory=!0;var tc={default:ec};var rc;(function(e){e[e.Static=1]="Static",e[e.Dynamic=2]="Dynamic",e[e.ImportMeta=3]="ImportMeta",e[e.StaticSourcePhase=4]="StaticSourcePhase",e[e.DynamicSourcePhase=5]="DynamicSourcePhase"})(rc||(rc={}));var D0=new Uint8Array(new Uint16Array([1]).buffer)[0]===1;var nA,T0=WebAssembly.compile((us="AGFzbQEAAAABKwhgAX8Bf2AEf39/fwBgAAF/YAAAYAF/AGADf39/AX9gAn9/AX9gA39/fwADMTAAAQECAgICAgICAgICAgICAgICAgIAAwMDBAQAAAUAAAAAAAMDAwAGAAAABwAGAgUEBQFwAQEBBQMBAAEGDwJ/AUHA8gALfwBBwPIACwd6FQZtZW1vcnkCAAJzYQAAAWUAAwJpcwAEAmllAAUCc3MABgJzZQAHAml0AAgCYWkACQJpZAAKAmlwAAsCZXMADAJlZQANA2VscwAOA2VsZQAPAnJpABACcmUAEQFmABICbXMAEwVwYXJzZQAUC19faGVhcF9iYXNlAwEKm0EwaAEBf0EAIAA2AoAKQQAoAtwJIgEgAEEBdGoiAEEAOwEAQQAgAEECaiIANgKECkEAIAA2AogKQQBBADYC4AlBAEEANgLwCUEAQQA2AugJQQBBADYC5AlBAEEANgL4CUEAQQA2AuwJIAEL0wEBA39BACgC8AkhBEEAQQAoAogKIgU2AvAJQQAgBDYC9AlBACAFQSRqNgKICiAEQSBqQeAJIAQbIAU2AgBBACgC1AkhBEEAKALQCSEGIAUgATYCACAFIAA2AgggBSACIAJBAmpBACAGIANGIgAbIAQgA0YiBBs2AgwgBSADNgIUIAVBADYCECAFIAI2AgQgBUEANgIgIAVBA0EBQQIgABsgBBs2AhwgBUEAKALQCSADRiICOgAYAkACQCACDQBBACgC1AkgA0cNAQtBAEEBOgCMCgsLXgEBf0EAKAL4CSIEQRBqQeQJIAQbQQAoAogKIgQ2AgBBACAENgL4CUEAIARBFGo2AogKQQBBAToAjAogBEEANgIQIAQgAzYCDCAEIAI2AgggBCABNgIEIAQgADYCAAsIAEEAKAKQCgsVAEEAKALoCSgCAEEAKALcCWtBAXULHgEBf0EAKALoCSgCBCIAQQAoAtwJa0EBdUF/IAAbCxUAQQAoAugJKAIIQQAoAtwJa0EBdQseAQF/QQAoAugJKAIMIgBBACgC3AlrQQF1QX8gABsLCwBBACgC6AkoAhwLHgEBf0EAKALoCSgCECIAQQAoAtwJa0EBdUF/IAAbCzsBAX8CQEEAKALoCSgCFCIAQQAoAtAJRw0AQX8PCwJAIABBACgC1AlHDQBBfg8LIABBACgC3AlrQQF1CwsAQQAoAugJLQAYCxUAQQAoAuwJKAIAQQAoAtwJa0EBdQsVAEEAKALsCSgCBEEAKALcCWtBAXULHgEBf0EAKALsCSgCCCIAQQAoAtwJa0EBdUF/IAAbCx4BAX9BACgC7AkoAgwiAEEAKALcCWtBAXVBfyAAGwslAQF/QQBBACgC6AkiAEEgakHgCSAAGygCACIANgLoCSAAQQBHCyUBAX9BAEEAKALsCSIAQRBqQeQJIAAbKAIAIgA2AuwJIABBAEcLCABBAC0AlAoLCABBAC0AjAoL3Q0BBX8jAEGA0ABrIgAkAEEAQQE6AJQKQQBBACgC2Ak2ApwKQQBBACgC3AlBfmoiATYCsApBACABQQAoAoAKQQF0aiICNgK0CkEAQQA6AIwKQQBBADsBlgpBAEEAOwGYCkEAQQA6AKAKQQBBADYCkApBAEEAOgD8CUEAIABBgBBqNgKkCkEAIAA2AqgKQQBBADoArAoCQAJAAkACQANAQQAgAUECaiIDNgKwCiABIAJPDQECQCADLwEAIgJBd2pBBUkNAAJAAkACQAJAAkAgAkGbf2oOBQEICAgCAAsgAkEgRg0EIAJBL0YNAyACQTtGDQIMBwtBAC8BmAoNASADEBVFDQEgAUEEakGCCEEKEC8NARAWQQAtAJQKDQFBAEEAKAKwCiIBNgKcCgwHCyADEBVFDQAgAUEEakGMCEEKEC8NABAXC0EAQQAoArAKNgKcCgwBCwJAIAEvAQQiA0EqRg0AIANBL0cNBBAYDAELQQEQGQtBACgCtAohAkEAKAKwCiEBDAALC0EAIQIgAyEBQQAtAPwJDQIMAQtBACABNgKwCkEAQQA6AJQKCwNAQQAgAUECaiIDNgKwCgJAAkACQAJAAkACQAJAIAFBACgCtApPDQAgAy8BACICQXdqQQVJDQYCQAJAAkACQAJAAkACQAJAAkACQCACQWBqDgoQDwYPDw8PBQECAAsCQAJAAkACQCACQaB/ag4KCxISAxIBEhISAgALIAJBhX9qDgMFEQYJC0EALwGYCg0QIAMQFUUNECABQQRqQYIIQQoQLw0QEBYMEAsgAxAVRQ0PIAFBBGpBjAhBChAvDQ8QFwwPCyADEBVFDQ4gASkABELsgISDsI7AOVINDiABLwEMIgNBd2oiAUEXSw0MQQEgAXRBn4CABHFFDQwMDQtBAEEALwGYCiIBQQFqOwGYCkEAKAKkCiABQQN0aiIBQQE2AgAgAUEAKAKcCjYCBAwNC0EALwGYCiIDRQ0JQQAgA0F/aiIDOwGYCkEALwGWCiICRQ0MQQAoAqQKIANB//8DcUEDdGooAgBBBUcNDAJAIAJBAnRBACgCqApqQXxqKAIAIgMoAgQNACADQQAoApwKQQJqNgIEC0EAIAJBf2o7AZYKIAMgAUEEajYCDAwMCwJAQQAoApwKIgEvAQBBKUcNAEEAKALwCSIDRQ0AIAMoAgQgAUcNAEEAQQAoAvQJIgM2AvAJAkAgA0UNACADQQA2AiAMAQtBAEEANgLgCQtBAEEALwGYCiIDQQFqOwGYCkEAKAKkCiADQQN0aiIDQQZBAkEALQCsChs2AgAgAyABNgIEQQBBADoArAoMCwtBAC8BmAoiAUUNB0EAIAFBf2oiATsBmApBACgCpAogAUH//wNxQQN0aigCAEEERg0EDAoLQScQGgwJC0EiEBoMCAsgAkEvRw0HAkACQCABLwEEIgFBKkYNACABQS9HDQEQGAwKC0EBEBkMCQsCQAJAAkACQEEAKAKcCiIBLwEAIgMQG0UNAAJAAkAgA0FVag4EAAkBAwkLIAFBfmovAQBBK0YNAwwICyABQX5qLwEAQS1GDQIMBwsgA0EpRw0BQQAoAqQKQQAvAZgKIgJBA3RqKAIEEBxFDQIMBgsgAUF+ai8BAEFQakH//wNxQQpPDQULQQAvAZgKIQILAkACQCACQf//A3EiAkUNACADQeYARw0AQQAoAqQKIAJBf2pBA3RqIgQoAgBBAUcNACABQX5qLwEAQe8ARw0BIAQoAgRBlghBAxAdRQ0BDAULIANB/QBHDQBBACgCpAogAkEDdGoiAigCBBAeDQQgAigCAEEGRg0ECyABEB8NAyADRQ0DIANBL0ZBAC0AoApBAEdxDQMCQEEAKAL4CSICRQ0AIAEgAigCAEkNACABIAIoAgRNDQQLIAFBfmohAUEAKALcCSECAkADQCABQQJqIgQgAk0NAUEAIAE2ApwKIAEvAQAhAyABQX5qIgQhASADECBFDQALIARBAmohBAsCQCADQf//A3EQIUUNACAEQX5qIQECQANAIAFBAmoiAyACTQ0BQQAgATYCnAogAS8BACEDIAFBfmoiBCEBIAMQIQ0ACyAEQQJqIQMLIAMQIg0EC0EAQQE6AKAKDAcLQQAoAqQKQQAvAZgKIgFBA3QiA2pBACgCnAo2AgRBACABQQFqOwGYCkEAKAKkCiADakEDNgIACxAjDAULQQAtAPwJQQAvAZYKQQAvAZgKcnJFIQIMBwsQJEEAQQA6AKAKDAMLECVBACECDAULIANBoAFHDQELQQBBAToArAoLQQBBACgCsAo2ApwKC0EAKAKwCiEBDAALCyAAQYDQAGokACACCxoAAkBBACgC3AkgAEcNAEEBDwsgAEF+ahAmC/4KAQZ/QQBBACgCsAoiAEEMaiIBNgKwCkEAKAL4CSECQQEQKSEDAkACQAJAAkACQAJAAkACQAJAQQAoArAKIgQgAUcNACADEChFDQELAkACQAJAAkACQAJAAkAgA0EqRg0AIANB+wBHDQFBACAEQQJqNgKwCkEBECkhA0EAKAKwCiEEA0ACQAJAIANB//8DcSIDQSJGDQAgA0EnRg0AIAMQLBpBACgCsAohAwwBCyADEBpBAEEAKAKwCkECaiIDNgKwCgtBARApGgJAIAQgAxAtIgNBLEcNAEEAQQAoArAKQQJqNgKwCkEBECkhAwsgA0H9AEYNA0EAKAKwCiIFIARGDQ8gBSEEIAVBACgCtApNDQAMDwsLQQAgBEECajYCsApBARApGkEAKAKwCiIDIAMQLRoMAgtBAEEAOgCUCgJAAkACQAJAAkACQCADQZ9/ag4MAgsEAQsDCwsLCwsFAAsgA0H2AEYNBAwKC0EAIARBDmoiAzYCsAoCQAJAAkBBARApQZ9/ag4GABICEhIBEgtBACgCsAoiBSkAAkLzgOSD4I3AMVINESAFLwEKECFFDRFBACAFQQpqNgKwCkEAECkaC0EAKAKwCiIFQQJqQbIIQQ4QLw0QIAUvARAiAkF3aiIBQRdLDQ1BASABdEGfgIAEcUUNDQwOC0EAKAKwCiIFKQACQuyAhIOwjsA5Ug0PIAUvAQoiAkF3aiIBQRdNDQYMCgtBACAEQQpqNgKwCkEAECkaQQAoArAKIQQLQQAgBEEQajYCsAoCQEEBECkiBEEqRw0AQQBBACgCsApBAmo2ArAKQQEQKSEEC0EAKAKwCiEDIAQQLBogA0EAKAKwCiIEIAMgBBACQQBBACgCsApBfmo2ArAKDwsCQCAEKQACQuyAhIOwjsA5Ug0AIAQvAQoQIEUNAEEAIARBCmo2ArAKQQEQKSEEQQAoArAKIQMgBBAsGiADQQAoArAKIgQgAyAEEAJBAEEAKAKwCkF+ajYCsAoPC0EAIARBBGoiBDYCsAoLQQAgBEEGajYCsApBAEEAOgCUCkEBECkhBEEAKAKwCiEDIAQQLCEEQQAoArAKIQIgBEHf/wNxIgFB2wBHDQNBACACQQJqNgKwCkEBECkhBUEAKAKwCiEDQQAhBAwEC0EAQQE6AIwKQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0AQQAgA0EIajYCsAogAEEBEClBABArIAJBEGpB5AkgAhshAwNAIAMoAgAiA0UNBSADQgA3AgggA0EQaiEDDAALC0EAIANBfmo2ArAKDAMLQQEgAXRBn4CABHFFDQMMBAtBASEECwNAAkACQCAEDgIAAQELIAVB//8DcRAsGkEBIQQMAQsCQAJAQQAoArAKIgQgA0YNACADIAQgAyAEEAJBARApIQQCQCABQdsARw0AIARBIHJB/QBGDQQLQQAoArAKIQMCQCAEQSxHDQBBACADQQJqNgKwCkEBECkhBUEAKAKwCiEDIAVBIHJB+wBHDQILQQAgA0F+ajYCsAoLIAFB2wBHDQJBACACQX5qNgKwCg8LQQAhBAwACwsPCyACQaABRg0AIAJB+wBHDQQLQQAgBUEKajYCsApBARApIgVB+wBGDQMMAgsCQCACQVhqDgMBAwEACyACQaABRw0CC0EAIAVBEGo2ArAKAkBBARApIgVBKkcNAEEAQQAoArAKQQJqNgKwCkEBECkhBQsgBUEoRg0BC0EAKAKwCiEBIAUQLBpBACgCsAoiBSABTQ0AIAQgAyABIAUQAkEAQQAoArAKQX5qNgKwCg8LIAQgA0EAQQAQAkEAIARBDGo2ArAKDwsQJQvcCAEGf0EAIQBBAEEAKAKwCiIBQQxqIgI2ArAKQQEQKSEDQQAoArAKIQQCQAJAAkACQAJAAkACQAJAIANBLkcNAEEAIARBAmo2ArAKAkBBARApIgNB8wBGDQAgA0HtAEcNB0EAKAKwCiIDQQJqQZwIQQYQLw0HAkBBACgCnAoiBBAqDQAgBC8BAEEuRg0ICyABIAEgA0EIakEAKALUCRABDwtBACgCsAoiA0ECakGiCEEKEC8NBgJAQQAoApwKIgQQKg0AIAQvAQBBLkYNBwsgA0EMaiEDDAELIANB8wBHDQEgBCACTQ0BQQYhAEEAIQIgBEECakGiCEEKEC8NAiAEQQxqIQMCQCAELwEMIgVBd2oiBEEXSw0AQQEgBHRBn4CABHENAQsgBUGgAUcNAgtBACADNgKwCkEBIQBBARApIQMLAkACQAJAAkAgA0H7AEYNACADQShHDQFBACgCpApBAC8BmAoiA0EDdGoiBEEAKAKwCjYCBEEAIANBAWo7AZgKIARBBTYCAEEAKAKcCi8BAEEuRg0HQQBBACgCsAoiBEECajYCsApBARApIQMgAUEAKAKwCkEAIAQQAQJAAkAgAA0AQQAoAvAJIQQMAQtBACgC8AkiBEEFNgIcC0EAQQAvAZYKIgBBAWo7AZYKQQAoAqgKIABBAnRqIAQ2AgACQCADQSJGDQAgA0EnRg0AQQBBACgCsApBfmo2ArAKDwsgAxAaQQBBACgCsApBAmoiAzYCsAoCQAJAAkBBARApQVdqDgQBAgIAAgtBAEEAKAKwCkECajYCsApBARApGkEAKALwCSIEIAM2AgQgBEEBOgAYIARBACgCsAoiAzYCEEEAIANBfmo2ArAKDwtBACgC8AkiBCADNgIEIARBAToAGEEAQQAvAZgKQX9qOwGYCiAEQQAoArAKQQJqNgIMQQBBAC8BlgpBf2o7AZYKDwtBAEEAKAKwCkF+ajYCsAoPCyAADQJBACgCsAohA0EALwGYCg0BA0ACQAJAAkAgA0EAKAK0Ck8NAEEBECkiA0EiRg0BIANBJ0YNASADQf0ARw0CQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0JC0EAIANBCGo2ArAKAkBBARApIgNBIkYNACADQSdHDQkLIAEgA0EAECsPCyADEBoLQQBBACgCsApBAmoiAzYCsAoMAAsLIAANAUEGIQBBACECAkAgA0FZag4EBAMDBAALIANBIkYNAwwCC0EAIANBfmo2ArAKDwtBDCEAQQEhAgtBACgCsAoiAyABIABBAXRqRw0AQQAgA0F+ajYCsAoPC0EALwGYCg0CQQAoArAKIQNBACgCtAohAANAIAMgAE8NAQJAAkAgAy8BACIEQSdGDQAgBEEiRw0BCyABIAQgAhArDwtBACADQQJqIgM2ArAKDAALCxAlCw8LQQBBACgCsApBfmo2ArAKC0cBA39BACgCsApBAmohAEEAKAK0CiEBAkADQCAAIgJBfmogAU8NASACQQJqIQAgAi8BAEF2ag4EAQAAAQALC0EAIAI2ArAKC5gBAQN/QQBBACgCsAoiAUECajYCsAogAUEGaiEBQQAoArQKIQIDQAJAAkACQCABQXxqIAJPDQAgAUF+ai8BACEDAkACQCAADQAgA0EqRg0BIANBdmoOBAIEBAIECyADQSpHDQMLIAEvAQBBL0cNAkEAIAFBfmo2ArAKDAELIAFBfmohAQtBACABNgKwCg8LIAFBAmohAQwACwuIAQEEf0EAKAKwCiEBQQAoArQKIQICQAJAA0AgASIDQQJqIQEgAyACTw0BIAEvAQAiBCAARg0CAkAgBEHcAEYNACAEQXZqDgQCAQECAQsgA0EEaiEBIAMvAQRBDUcNACADQQZqIAEgAy8BBkEKRhshAQwACwtBACABNgKwChAlDwtBACABNgKwCgtsAQF/AkACQCAAQV9qIgFBBUsNAEEBIAF0QTFxDQELIABBRmpB//8DcUEGSQ0AIABBKUcgAEFYakH//wNxQQdJcQ0AAkAgAEGlf2oOBAEAAAEACyAAQf0ARyAAQYV/akH//wNxQQRJcQ8LQQELLgEBf0EBIQECQCAAQaYJQQUQHQ0AIABBlghBAxAdDQAgAEGwCUECEB0hAQsgAQtGAQN/QQAhAwJAIAAgAkEBdCICayIEQQJqIgBBACgC3AkiBUkNACAAIAEgAhAvDQACQCAAIAVHDQBBAQ8LIAQQJiEDCyADC4MBAQJ/QQEhAQJAAkACQAJAAkACQCAALwEAIgJBRWoOBAUEBAEACwJAIAJBm39qDgQDBAQCAAsgAkEpRg0EIAJB+QBHDQMgAEF+akG8CUEGEB0PCyAAQX5qLwEAQT1GDwsgAEF+akG0CUEEEB0PCyAAQX5qQcgJQQMQHQ8LQQAhAQsgAQu0AwECf0EAIQECQAJAAkACQAJAAkACQAJAAkACQCAALwEAQZx/ag4UAAECCQkJCQMJCQQFCQkGCQcJCQgJCwJAAkAgAEF+ai8BAEGXf2oOBAAKCgEKCyAAQXxqQcoIQQIQHQ8LIABBfGpBzghBAxAdDwsCQAJAAkAgAEF+ai8BAEGNf2oOAwABAgoLAkAgAEF8ai8BACICQeEARg0AIAJB7ABHDQogAEF6akHlABAnDwsgAEF6akHjABAnDwsgAEF8akHUCEEEEB0PCyAAQXxqQdwIQQYQHQ8LIABBfmovAQBB7wBHDQYgAEF8ai8BAEHlAEcNBgJAIABBemovAQAiAkHwAEYNACACQeMARw0HIABBeGpB6AhBBhAdDwsgAEF4akH0CEECEB0PCyAAQX5qQfgIQQQQHQ8LQQEhASAAQX5qIgBB6QAQJw0EIABBgAlBBRAdDwsgAEF+akHkABAnDwsgAEF+akGKCUEHEB0PCyAAQX5qQZgJQQQQHQ8LAkAgAEF+ai8BACICQe8ARg0AIAJB5QBHDQEgAEF8akHuABAnDwsgAEF8akGgCUEDEB0hAQsgAQs0AQF/QQEhAQJAIABBd2pB//8DcUEFSQ0AIABBgAFyQaABRg0AIABBLkcgABAocSEBCyABCzABAX8CQAJAIABBd2oiAUEXSw0AQQEgAXRBjYCABHENAQsgAEGgAUYNAEEADwtBAQtOAQJ/QQAhAQJAAkAgAC8BACICQeUARg0AIAJB6wBHDQEgAEF+akH4CEEEEB0PCyAAQX5qLwEAQfUARw0AIABBfGpB3AhBBhAdIQELIAEL3gEBBH9BACgCsAohAEEAKAK0CiEBAkACQAJAA0AgACICQQJqIQAgAiABTw0BAkACQAJAIAAvAQAiA0Gkf2oOBQIDAwMBAAsgA0EkRw0CIAIvAQRB+wBHDQJBACACQQRqIgA2ArAKQQBBAC8BmAoiAkEBajsBmApBACgCpAogAkEDdGoiAkEENgIAIAIgADYCBA8LQQAgADYCsApBAEEALwGYCkF/aiIAOwGYCkEAKAKkCiAAQf//A3FBA3RqKAIAQQNHDQMMBAsgAkEEaiEADAALC0EAIAA2ArAKCxAlCwtwAQJ/AkACQANAQQBBACgCsAoiAEECaiIBNgKwCiAAQQAoArQKTw0BAkACQAJAIAEvAQAiAUGlf2oOAgECAAsCQCABQXZqDgQEAwMEAAsgAUEvRw0CDAQLEC4aDAELQQAgAEEEajYCsAoMAAsLECULCzUBAX9BAEEBOgD8CUEAKAKwCiEAQQBBACgCtApBAmo2ArAKQQAgAEEAKALcCWtBAXU2ApAKC0MBAn9BASEBAkAgAC8BACICQXdqQf//A3FBBUkNACACQYABckGgAUYNAEEAIQEgAhAoRQ0AIAJBLkcgABAqcg8LIAELPQECf0EAIQICQEEAKALcCSIDIABLDQAgAC8BACABRw0AAkAgAyAARw0AQQEPCyAAQX5qLwEAECAhAgsgAgtoAQJ/QQEhAQJAAkAgAEFfaiICQQVLDQBBASACdEExcQ0BCyAAQfj/A3FBKEYNACAAQUZqQf//A3FBBkkNAAJAIABBpX9qIgJBA0sNACACQQFHDQELIABBhX9qQf//A3FBBEkhAQsgAQucAQEDf0EAKAKwCiEBAkADQAJAAkAgAS8BACICQS9HDQACQCABLwECIgFBKkYNACABQS9HDQQQGAwCCyAAEBkMAQsCQAJAIABFDQAgAkF3aiIBQRdLDQFBASABdEGfgIAEcUUNAQwCCyACECFFDQMMAQsgAkGgAUcNAgtBAEEAKAKwCiIDQQJqIgE2ArAKIANBACgCtApJDQALCyACCzEBAX9BACEBAkAgAC8BAEEuRw0AIABBfmovAQBBLkcNACAAQXxqLwEAQS5GIQELIAELnAQBAX8CQCABQSJGDQAgAUEnRg0AECUPC0EAKAKwCiEDIAEQGiAAIANBAmpBACgCsApBACgC0AkQAQJAIAJFDQBBACgC8AlBBDYCHAtBAEEAKAKwCkECajYCsAoCQAJAAkACQEEAECkiAUHhAEYNACABQfcARg0BQQAoArAKIQEMAgtBACgCsAoiAUECakHACEEKEC8NAUEGIQAMAgtBACgCsAoiAS8BAkHpAEcNACABLwEEQfQARw0AQQQhACABLwEGQegARg0BC0EAIAFBfmo2ArAKDwtBACABIABBAXRqNgKwCgJAQQEQKUH7AEYNAEEAIAE2ArAKDwtBACgCsAoiAiEAA0BBACAAQQJqNgKwCgJAAkACQEEBECkiAEEiRg0AIABBJ0cNAUEnEBpBAEEAKAKwCkECajYCsApBARApIQAMAgtBIhAaQQBBACgCsApBAmo2ArAKQQEQKSEADAELIAAQLCEACwJAIABBOkYNAEEAIAE2ArAKDwtBAEEAKAKwCkECajYCsAoCQEEBECkiAEEiRg0AIABBJ0YNAEEAIAE2ArAKDwsgABAaQQBBACgCsApBAmo2ArAKAkACQEEBECkiAEEsRg0AIABB/QBGDQFBACABNgKwCg8LQQBBACgCsApBAmo2ArAKQQEQKUH9AEYNAEEAKAKwCiEADAELC0EAKALwCSIBIAI2AhAgAUEAKAKwCkECajYCDAttAQJ/AkACQANAAkAgAEH//wNxIgFBd2oiAkEXSw0AQQEgAnRBn4CABHENAgsgAUGgAUYNASAAIQIgARAoDQJBACECQQBBACgCsAoiAEECajYCsAogAC8BAiIADQAMAgsLIAAhAgsgAkH//wNxC6sBAQR/AkACQEEAKAKwCiICLwEAIgNB4QBGDQAgASEEIAAhBQwBC0EAIAJBBGo2ArAKQQEQKSECQQAoArAKIQUCQAJAIAJBIkYNACACQSdGDQAgAhAsGkEAKAKwCiEEDAELIAIQGkEAQQAoArAKQQJqIgQ2ArAKC0EBECkhA0EAKAKwCiECCwJAIAIgBUYNACAFIARBACAAIAAgAUYiAhtBACABIAIbEAILIAMLcgEEf0EAKAKwCiEAQQAoArQKIQECQAJAA0AgAEECaiECIAAgAU8NAQJAAkAgAi8BACIDQaR/ag4CAQQACyACIQAgA0F2ag4EAgEBAgELIABBBGohAAwACwtBACACNgKwChAlQQAPC0EAIAI2ArAKQd0AC0kBA39BACEDAkAgAkUNAAJAA0AgAC0AACIEIAEtAAAiBUcNASABQQFqIQEgAEEBaiEAIAJBf2oiAg0ADAILCyAEIAVrIQMLIAMLC+wBAgBBgAgLzgEAAHgAcABvAHIAdABtAHAAbwByAHQAZgBvAHIAZQB0AGEAbwB1AHIAYwBlAHIAbwBtAHUAbgBjAHQAaQBvAG4AcwBzAGUAcgB0AHYAbwB5AGkAZQBkAGUAbABlAGMAbwBuAHQAaQBuAGkAbgBzAHQAYQBuAHQAeQBiAHIAZQBhAHIAZQB0AHUAcgBkAGUAYgB1AGcAZwBlAGEAdwBhAGkAdABoAHIAdwBoAGkAbABlAGkAZgBjAGEAdABjAGYAaQBuAGEAbABsAGUAbABzAABB0AkLEAEAAAACAAAAAAQAAEA5AAA=",typeof Buffer<"u"?Buffer.from(us,"base64"):Uint8Array.from(atob(us),e=>e.charCodeAt(0)))).then(WebAssembly.instantiate).then(({exports:e})=>{nA=e}),us;et();function cc(e,t){switch(e){case"always":return!0;case"never":return!1;case"ignore":switch(t){case"directory":return!0;case"preserve":case"file":return!1}}}function oA(e,t,r,n){if(!e)return(p,d)=>d();let o={...e,trailingSlash:r,base:t,format:n,domains:{}},s=cA(o),i=uA(o),a=sA(o.locales),l=pA(o),u=p=>{let d=p.url;if(d.pathname===t+"/"||d.pathname===t)return s(p);if(!a(p))return i(p)},c=(p,d)=>{let f=!1,h=p.url;for(let A of h.pathname.split("/"))if(H(A)===H(e.defaultLocale)){f=!0;break}if(f){let A=h.pathname.replace(`/${e.defaultLocale}`,"");return d.headers.set("Location",A),i(p)}};return async(p,d)=>{let f=await d(),h=f.headers.get(rt);if(f.headers.get(ie)==="no"&&typeof e.fallback>"u"||h!=="page"&&h!=="fallback"||iA(p.request,t))return f;let{currentLocale:E}=p;switch(e.strategy){case"manual":return f;case"domains-prefix-other-locales":{if(ps(e,E)){let C=c(p,f);if(C)return C}break}case"pathname-prefix-other-locales":{let C=c(p,f);if(C)return C;break}case"domains-prefix-always-no-redirect":{if(ps(e,E)){let C=i(p,f);if(C)return C}break}case"pathname-prefix-always-no-redirect":{let C=i(p,f);if(C)return C;break}case"pathname-prefix-always":{let C=u(p);if(C)return C;break}case"domains-prefix-always":{if(ps(e,E)){let C=u(p);if(C)return C}break}}return l(p,f)}}function ps(e,t){for(let r of Object.values(e.domainLookupTable))if(r===t)return!1;return!0}function sA(e){return function(t){return uc(t.url.pathname,e)}}function iA(e,t=""){let r=new URL(e.url);return r.pathname.startsWith(`${t}/404`)||r.pathname.startsWith(`${t}/500`)}function uc(e,t){let r=e.split("/");for(let n of r)for(let o of t)if(typeof o=="string"){if(H(n)===H(o))return!0}else if(n===o.path)return!0;return!1}function aA(e,t){for(let r of t)if(typeof r=="string"){if(r===e)return r}else for(let n of r.codes)if(n===e)return r.path;throw new g(xo)}function H(e){return e.replaceAll("_","-").toLowerCase()}function lA(e){return e.map(t=>typeof t=="string"?t:t.codes[0])}function cA({trailingSlash:e,format:t,base:r,defaultLocale:n}){return function(o,s){return cc(e,t)?o.redirect(`${xr(Ce(r,n))}`,s):o.redirect(`${Ce(r,n)}`,s)}}function uA({base:e,locales:t}){return function(r,n){if(n?.headers.get(ie)==="no")return n;let o=r.url;if(!(o.pathname===e+"/"||o.pathname===e||uc(o.pathname,t)))return n?(n.headers.set(ie,"no"),new Response(n.body,{status:404,headers:n.headers})):new Response(null,{status:404,headers:{[ie]:"no"}})}}function pA({fallback:e,locales:t,defaultLocale:r,strategy:n,base:o,fallbackType:s}){return async function(i,a){if(a.status>=300&&e){let l=e?Object.keys(e):[],c=i.url.pathname.split("/").find(p=>{for(let d of t)if(typeof d=="string"){if(d===p)return!0}else if(d.path===p)return!0;return!1});if(c&&l.includes(c)){let p=e[c],d=aA(p,t),f;return d===r&&n==="pathname-prefix-other-locales"?i.url.pathname.includes(`${o}`)?f=i.url.pathname.replace(`/${c}`,""):f=i.url.pathname.replace(`/${c}`,"/"):f=i.url.pathname.replace(`/${c}`,`/${d}`),s==="rewrite"?await i.rewrite(f):i.redirect(f)}}return a}}var dA=new Date(0),nc="deleted",fA=Symbol.for("astro.responseSent"),nn=class{constructor(t){this.value=t}json(){if(this.value===void 0)throw new Error("Cannot convert undefined to an object.");return JSON.parse(this.value)}number(){return Number(this.value)}boolean(){return this.value==="false"||this.value==="0"?!1:!!this.value}},$e=class{#t;#r;#e;#o;constructor(t){this.#t=t,this.#r=null,this.#e=null,this.#o=!1}delete(t,r){let{maxAge:n,expires:o,...s}=r||{},i={expires:dA,...s};this.#s().set(t,[nc,(0,Ut.serialize)(t,nc,i),!1])}get(t,r=void 0){if(this.#e?.has(t)){let[o,,s]=this.#e.get(t);return s?new nn(o):void 0}let n=this.#n(r);if(t in n){let o=n[t];return new nn(o)}}has(t,r=void 0){if(this.#e?.has(t)){let[,,o]=this.#e.get(t);return o}return!!this.#n(r)[t]}set(t,r,n){if(this.#o){let i=new Error(`Astro.cookies.set() was called after the cookies had already been sent to the browser.
This may have happened if this method was called in an imported component.
Please make sure that Astro.cookies.set() is only called in the frontmatter of the main page.`);i.name="Warning",console.warn(i)}let o;if(typeof r=="string")o=r;else{let i=r.toString();i===Object.prototype.toString.call(r)?o=JSON.stringify(r):o=i}let s={};if(n&&Object.assign(s,n),this.#s().set(t,[o,(0,Ut.serialize)(t,o,s),!0]),this.#t[fA])throw new g({...Pe})}merge(t){let r=t.#e;if(r)for(let[n,o]of r)this.#s().set(n,o)}*headers(){if(this.#e!=null)for(let[,t]of this.#e)yield t[1]}static consume(t){return t.#o=!0,t.headers()}#n(t=void 0){return this.#r||this.#a(t),this.#r||(this.#r={}),this.#r}#s(){return this.#e||(this.#e=new Map),this.#e}#a(t=void 0){let r=this.#t.headers.get("cookie");r&&(this.#r=(0,Ut.parse)(r,t))}},pc=Symbol.for("astro.cookies");function hA(e,t){Reflect.set(e,pc,t)}function dc(e){let t=Reflect.get(e,pc);if(t!=null)return t}function*oc(e){let t=dc(e);if(!t)return[];for(let r of $e.consume(t))yield r;return[]}var AA=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),on={debug:20,info:30,warn:40,error:50,silent:90};function ws(e,t,r,n,o=!0){let s=e.level,i=e.dest,a={label:r,level:t,message:n,newLine:o};mA(s,t)&&i.write(a)}function mA(e,t){return on[e]<=on[t]}function fc(e,t,r,n=!0){return ws(e,"info",t,r,n)}function hc(e,t,r,n=!0){return ws(e,"warn",t,r,n)}function Ac(e,t,r,n=!0){return ws(e,"error",t,r,n)}function mc(...e){"_astroGlobalDebug"in globalThis&&globalThis._astroGlobalDebug(...e)}function gA({level:e,label:t}){let r=`${AA.format(new Date)}`,n=[];return e==="error"||e==="warn"?(n.push(Sr(r)),n.push(`[${e.toUpperCase()}]`)):n.push(r),t&&n.push(`[${t}]`),e==="error"?Ga(n.join(" ")):e==="warn"?Va(n.join(" ")):n.length===1?po(n[0]):po(n[0])+" "+za(n.splice(1).join(" "))}var ds=class{options;constructor(t){this.options=t}info(t,r,n=!0){fc(this.options,t,r,n)}warn(t,r,n=!0){hc(this.options,t,r,n)}error(t,r,n=!0){Ac(this.options,t,r,n)}debug(t,...r){mc(t,...r)}level(){return this.options.level}forkIntegrationLogger(t){return new sn(this.options,t)}},sn=class e{options;label;constructor(t,r){this.options=t,this.label=r}fork(t){return new e(this.options,t)}info(t){fc(this.options,this.label,t)}warn(t){hc(this.options,this.label,t)}error(t){Ac(this.options,this.label,t)}debug(t){mc(this.label,t)}},yA={write(e){let t=console.error;return on[e.level]<on.error&&(t=console.log),e.label==="SKIP_FORMAT"?t(e.message):t(gA(e)+" "+e.message),!0}},wA=Symbol.for("astro.actionAPIContext");function gc(e){return"_actionPayload"in e}function sc(e){return t=>{if(!(!gc(e)||t.toString()!==Xl(e._actionPayload.actionName)))return cs(e._actionPayload.actionResult)}}function ic(e){return(t,r)=>(Reflect.set(e,wA,!0),t.bind(e)(r))}function yc(e){if(e==="*")return[{locale:e,qualityValue:void 0}];let t=[],r=e.split(",").map(n=>n.trim());for(let n of r){let o=n.split(";").map(a=>a.trim()),s=o[0],i=o[1];if(o)if(i&&i.startsWith("q=")){let a=Number.parseFloat(i.slice(2));Number.isNaN(a)||a>1?t.push({locale:s,qualityValue:void 0}):t.push({locale:s,qualityValue:a})}else t.push({locale:s,qualityValue:void 0})}return t}function wc(e,t){let r=lA(t).map(H);return e.filter(n=>n.locale!=="*"?r.includes(H(n.locale)):!0).sort((n,o)=>n.qualityValue&&o.qualityValue?Math.sign(o.qualityValue-n.qualityValue):0)}function EA(e,t){let r=e.headers.get("Accept-Language"),n;if(r){let s=wc(yc(r),t).at(0);if(s&&s.locale!=="*")for(let i of t)if(typeof i=="string")H(i)===H(s.locale)&&(n=i);else for(let a of i.codes)H(a)===H(s.locale)&&(n=i.path)}return n}function CA(e,t){let r=e.headers.get("Accept-Language"),n=[];if(r){let o=wc(yc(r),t);if(o.length===1&&o.at(0).locale==="*")return t.map(s=>typeof s=="string"?s:s.codes.at(0));if(o.length>0)for(let s of o)for(let i of t)if(typeof i=="string")H(i)===H(s.locale)&&n.push(i);else for(let a of i.codes)a===s.locale&&n.push(i.path)}return n}function vA(e,t,r){for(let n of e.split("/"))for(let o of t)if(typeof o=="string"){if(!n.includes(o))continue;if(H(o)===H(n))return o}else{if(o.path===n)return o.codes.at(0);for(let s of o.codes)if(H(s)===H(n))return s}for(let n of t)if(typeof n=="string"){if(n===r)return n}else if(n.path===r)return n.codes.at(0)}async function xA(e,t,r){let n=!1,o,i=e(t,async a=>(n=!0,o=r(t,a),o));return await Promise.resolve(i).then(async a=>{if(n)if(typeof a<"u"){if(!(a instanceof Response))throw new g(Rt);return a}else{if(o)return o;throw new g(Rt)}else{if(typeof a>"u")throw new g(Eo);if(a instanceof Response)return a;throw new g(Rt)}})}var SA=["application/x-www-form-urlencoded","multipart/form-data","text/plain"];function BA(){return(e,t)=>{let{request:r,url:n}=e;if(r.method==="GET")return t();let o=(r.method==="POST"||r.method==="PUT"||r.method==="PATCH"||r.method==="DELETE")&&r.headers.get("origin")===n.origin;if(r.headers.has("content-type")){if(IA(r.headers.get("content-type"))&&!o)return new Response(`Cross-site ${r.method} form submissions are forbidden`,{status:403})}else if(!o)return new Response(`Cross-site ${r.method} form submissions are forbidden`,{status:403});return t()}}function IA(e){if(e){for(let t of SA)if(e.toLowerCase().includes(t))return!0}return!1}var bA=["string","number","undefined"];function QA([e,t],r){if(!bA.includes(typeof t))throw new g({...kr,message:kr.message(e,t,typeof t),location:{file:r}})}function kA(e,{ssr:t,route:r}){if((!t||r.prerender)&&!e.getStaticPaths)throw new g({...go,location:{file:r.component}})}function RA(e,t,r){if(!Array.isArray(e))throw new g({...Qr,message:Qr.message(typeof e),location:{file:r.component}});e.forEach(n=>{if(typeof n=="object"&&Array.isArray(n)||n===null)throw new g({...br,message:br.message(Array.isArray(n)?"array":typeof n)});if(n.params===void 0||n.params===null||n.params&&Object.keys(n.params).length===0)throw new g({...mo,location:{file:r.component}});for(let[o,s]of Object.entries(n.params))typeof s>"u"||typeof s=="string"||typeof s=="number"||t.warn("router",`getStaticPaths() returned an invalid path param: "${o}". A string, number or undefined value was expected, but got \`${JSON.stringify(s)}\`.`),typeof s=="string"&&s===""&&t.warn("router",`getStaticPaths() returned an invalid path param: "${o}". \`undefined\` expected for an optional param, but got empty string.`)})}function Ec(e,t){let r=Object.entries(e).reduce((n,o)=>{QA(o,t.component);let[s,i]=o;return i!==void 0&&(n[s]=typeof i=="string"?lo(i):i.toString()),n},{});return t.generate(r)}function DA(e){return function(r,n={}){let{pageSize:o,params:s,props:i}=n,a=o||10,l="page",u=s||{},c=i||{},p;if(e.params.includes(`...${l}`))p=!1;else if(e.params.includes(`${l}`))p=!0;else throw new g({...Nr,message:Nr.message(l)});let d=Math.max(1,Math.ceil(r.length/a));return[...Array(d).keys()].map(h=>{let A=h+1,E=a===1/0?0:(A-1)*a,C=Math.min(E+a,r.length),w={...u,[l]:p||A>1?String(A):void 0},k=jt(e.generate({...w})),P=A===d?void 0:jt(e.generate({...w,page:String(A+1)})),z=A===1?void 0:jt(e.generate({...w,page:!p&&A-1===1?void 0:String(A-1)})),Ke=A===1?void 0:jt(e.generate({...w,page:p?"1":void 0})),v=A===d?void 0:jt(e.generate({...w,page:String(d)}));return{params:w,props:{...c,page:{data:r.slice(E,C),start:E,end:C-1,size:a,total:r.length,currentPage:A,lastPage:d,url:{current:k,next:P,prev:z,first:Ke,last:v}}}}})}}function jt(e){return e===""?"/":e}async function TA({mod:e,route:t,routeCache:r,logger:n,ssr:o}){let s=r.get(t);if(!e)throw new Error("This is an error caused by Astro and not your code. Please file an issue.");if(s?.staticPaths)return s.staticPaths;if(kA(e,{ssr:o,route:t}),o&&!t.prerender){let l=Object.assign([],{keyed:new Map});return r.set(t,{...s,staticPaths:l}),l}let i=[];if(!e.getStaticPaths)throw new Error("Unexpected Error.");i=await e.getStaticPaths({paginate:DA(t)}),RA(i,n,t);let a=i;a.keyed=new Map;for(let l of a){let u=Ec(l.params,t);a.keyed.set(u,l)}return r.set(t,{...s,staticPaths:a}),a}var fs=class{logger;cache={};mode;constructor(t,r="production"){this.logger=t,this.mode=r}clearAll(){this.cache={}}set(t,r){let n=this.key(t);this.mode==="production"&&this.cache[n]?.staticPaths&&this.logger.warn(null,`Internal Warning: route cache overwritten. (${n})`),this.cache[n]=r}get(t){return this.cache[this.key(t)]}key(t){return`${t.route}_${t.component}`}};function NA(e,t,r,n){let o=Ec(t,r),s=e.keyed.get(o);if(s)return s;n.debug("router",`findPathItemByKey() - Unexpected cache miss looking for ${o}`)}function LA(e,t,r){let n=e.map(i=>i.length===1&&i[0].spread?"(?:\\/(.*?))?":"\\/"+i.map(a=>a.spread?"(.*?)":a.dynamic?"([^/]+?)":a.content.normalize().replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("")).join(""),o=r&&e.length?PA(r):"$",s="\\/";return r==="never"&&t!=="/"&&(s=""),new RegExp(`^${n||s}${o}`)}function PA(e){return e==="always"?"\\/$":e==="never"?"$":"\\/?$"}var Cc="/_server-islands/[name]",hs="_server-islands.astro";function _A(e){let t=[[{content:"_server-islands",dynamic:!1,spread:!1}],[{content:"name",dynamic:!0,spread:!1}]];return{type:"page",component:hs,generate:()=>"",params:["name"],segments:t,pattern:LA(t,e.base,e.trailingSlash),prerender:!1,isIndex:!1,fallbackRoutes:[],route:Cc}}function FA(e,t){t.routes.some(r=>r.route==="/_server-islands/[name]")||t.routes.unshift(_A(e))}function MA(e){let t=async n=>{let o=n.params,i=await n.request.text(),a=JSON.parse(i);if(!o.name)return new Response(null,{status:400,statusText:"Bad request"});let l=o.name,u=e.serverIslandMap?.get(l);if(!u)return new Response(null,{status:404,statusText:"Not found"});let c=await e.key,p=a.encryptedProps,d=await ql(c,p),f=JSON.parse(d),A=(await u())[a.componentExport],E={};for(let C in a.slots)E[C]=$l(a.slots[C]);return se`${st(n,"Component",A,f,E)}`};return t.isAstroComponentFactory=!0,{default:t,partial:!0}}function jA(e,t){return Zl(t),FA(e,t),t}function vc(e){let t=new URL(e.hrefRoot);return[{instance:tc,matchesComponent:r=>r.href===new URL(nt,t).href,route:rn.route,component:nt},{instance:MA(e),matchesComponent:r=>r.href===new URL(hs,t).href,route:Cc,component:hs}]}var As=class{constructor(t,r,n,o,s,i,a,l=r.adapterName,u=r.clientDirectives,c=r.inlinedScripts,p=r.compressHTML,d=r.i18n,f=r.middleware,h=new fs(t,n),A=r.site?new URL(r.site):void 0,E=vc(r)){this.logger=t,this.manifest=r,this.mode=n,this.renderers=o,this.resolve=s,this.serverLike=i,this.streaming=a,this.adapterName=l,this.clientDirectives=u,this.inlinedScripts=c,this.compressHTML=p,this.i18n=d,this.middleware=f,this.routeCache=h,this.site=A,this.defaultRoutes=E,this.internalMiddleware=[],d?.strategy!=="manual"&&this.internalMiddleware.push(oA(d,r.base,r.trailingSlash,r.buildFormat))}internalMiddleware;resolvedMiddleware=void 0;async getMiddleware(){if(this.resolvedMiddleware)return this.resolvedMiddleware;if(this.middleware){let r=(await this.middleware()).onRequest??lt;return this.manifest.checkOrigin?this.resolvedMiddleware=xc(BA(),r):this.resolvedMiddleware=r,this.resolvedMiddleware}else return this.resolvedMiddleware=lt,this.resolvedMiddleware}};function $A(e){return e?.type==="redirect"}function UA(e){return e?.type==="fallback"}var OA={default(){return new Response(null,{status:301})}},HA={page:()=>Promise.resolve(OA),onRequest:(e,t)=>t(),renderers:[]};async function KA(e){let{request:{method:t},routeData:r}=e,{redirect:n,redirectRoute:o}=r,s=o&&typeof n=="object"?n.status:t==="GET"?301:308,i={location:encodeURI(qA(e))};return new Response(null,{status:s,headers:i})}function qA(e){let{params:t,routeData:{redirect:r,redirectRoute:n}}=e;if(typeof n<"u")return n?.generate(t)||n?.pathname||"/";if(typeof r=="string"){let o=r;for(let s of Object.keys(t)){let i=t[s];o=o.replace(`[${s}]`,i).replace(`[...${s}]`,i)}return o}else if(typeof r>"u")return"/";return r.destination}async function JA(e){let{logger:t,mod:r,routeData:n,routeCache:o,pathname:s,serverLike:i}=e;if(!n||n.pathname)return{};if($A(n)||UA(n)||n.component===nt)return{};let a=await TA({mod:r,route:n,routeCache:o,logger:t,ssr:i}),l=$t(n,s),u=NA(a,l,n,t);if(!u&&(!i||n.prerender))throw new g({...bt,message:bt.message(s),hint:bt.hint([n.component])});return r&&GA(n,r,l),u?.props?{...u.props}:{}}function $t(e,t){if(!e.params.length)return{};let r=e.pattern.exec(decodeURIComponent(t));if(!r)return{};let n={};return e.params.forEach((o,s)=>{o.startsWith("...")?n[o.slice(3)]=r[s+1]?r[s+1]:void 0:n[o]=r[s+1]}),n}function GA(e,t,r){if(e.type==="endpoint"&&t.getStaticPaths){let n=e.segments[e.segments.length-1],o=Object.values(r),s=o[o.length-1];if(n.length===1&&n[0].dynamic&&s===void 0)throw new g({...kt,message:kt.message(e.route),hint:kt.hint(e.component),location:{file:e.component}})}}function VA(e){if(!e)return;let t=e?.expressions?.filter(r=>Yo(r)===!1);if(t?.length===1)return t[0]}var ms=class{#t;#r;#e;constructor(t,r,n){if(this.#t=t,this.#r=r,this.#e=n,r)for(let o of Object.keys(r)){if(this[o]!==void 0)throw new g({...Rr,message:Rr.message(o)});Object.defineProperty(this,o,{get(){return!0},enumerable:!0})}}has(t){return this.#r?!!this.#r[t]:!1}async render(t,r=[]){if(!this.#r||!this.has(t))return;let n=this.#t;if(!Array.isArray(r))this.#e.warn(null,`Expected second parameter to be an array, received a ${typeof r}. If you're trying to pass an array as a single argument and getting unexpected results, make sure you're passing your array as a item of an array. Ex: Astro.slots.render('default', [["Hello", "World"]])`);else if(r.length>0){let i=this.#r[t],a=typeof i=="function"?await i(n):await i,l=VA(a);if(l)return await Ie(n,async()=>typeof l=="function"?l(...r):l).then(c=>c);if(typeof a=="function")return await Se(n,a(...r)).then(u=>u!=null?String(u):u)}let o=await Ie(n,this.#r[t]);return Be(n,o)}};function xc(...e){let t=e.filter(n=>!!n),r=t.length;return r?(n,o)=>{let s;return i(0,n);function i(a,l){let u=t[a];return u(l,async p=>{if(a<r-1){if(p){let d;p instanceof Request?d=p:p instanceof URL?d=new Request(p,l.request):d=new Request(new URL(p,l.url.origin),l.request);let f=Reflect.get(l,Sc),{routeData:h,pathname:A}=await f.tryRewrite(p,l.request);s=p,l.request=d,l.url=new URL(d.url),l.cookies=new $e(d),l.params=$t(h,A)}return i(a+1,l)}else return o(p??s)})}}:(n,o)=>o()}function ac(e,t){let r=decodeURI(e);return t.routes.find(n=>n.pattern.test(r)||n.fallbackRoutes.some(o=>o.pattern.test(r)))}function zA(e){return e.pattern.test("/404")||e.pattern.test("/500")}function YA({payload:e,routes:t,request:r,trailingSlash:n,buildFormat:o,base:s}){let i;e instanceof URL?i=e:e instanceof Request?i=new URL(e.url):i=new URL(e,new URL(r.url).origin);let a=i.pathname;s!=="/"&&i.pathname.startsWith(s)&&(a=cc(n,o)?xr(i.pathname):St(i.pathname),a=a.slice(s.length));let l;for(let u of t)if(u.pattern.test(decodeURI(a))){l=u;break}if(l)return{routeData:l,newUrl:i,pathname:a};{let u=t.find(c=>c.route==="/404");return u?{routeData:u,newUrl:i,pathname:a}:{routeData:rn,newUrl:i,pathname:a}}}function lc(e,t){if(t.bodyUsed)throw new g(So);return new Request(e,{method:t.method,headers:t.headers,body:t.body,referrer:t.referrer,referrerPolicy:t.referrerPolicy,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,integrity:t.integrity,signal:t.signal,keepalive:t.keepalive,duplex:"half"})}function WA(e,t){Reflect.set(e,Bl,encodeURIComponent(t))}var Sc=Symbol.for("context.routes"),an=class e{constructor(t,r,n,o,s,i,a,l=new $e(s),u=$t(i,o),c=new URL(s.url),p={},d=void 0){this.pipeline=t,this.locals=r,this.middleware=n,this.pathname=o,this.request=s,this.routeData=i,this.status=a,this.cookies=l,this.params=u,this.url=c,this.props=p,this.partial=d}isRewriting=!1;counter=0;static async create({locals:t={},middleware:r,pathname:n,pipeline:o,request:s,routeData:i,status:a=200,props:l,partial:u=void 0}){let c=await o.getMiddleware();return WA(s,n),new e(o,t,xc(...o.internalMiddleware,r??c),n,s,i,a,void 0,void 0,void 0,l,u)}async render(t,r={}){let{cookies:n,middleware:o,pipeline:s}=this,{logger:i,serverLike:a,streaming:l}=s,u=!a||this.routeData.prerender,c=Object.keys(this.props).length>0?this.props:await JA({mod:t,routeData:this.routeData,routeCache:this.pipeline.routeCache,pathname:this.pathname,logger:i,serverLike:a}),p=this.createAPIContext(c,u);if(this.counter++,this.counter===4)return new Response("Loop Detected",{status:508,statusText:"Astro detected a loop where you tried to call the rewriting logic more than four times."});let f=await xA(o,p,async(h,A)=>{if(A){s.logger.debug("router","Called rewriting to:",A);let{routeData:w,componentInstance:k,pathname:P,newUrl:z}=await s.tryRewrite(A,this.request);this.routeData=w,t=k,A instanceof Request?this.request=A:this.request=lc(z,this.request),this.isRewriting=!0,this.url=new URL(this.request.url),this.cookies=new $e(this.request),this.params=$t(w,P),this.pathname=P,this.status=200}let E;switch(this.routeData.type){case"endpoint":{E=await Il(t,h,a,i);break}case"redirect":return KA(this);case"page":{let w=await this.createResult(t);try{E=await Gl(w,t?.default,c,r,l,this.routeData)}catch(k){throw w.cancelled=!0,k}E.headers.set(rt,"page"),(this.routeData.route==="/404"||this.routeData.route==="/500")&&E.headers.set(ie,"no"),this.isRewriting&&E.headers.set(vl,xl);break}case"fallback":return new Response(null,{status:500,headers:{[rt]:"fallback"}})}let C=dc(E);return C&&n.merge(C),E});return f.headers.get(rt)&&f.headers.delete(rt),hA(f,n),f}createAPIContext(t,r){let n=this.createActionAPIContext(),o=(s,i=302)=>new Response(null,{status:i,headers:{Location:s}});return Reflect.set(n,Sc,this.pipeline),Object.assign(n,{props:t,redirect:o,getActionResult:sc(n.locals),callAction:ic(n),_isPrerendered:r})}async#t(t){this.pipeline.logger.debug("router","Calling rewrite: ",t);let{routeData:r,componentInstance:n,newUrl:o,pathname:s}=await this.pipeline.tryRewrite(t,this.request);return this.routeData=r,t instanceof Request?this.request=t:this.request=lc(o,this.request),this.url=new URL(this.request.url),this.cookies=new $e(this.request),this.params=$t(r,s),this.pathname=s,this.isRewriting=!0,this.status=200,await this.render(n)}createActionAPIContext(){let t=this,{cookies:r,params:n,pipeline:o,url:s}=this,i=`Astro v${Go}`;return{cookies:r,get clientAddress(){return t.clientAddress()},get currentLocale(){return t.computeCurrentLocale()},generator:i,get locals(){return t.locals},set locals(l){if(typeof l!="object")throw new g(Fr);t.locals=l,Reflect.set(this.request,zo,l)},params:n,get preferredLocale(){return t.computePreferredLocale()},get preferredLocaleList(){return t.computePreferredLocaleList()},rewrite:async l=>await this.#t(l),request:this.request,site:o.site,url:s}}async createResult(t){let{cookies:r,pathname:n,pipeline:o,routeData:s,status:i}=this,{clientDirectives:a,inlinedScripts:l,compressHTML:u,manifest:c,renderers:p,resolve:d}=o,{links:f,scripts:h,styles:A}=await o.headElements(s),E=await o.componentMetadata(s)??c.componentMetadata,C=new Headers({"Content-Type":"text/html"}),w=typeof this.partial=="boolean"?this.partial:!!t.partial,k={status:i,statusText:"OK",get headers(){return C},set headers(Ke){throw new g(vo)}},P=gc(this.locals)?cs(this.locals._actionPayload.actionResult):void 0,z={base:c.base,cancelled:!1,clientDirectives:a,inlinedScripts:l,componentMetadata:E,compressHTML:u,cookies:r,createAstro:(Ke,v,b)=>this.createAstro(z,Ke,v,b),links:f,params:this.params,partial:w,pathname:n,renderers:p,resolve:d,response:k,request:this.request,scripts:h,styles:A,actionResult:P,serverIslandNameMap:c.serverIslandNameMap??new Map,key:c.key,trailingSlash:c.trailingSlash,_metadata:{hasHydrationScript:!1,rendererSpecificHydrationScripts:new Set,hasRenderedHead:!1,renderedScripts:new Set,hasDirectives:new Set,headInTree:!1,extraHead:[],propagators:new Set}};return z}#r;createAstro(t,r,n,o){let s;this.isRewriting?s=this.#r=this.createAstroPagePartial(t,r):s=this.#r??=this.createAstroPagePartial(t,r);let i={props:n,self:null},a=Object.assign(Object.create(s),i),l;return Object.defineProperty(a,"slots",{get:()=>(l||(l=new ms(t,o,this.pipeline.logger)),l)}),a}createAstroPagePartial(t,r){let n=this,{cookies:o,locals:s,params:i,pipeline:a,url:l}=this,{response:u}=t,c=(d,f=302)=>{if(this.request[Xr])throw new g({...Pe});return new Response(null,{status:f,headers:{Location:d}})},p=async d=>await this.#t(d);return{generator:r.generator,glob:r.glob,cookies:o,get clientAddress(){return n.clientAddress()},get currentLocale(){return n.computeCurrentLocale()},params:i,get preferredLocale(){return n.computePreferredLocale()},get preferredLocaleList(){return n.computePreferredLocaleList()},locals:s,redirect:c,rewrite:p,request:this.request,response:u,site:a.site,getActionResult:sc(s),get callAction(){return ic(this)},url:l}}clientAddress(){let{pipeline:t,request:r}=this;if(Wr in r)return Reflect.get(r,Wr);if(t.serverLike){if(r.body===null)throw new g(fo);if(t.adapterName)throw new g({...Br,message:Br.message(t.adapterName)})}throw new g(ho)}#e;computeCurrentLocale(){let{url:t,pipeline:{i18n:r},routeData:n}=this;if(!r)return;let{defaultLocale:o,locales:s,strategy:i}=r,a=i==="pathname-prefix-other-locales"||i==="domains-prefix-other-locales"?o:void 0;if(this.#e)return this.#e;let l,u=n.pathname&&!zA(n)?n.pathname:t.pathname;return l=vA(u,s,o),this.#e=l??a,this.#e}#o;computePreferredLocale(){let{pipeline:{i18n:t},request:r}=this;if(t)return this.#o??=EA(r,t.locales)}#n;computePreferredLocaleList(){let{pipeline:{i18n:t},request:r}=this;if(t)return this.#n??=CA(r,t.locales)}};function XA(e,t){if(!t)return"";if(typeof t=="string")return t;let r=e.slice(1);return t[r]?t[r]:t.fallback}function Es(e,t,r){if(r){let n=XA(Oa(e),r);return Ce(n,co(e))}else return t?xt(Ce(t,co(e))):e}function ZA(e,t,r){return e.type==="inline"?{props:{},children:e.content}:{props:{rel:"stylesheet",href:Es(e.src,t,r)},children:""}}function em(e,t,r){return new Set(e.map(n=>ZA(n,t,r)))}function tm(e,t,r){return e.type==="external"?rm(e.value,t,r):{props:{type:"module"},children:e.value}}function rm(e,t,r){return{props:{type:"module",src:Es(e,t,r)},children:""}}var gs=class e extends As{#t;static create(t,{logger:r,manifest:n,mode:o,renderers:s,resolve:i,serverLike:a,streaming:l,defaultRoutes:u}){let c=new e(r,n,o,s,i,a,l,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,u);return c.#t=t,c}headElements(t){let r=this.manifest.routes.find(i=>i.routeData===t),n=new Set,o=new Set,s=em(r?.styles??[]);for(let i of r?.scripts??[])"stage"in i?i.stage==="head-inline"&&o.add({props:{},children:i.children}):o.add(tm(i));return{links:n,styles:s,scripts:o}}componentMetadata(){}async getComponentByRoute(t){return(await this.getModuleForRoute(t)).page()}async tryRewrite(t,r){let{newUrl:n,pathname:o,routeData:s}=YA({payload:t,request:r,routes:this.manifest?.routes.map(a=>a.routeData),trailingSlash:this.manifest.trailingSlash,buildFormat:this.manifest.buildFormat,base:this.manifest.base}),i=await this.getComponentByRoute(s);return{newUrl:n,pathname:o,componentInstance:i,routeData:s}}async getModuleForRoute(t){for(let r of this.defaultRoutes)if(t.component===r.component)return{page:()=>Promise.resolve(r.instance),renderers:[]};if(t.type==="redirect")return HA;if(this.manifest.pageMap){let r=this.manifest.pageMap.get(t.component);if(!r)throw new Error(`Unexpectedly unable to find a component instance for route ${t.route}`);return await r()}else if(this.manifest.pageModule)return this.manifest.pageModule;throw new Error("Astro couldn't find the correct page to render, probably because it wasn't correctly mapped for SSR usage. This is an internal error, please file an issue.")}},ys=class e{#t;#r;#e=new ds({dest:yA,level:"info"});#o;#n;#s;#a=!1;constructor(t,r=!0){this.#t=t,this.#r=jA(t,{routes:t.routes.map(n=>n.routeData)}),this.#o=St(this.#t.base),this.#n=this.#u(this.#r,r),this.#s=new sn(this.#e.options,this.#t.adapterName)}getAdapterLogger(){return this.#s}#u(t,r=!1){return gs.create(t,{logger:this.#e,manifest:this.#t,mode:"production",renderers:this.#t.renderers,defaultRoutes:vc(this.#t),resolve:async n=>{if(!(n in this.#t.entryModules))throw new Error(`Unable to resolve [${n}]`);let o=this.#t.entryModules[n];return o.startsWith("data:")||o.length===0?o:Es(o,this.#t.base,this.#t.assetsPrefix)},serverLike:!0,streaming:r})}set setManifestData(t){this.#r=t}removeBase(t){return t.startsWith(this.#t.base)?t.slice(this.#o.length+1):t}#c(t){let r=new URL(t.url);return xt(this.removeBase(r.pathname))}match(t){let r=new URL(t.url);if(this.#t.assets.has(r.pathname))return;let n=this.#p(t);n||(n=xt(this.removeBase(r.pathname)));let o=ac(n,this.#r);if(!(!o||o.prerender))return o}#p(t){let r,n=new URL(t.url);if(this.#t.i18n&&(this.#t.i18n.strategy==="domains-prefix-always"||this.#t.i18n.strategy==="domains-prefix-other-locales"||this.#t.i18n.strategy==="domains-prefix-always-no-redirect")){let o=t.headers.get("X-Forwarded-Host"),s=t.headers.get("X-Forwarded-Proto");if(s?s=s+":":s=n.protocol,o||(o=t.headers.get("Host")),o&&s){o=o.split(":")[0];try{let i,a=new URL(`${s}//${o}`);for(let[l,u]of Object.entries(this.#t.i18n.domainLookupTable)){let c=new URL(l);if(a.host===c.host&&a.protocol===c.protocol){i=u;break}}i&&(r=xt(Ce(H(i),this.removeBase(n.pathname))),n.pathname.endsWith("/")&&(r=xr(r)))}catch(i){this.#e.error("router",`Astro tried to parse ${s}//${o} as an URL, but it threw a parsing error. Check the X-Forwarded-Host and X-Forwarded-Proto headers.`),this.#e.error("router",`Error: ${i}`)}}}return r}async render(t,r,n){let o,s,i,a;if(r&&("addCookieHeader"in r||"clientAddress"in r||"locals"in r||"routeData"in r)?("addCookieHeader"in r&&(a=r.addCookieHeader),"clientAddress"in r&&(i=r.clientAddress),"routeData"in r&&(o=r.routeData),"locals"in r&&(s=r.locals)):(o=r,s=n,(r||s)&&this.#d()),o&&(this.#e.debug("router","The adapter "+this.#t.adapterName+" provided a custom RouteData for ",t.url),this.#e.debug("router",`RouteData:
`+o)),s){if(typeof s!="object"){let p=new g(Fr);return this.#e.error(null,p.stack),this.#i(t,{status:500,error:p})}Reflect.set(t,zo,s)}if(i&&Reflect.set(t,Wr,i),o||(o=this.match(t),this.#e.debug("router","Astro matched the following route for "+t.url),this.#e.debug("router",`RouteData:
`+o)),!o)return this.#e.debug("router","Astro hasn't found routes that match "+t.url),this.#e.debug("router",`Here's the available routes:
`,this.#r),this.#i(t,{locals:s,status:404});let l=this.#c(t),u=this.#f(o,l),c;try{let p=await this.#n.getModuleForRoute(o);c=await(await an.create({pipeline:this.#n,locals:s,pathname:l,request:t,routeData:o,status:u})).render(await p.page())}catch(p){return this.#e.error(null,p.stack||p.message||String(p)),this.#i(t,{locals:s,status:500,error:p})}if(Vo.includes(c.status)&&c.headers.get(ie)!=="no")return this.#i(t,{locals:s,response:c,status:c.status,error:c.status===500?null:void 0});if(c.headers.has(ie)&&c.headers.delete(ie),a)for(let p of e.getSetCookieFromResponse(c))c.headers.append("set-cookie",p);return Reflect.set(c,Xr,!0),c}#d(){this.#a||(this.#e.warn("deprecated",`The adapter ${this.#t.adapterName} is using a deprecated signature of the 'app.render()' method. From Astro 4.0, locals and routeData are provided as properties on an optional object to this method. Using the old signature will cause an error in Astro 5.0. See https://github.com/withastro/astro/pull/9199 for more information.`),this.#a=!0)}setCookieHeaders(t){return oc(t)}static getSetCookieFromResponse=oc;async#i(t,{locals:r,status:n,response:o,skipMiddleware:s=!1,error:i}){let a=`/${n}${this.#t.trailingSlash==="always"?"/":""}`,l=ac(a,this.#r),u=new URL(t.url);if(l){if(l.prerender){let d=l.route.endsWith(`/${n}`)?".html":"",f=new URL(`${this.#o}/${n}${d}`,u);if(f.toString()!==t.url){let h=await fetch(f.toString()),A={status:n};return this.#l(h,o,A)}}let p=await this.#n.getModuleForRoute(l);try{let f=await(await an.create({locals:r,pipeline:this.#n,middleware:s?lt:void 0,pathname:this.#c(t),request:t,routeData:l,status:n,props:{error:i}})).render(await p.page());return this.#l(f,o)}catch{if(s===!1)return this.#i(t,{locals:r,status:n,response:o,skipMiddleware:!0})}}let c=this.#l(new Response(null,{status:n}),o);return Reflect.set(c,Xr,!0),c}#l(t,r,n){if(!r)return n!==void 0?new Response(t.body,{status:n.status,statusText:t.statusText,headers:t.headers}):t;let o=n?.status?n.status:r.status===200?t.status:r.status;try{r.headers.delete("Content-type")}catch{}return new Response(t.body,{status:o,statusText:o===200?t.statusText:r.statusText,headers:new Headers([...Array.from(t.headers),...Array.from(r.headers)])})}#f(t,r){if(!t.pattern.test(r)){for(let o of t.fallbackRoutes)if(o.pattern.test(r))return 302}let n=St(t.route);return n.endsWith("/404")?404:n.endsWith("/500")?500:200}},nm=typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]";function om(){return new Proxy({},{get:(e,t)=>{console.warn(`Unable to access \`import.meta\0.env.${t.toString()}\` on initialization as the Cloudflare platform only provides the environment variables per request. Please move the environment variable access inside a function that's only called after a request has been received.`)}})}nm||(process.env=om());function Cs(e){let t=new ys(e);return{onRequest:async n=>{let o=n.request,{env:s}=n;process.env=s;let{pathname:i}=new URL(o.url);if(e.assets.has(i))return s.ASSETS.fetch(o);let a=t.match(o);Reflect.set(o,Symbol.for("astro.clientAddress"),o.headers.get("cf-connecting-ip"));let l={runtime:{waitUntil:c=>{n.waitUntil(c)},env:n.env,cf:o.cf,caches}},u=await t.render(o,a,l);if(t.setCookieHeaders)for(let c of t.setCookieHeaders(u))u.headers.append("Set-Cookie",c);return u},manifest:e}}var vs=Object.freeze(Object.defineProperty({__proto__:null,createExports:Cs},Symbol.toStringTag,{value:"Module"}));Bt();var H0=Qe(ss(),1);It();it();et();function sm(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>typeof r=="string"?[t,r.normalize().replace(/#/g,"%23").replace(/\?/g,"%3F")]:[t,r]))}function im(e,t){if(e.spread)return t[e.content.slice(3)]||"";if(e.dynamic){if(!t[e.content])throw new TypeError(`Missing parameter: ${e.content}`);return t[e.content]}return e.content.normalize().replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/%5B/g,"[").replace(/%5D/g,"]")}function am(e,t){let r=e.map(n=>im(n,t)).join("");return r?"/"+r:""}function lm(e,t){return r=>{let n=sm(r),o="";return t==="always"&&e.length&&(o="/"),e.map(i=>am(i,n)).join("")+o||"/"}}function ln(e){return{route:e.route,type:e.type,pattern:new RegExp(e.pattern),params:e.params,component:e.component,generate:lm(e.segments,e._meta.trailingSlash),pathname:e.pathname||void 0,segments:e.segments,prerender:e.prerender,redirect:e.redirect,redirectRoute:e.redirectRoute?ln(e.redirectRoute):void 0,fallbackRoutes:e.fallbackRoutes.map(t=>ln(t)),isIndex:e.isIndex}}function cm(e){let t=[];for(let l of e.routes){t.push({...l,routeData:ln(l.routeData)});let u=l;u.routeData=ln(l.routeData)}let r=new Set(e.assets),n=new Map(e.componentMetadata),o=new Map(e.inlinedScripts),s=new Map(e.clientDirectives),i=new Map(e.serverIslandNameMap),a=Kl(e.key);return{middleware(){return{onRequest:lt}},...e,assets:r,componentMetadata:n,inlinedScripts:o,clientDirectives:s,routes:t,serverIslandNameMap:i,key:a}}var Bc=cm({hrefRoot:"file:///home/snoob/Documents/GitHub/thelorebook/apps/astro/",adapterName:"@astrojs/cloudflare",routes:[{file:"",links:[],scripts:[],styles:[],routeData:{type:"endpoint",isIndex:!1,route:"/_image",pattern:"^\\/_image$",segments:[[{content:"_image",dynamic:!1,spread:!1}]],params:[],component:"../../node_modules/astro/dist/assets/endpoint/generic.js",pathname:"/_image",prerender:!1,fallbackRoutes:[],_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],styles:[{type:"external",src:"/_astro/index.CDssZtat.css"}],routeData:{route:"/",isIndex:!0,type:"page",pattern:"^\\/$",segments:[],params:[],component:"src/pages/index.astro",pathname:"/",prerender:!1,fallbackRoutes:[],_meta:{trailingSlash:"ignore"}}}],base:"/",trailingSlash:"ignore",compressHTML:!0,componentMetadata:[["/home/snoob/Documents/GitHub/thelorebook/apps/astro/src/pages/index.astro",{propagation:"none",containsHead:!0}]],renderers:[],clientDirectives:[["idle",'(()=>{var l=(o,t)=>{let i=async()=>{await(await o())()},e=typeof t.value=="object"?t.value:void 0,s={timeout:e==null?void 0:e.timeout};"requestIdleCallback"in window?window.requestIdleCallback(i,s):setTimeout(i,s.timeout||200)};(self.Astro||(self.Astro={})).idle=l;window.dispatchEvent(new Event("astro:idle"));})();'],["load",'(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();'],["media",'(()=>{var s=(i,t)=>{let a=async()=>{await(await i())()};if(t.value){let e=matchMedia(t.value);e.matches?a():e.addEventListener("change",a,{once:!0})}};(self.Astro||(self.Astro={})).media=s;window.dispatchEvent(new Event("astro:media"));})();'],["only",'(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();'],["visible",'(()=>{var l=(s,i,o)=>{let r=async()=>{await(await s())()},t=typeof i.value=="object"?i.value:void 0,c={rootMargin:t==null?void 0:t.rootMargin},n=new IntersectionObserver(e=>{for(let a of e)if(a.isIntersecting){n.disconnect(),r();break}},c);for(let e of o.children)n.observe(e)};(self.Astro||(self.Astro={})).visible=l;window.dispatchEvent(new Event("astro:visible"));})();']],entryModules:{"\0noop-middleware":"_noop-middleware.mjs","\0@astro-page:../../node_modules/astro/dist/assets/endpoint/generic@_@js":"pages/_image.astro.mjs","\0@astro-page:src/pages/index@_@astro":"pages/index.astro.mjs","\0@astrojs-ssr-virtual-entry":"_worker.mjs","\0@astro-renderers":"renderers.mjs","\0@astrojs-ssr-adapter":"_@astrojs-ssr-adapter.mjs","\0@astrojs-manifest":"manifest_CxoDNvAq.mjs","/home/snoob/Documents/GitHub/thelorebook/node_modules/@astrojs/react/vnode-children.js":"chunks/vnode-children_BkR_XoPb.mjs","/home/snoob/Documents/GitHub/thelorebook/apps/astro/src/components/react/hero.tsx":"_astro/hero.Bzp6wT6v.js","@astrojs/react/client.js":"_astro/client.BIGLHmRd.js","astro:scripts/before-hydration.js":""},inlinedScripts:[],assets:["/_astro/index.CDssZtat.css","/favicon.svg","/$server_build/_@astrojs-ssr-adapter.mjs","/$server_build/_noop-middleware.mjs","/$server_build/_worker.mjs","/$server_build/renderers.mjs","/_astro/client.BIGLHmRd.js","/_astro/hero.Bzp6wT6v.js","/_astro/index.DhYZZe0J.js","/$server_build/_astro/index.CDssZtat.css","/$server_build/chunks/_@astrojs-ssr-adapter_Jt8MxScX.mjs","/$server_build/chunks/astro-designed-error-pages_Bziop198.mjs","/$server_build/chunks/astro_gteJLWDK.mjs","/$server_build/chunks/vnode-children_BkR_XoPb.mjs","/$server_build/pages/_image.astro.mjs","/$server_build/pages/index.astro.mjs","/$server_build/chunks/astro/assets-service_FHeALfmD.mjs","/$server_build/chunks/astro/server_DjuvqM6M.mjs"],buildFormat:"directory",checkOrigin:!1,serverIslandNameMap:[],key:"XMx2cgpZ/xP5iNDxFIYEdMfkSIpd4Oncrc+lmRD2js0=",experimentalEnvGetSecretEnabled:!1});var zg=()=>Promise.resolve().then(()=>(Hc(),Oc)),Yg=()=>Promise.resolve().then(()=>(Yc(),zc)),Wg=new Map([["../../node_modules/astro/dist/assets/endpoint/generic.js",zg],["src/pages/index.astro",Yg]]),Xg=new Map,eu=Object.assign(Bc,{pageMap:Wg,serverIslandMap:Xg,renderers:Ye,middleware:()=>Promise.resolve().then(()=>(Xc(),Wc))}),Zg=void 0,tu=Cs(eu),uw=tu.onRequest,pw=tu.manifest,Zc="start";Zc in vs&&vs[Zc](eu,Zg);export{pw as manifest,uw as onRequest,Wg as pageMap};
/**
 * shortdash - https://github.com/bibig/node-shorthash
 *
 * @license
 *
 * (The MIT License)
 *
 * Copyright (c) 2013 Bibig <bibig@me.com>
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-server-legacy.browser.production.min.js:
  (**
   * @license React
   * react-dom-server-legacy.browser.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-server.browser.production.min.js:
  (**
   * @license React
   * react-dom-server.browser.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

cssesc/cssesc.js:
  (*! https://mths.be/cssesc v3.0.0 by @mathias *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
</file>

<file path="apps/astro/package.json">
{
  "name": "@acme/astro",
  "type": "module",
  "version": "0.0.1",
  "scripts": {
    "dev": "astro dev",
    "start": "astro dev",
    "build": "astro check && astro build",
    "preview": "astro preview",
    "astro": "astro",
    "clean": "git clean -xdf .cache .next .turbo node_modules",
    "deploy": "wrangler pages deploy dist",
    "deploy:prod": "wrangler pages deploy dist --env production"
  },
  "dependencies": {
    "@astrojs/check": "^0.9.4",
    "@astrojs/cloudflare": "^8.1.0",
    "@astrojs/react": "^3.6.2",
    "@astrojs/tailwind": "^5.1.1",
    "@headlessui/react": "^2.1.9",
    "@radix-ui/react-dialog": "^1.1.2",
    "@radix-ui/react-icons": "^1.3.0",
    "@radix-ui/react-slot": "^1.1.0",
    "astro": "^4.15.12",
    "class-variance-authority": "^0.7.0",
    "clsx": "^2.1.1",
    "framer-motion": "^11.11.1",
    "lucide-react": "^0.447.0",
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "react-player": "^2.16.0",
    "tailwind-merge": "^2.5.4",
    "tailwindcss-animate": "^1.0.7",
    "typescript": "^5.3.3"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/prettier-config": "workspace:*",
    "@acme/tailwind-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "@types/react": "~18.3.12",
    "@types/react-dom": "18.3.0",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.47",
    "tailwindcss": "^3.4.13"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="apps/astro/postcss.config.js">
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="apps/astro/public/favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 128 128">
    <path d="M50.4 78.5a75.1 75.1 0 0 0-28.5 6.9l24.2-65.7c.7-2 1.9-3.2 3.4-3.2h29c1.5 0 2.7 1.2 3.4 3.2l24.2 65.7s-11.6-7-28.5-7L67 45.5c-.4-1.7-1.6-2.8-2.9-2.8-1.3 0-2.5 1.1-2.9 2.7L50.4 78.5Zm-1.1 28.2Zm-4.2-20.2c-2 6.6-.6 15.8 4.2 20.2a17.5 17.5 0 0 1 .2-.7 5.5 5.5 0 0 1 5.7-4.5c2.8.1 4.3 1.5 4.7 4.7.2 1.1.2 2.3.2 3.5v.4c0 2.7.7 5.2 2.2 7.4a13 13 0 0 0 5.7 4.9v-.3l-.2-.3c-1.8-5.6-.5-9.5 4.4-12.8l1.5-1a73 73 0 0 0 3.2-2.2 16 16 0 0 0 6.8-11.4c.3-2 .1-4-.6-6l-.8.6-1.6 1a37 37 0 0 1-22.4 2.7c-5-.7-9.7-2-13.2-6.2Z" />
    <style>
        path { fill: #000; }
        @media (prefers-color-scheme: dark) {
            path { fill: #FFF; }
        }
    </style>
</svg>
</file>

<file path="apps/astro/README.md">
# Astro Starter Kit: Minimal

```sh
npm create astro@latest -- --template minimal
```

[![Open in StackBlitz](https://developer.stackblitz.com/img/open_in_stackblitz.svg)](https://stackblitz.com/github/withastro/astro/tree/latest/examples/minimal)
[![Open with CodeSandbox](https://assets.codesandbox.io/github/button-edit-lime.svg)](https://codesandbox.io/p/sandbox/github/withastro/astro/tree/latest/examples/minimal)
[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/withastro/astro?devcontainer_path=.devcontainer/minimal/devcontainer.json)

> 🧑‍🚀 **Seasoned astronaut?** Delete this file. Have fun!

## 🚀 Project Structure

Inside of your Astro project, you'll see the following folders and files:

```text
/
├── public/
├── src/
│   └── pages/
│       └── index.astro
└── package.json
```

Astro looks for `.astro` or `.md` files in the `src/pages/` directory. Each page is exposed as a route based on its file name.

There's nothing special about `src/components/`, but that's where we like to put any Astro/React/Vue/Svelte/Preact components.

Any static assets, like images, can be placed in the `public/` directory.

## 🧞 Commands

All commands are run from the root of the project, from a terminal:

| Command                   | Action                                           |
| :------------------------ | :----------------------------------------------- |
| `npm install`             | Installs dependencies                            |
| `npm run dev`             | Starts local dev server at `localhost:4321`      |
| `npm run build`           | Build your production site to `./dist/`          |
| `npm run preview`         | Preview your build locally, before deploying     |
| `npm run astro ...`       | Run CLI commands like `astro add`, `astro check` |
| `npm run astro -- --help` | Get help using the Astro CLI                     |

## 👀 Want to learn more?

Feel free to check [our documentation](https://docs.astro.build) or jump into our [Discord server](https://astro.build/chat).
</file>

<file path="apps/astro/src/components/react/hero.tsx">
export function Hero() {
  return (
    <div className="bg-white">
      <div className="mx-auto max-w-7xl px-4 py-24 text-center sm:px-6 md:py-48 lg:px-8">
        <span className="font-serif text-xl uppercase tracking-widest text-gray-500">
          The Lore Book
        </span>
        <h2 className="font-avenir-reg mt-2 text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl">
          Create compelling narratives for your life.
        </h2>

        <p className="mx-auto mt-6 max-w-2xl text-lg text-gray-500">
          Download now
        </p>
      </div>
    </div>
  );
}
</file>

<file path="apps/astro/src/components/ui/button.tsx">
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive:
          "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline:
          "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary:
          "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }
</file>

<file path="apps/astro/src/components/ui/dialog.tsx">
import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { Cross2Icon } from "@radix-ui/react-icons"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <Cross2Icon className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    )}
    {...props}
  />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogTrigger,
  DialogClose,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}
</file>

<file path="apps/astro/src/components/ui/input.tsx">
import * as React from "react"

import { cn } from "@/lib/utils"

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement> {}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }
</file>

<file path="apps/astro/src/env.d.ts">
/// <reference types="astro/client" />
</file>

<file path="apps/astro/src/layouts/Layout.astro">
---
import '../styles/globals.css';
// Example prop for page titles (you can add more props as needed)
export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <title>{title}</title>
</head>
<body>
  <main class="mx-auto py-8">
    <slot /> {/* This is where the page content will be injected */}
  </main>
</body>
</html>
</file>

<file path="apps/astro/src/lib/utils.ts">
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
</file>

<file path="apps/astro/src/pages/index.astro">
---
import Layout from '../layouts/Layout.astro';
import {Hero} from '../components/react/hero.tsx'
import '@/styles/globals.css'
---

<Layout title="The Lore Book: The greatest story ever told is yours.">
  <Hero client:load />
</Layout>
</file>

<file path="apps/astro/src/styles/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem
  }
  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%
  }
}
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
</file>

<file path="apps/astro/tailwind.config.js">
/** @type {import('tailwindcss').Config} */
export default {
    darkMode: ['class'],
    content: [
    './src/**/*.{astro,html,js,jsx,ts,tsx}', // Make sure Astro files are included
  ],
  theme: {
  	extend: {
  		borderRadius: {
  			lg: 'var(--radius)',
  			md: 'calc(var(--radius) - 2px)',
  			sm: 'calc(var(--radius) - 4px)'
  		},
  		colors: {
  			background: 'hsl(var(--background))',
  			foreground: 'hsl(var(--foreground))',
  			card: {
  				DEFAULT: 'hsl(var(--card))',
  				foreground: 'hsl(var(--card-foreground))'
  			},
  			popover: {
  				DEFAULT: 'hsl(var(--popover))',
  				foreground: 'hsl(var(--popover-foreground))'
  			},
  			primary: {
  				DEFAULT: 'hsl(var(--primary))',
  				foreground: 'hsl(var(--primary-foreground))'
  			},
  			secondary: {
  				DEFAULT: 'hsl(var(--secondary))',
  				foreground: 'hsl(var(--secondary-foreground))'
  			},
  			muted: {
  				DEFAULT: 'hsl(var(--muted))',
  				foreground: 'hsl(var(--muted-foreground))'
  			},
  			accent: {
  				DEFAULT: 'hsl(var(--accent))',
  				foreground: 'hsl(var(--accent-foreground))'
  			},
  			destructive: {
  				DEFAULT: 'hsl(var(--destructive))',
  				foreground: 'hsl(var(--destructive-foreground))'
  			},
  			border: 'hsl(var(--border))',
  			input: 'hsl(var(--input))',
  			ring: 'hsl(var(--ring))',
  			chart: {
  				'1': 'hsl(var(--chart-1))',
  				'2': 'hsl(var(--chart-2))',
  				'3': 'hsl(var(--chart-3))',
  				'4': 'hsl(var(--chart-4))',
  				'5': 'hsl(var(--chart-5))'
  			}
  		}
  	}
  },
  plugins: [require("tailwindcss-animate")],
}
</file>

<file path="apps/astro/tsconfig.json">
{
  "extends": "astro/tsconfigs/base",
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "react",
    "baseUrl": ".",
    "paths": {
      "@/*": [
        "./src/*"
      ]
    },
    "strictNullChecks": true
  }
}
</file>

<file path="apps/astro/turbo.json">
{
  "$schema": "https://turborepo.org/schema.json",
  "extends": ["//"],
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".astro/**"]
    },
    "dev": {
      "persistent": true
    }
  }
}
</file>

<file path="apps/astro/wrangler.toml">
name = "lorebook-web"
compatibility_date = "2024-03-20"
compatibility_flags = ["nodejs_compat"]

[site]
bucket = "./dist"
pages_build_output_dir = "dist"

[build]
command = "pnpm run build"

[env.production]
name = "lorebook-web-prod"

[env.development]
name = "lorebook-web-dev"
</file>

<file path="apps/expo/.env.example">
EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY=
</file>

<file path="apps/expo/.npmrc">
node-linker=hoisted
</file>

<file path="apps/expo/app.json">
{
  "expo": {
    "name": "expo-app",
    "slug": "expo-app",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/images/icon.png",
    "scheme": "myapp",
    "newArchEnabled": true,
    "userInterfaceStyle": "automatic",
    "ios": {
      "supportsTablet": true
    },
    "splash": {
      "image": "./assets/images/splash.png",
      "backgroundColor": "#08080b"
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/images/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      "package": "com.anonymous.expoapp"
    },
    "web": {
      "bundler": "metro",
      "output": "static",
      "favicon": "./assets/images/favicon.png"
    },
    "plugins": [
      "expo-router"
    ]
  }
}
</file>

<file path="apps/expo/app/_layout.tsx">
import {Stack} from 'expo-router';
import 'react-native-reanimated';
import {TRPCProvider} from "@/utils/TRPCProvider.tsx";
import {ClerkProvider, ClerkLoaded} from '@clerk/clerk-expo'
import * as SecureStore from 'expo-secure-store'
import { View } from 'react-native';

export default function RootLayoutNav() {
  const tokenCache = {
    async getToken(key: string) {
      try {
        const item = await SecureStore.getItemAsync(key)
        if (item) {
          console.log(`${key} was used 🔐 \n`)
        } else {
          console.log('No values stored under key: ' + key)
        }
        return item
      } catch (error) {
        console.error('SecureStore get item error: ', error)
        await SecureStore.deleteItemAsync(key)
        return null
      }
    },
    async saveToken(key: string, value: string) {
      try {
        return SecureStore.setItemAsync(key, value)
      } catch (err) {
        return
      }
    },
  }
  const publishableKey = process.env.EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY!
  if (!publishableKey) {
    throw new Error('Add EXPO_PUBLIC_CLERK_PUBLISHABLE_KEY to your .env file')
  }
  return (
    <View style={{ flex: 1, backgroundColor: '#121212' }}>
      <ClerkProvider tokenCache={tokenCache} publishableKey={publishableKey}>
        <TRPCProvider>
          <Stack screenOptions={{
            headerShown: false,
            contentStyle: { backgroundColor: '#121212' }
          }}>
            <Stack.Screen 
              name="(tabs)" 
              options={{
                headerShown: false,
                contentStyle: { backgroundColor: '#121212' }
              }}
            />
          </Stack>
        </TRPCProvider>
      </ClerkProvider>
    </View>
  );
}
</file>

<file path="apps/expo/app/(auth)/_layout.tsx">
import { Redirect, Stack } from 'expo-router'
import { useAuth } from '@clerk/clerk-expo'

export default function AuthRoutesLayout() {
  const { isSignedIn } = useAuth()

  if (isSignedIn) {
    return <Redirect href={'/'} />
  }

  return <Stack screenOptions={{
          headerShown: false,
        }} />
}
</file>

<file path="apps/expo/app/(auth)/sign-in.tsx">
import * as React from 'react'
import {
  Text,
  TextInput,
  TouchableOpacity,
  View,
  KeyboardAvoidingView,
  Platform,
  StyleSheet,
  TouchableWithoutFeedback,
  Keyboard,
  Image,
  Dimensions
} from 'react-native'
import { useSignIn } from '@clerk/clerk-expo'
import { useRouter } from 'expo-router'
import { LinearGradient } from 'expo-linear-gradient'

export default function SignInScreen() {
  const { signIn, setActive, isLoaded } = useSignIn()
  const router = useRouter()

  const [emailAddress, setEmailAddress] = React.useState('')
  const [password, setPassword] = React.useState('')

  const onSignInPress = React.useCallback(async () => {
    if (!isLoaded) {
      return
    }

    try {
      const signInAttempt = await signIn.create({
        identifier: emailAddress,
        password,
      })

      if (signInAttempt.status === 'complete') {
        await setActive({ session: signInAttempt.createdSessionId })
        router.replace('/')
      } else {
        console.error(JSON.stringify(signInAttempt, null, 2))
      }
    } catch (err: any) {
      console.error(JSON.stringify(err, null, 2))
    }
  }, [isLoaded, emailAddress, password])

  const navigateToSignUp = () => {
    router.replace('/sign-up')
  }

  return (
    <TouchableWithoutFeedback onPress={Keyboard.dismiss} accessible={false}>
      <View style={styles.container}>
        <Image
          source={require('../../assets/ai-bg.png')}
          style={styles.backgroundImage}
          resizeMode="cover"
        />
        <LinearGradient
          colors={['rgba(0,0,0,0.6)', 'rgba(0,0,0,0.3)']}
          style={styles.overlay}
        />
        <KeyboardAvoidingView
          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
          style={styles.keyboardContainer}
        >
          <View style={styles.card}>
            <Text style={styles.headerText}>Welcome Back</Text>
            <Text style={styles.subHeaderText}>Sign In to Continue</Text>

            <TextInput
              style={styles.input}
              autoCapitalize="none"
              value={emailAddress}
              placeholder="Email"
              placeholderTextColor="#888"
              onChangeText={(emailAddress) => setEmailAddress(emailAddress)}
            />

            <TextInput
              style={styles.input}
              value={password}
              placeholder="Password"
              placeholderTextColor="#888"
              secureTextEntry={true}
              onChangeText={(password) => setPassword(password)}
            />

            <TouchableOpacity
              style={styles.primaryButton}
              onPress={onSignInPress}
            >
              <Text style={styles.buttonText}>Sign In</Text>
            </TouchableOpacity>

            <TouchableOpacity
              style={styles.secondaryButton}
              onPress={navigateToSignUp}
            >
              <Text style={styles.secondaryButtonText}>
                Don't have an account? Sign Up
              </Text>
            </TouchableOpacity>
          </View>
        </KeyboardAvoidingView>
      </View>
    </TouchableWithoutFeedback>
  )
}

const { width, height } = Dimensions.get('window')

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000'
  },
  backgroundImage: {
    position: 'absolute',
    top: 0,
    left: 0,
    width: width,
    height: height,
    opacity: 0.5
  },
  overlay: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  },
  keyboardContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 16
  },
  card: {
    width: '90%',
    backgroundColor: 'rgba(255,255,255,0.9)',
    borderRadius: 20,
    padding: 24,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.2,
    shadowRadius: 6,
    elevation: 5
  },
  headerText: {
    fontSize: 32,
    fontWeight: '800',
    textAlign: 'center',
    marginBottom: 16,
    color: '#333',
    letterSpacing: -1
  },
  subHeaderText: {
    fontSize: 20,
    fontWeight: '600',
    textAlign: 'center',
    marginBottom: 24,
    color: '#666'
  },
  input: {
    backgroundColor: 'rgba(240,240,240,0.9)',
    borderWidth: 1,
    borderColor: 'rgba(200,200,200,0.5)',
    padding: 15,
    borderRadius: 12,
    marginBottom: 16,
    fontSize: 16,
    color: '#333'
  },
  primaryButton: {
    backgroundColor: '#007bff',
    padding: 15,
    borderRadius: 12,
    marginBottom: 16,
    shadowColor: '#007bff',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 3
  },
  buttonText: {
    color: 'white',
    textAlign: 'center',
    fontWeight: 'bold',
    fontSize: 16
  },
  secondaryButton: {
    padding: 15,
    borderRadius: 12,
    backgroundColor: 'rgba(0,123,255,0.1)'
  },
  secondaryButtonText: {
    color: '#007bff',
    textAlign: 'center',
    fontWeight: '600'
  }
})
</file>

<file path="apps/expo/app/(auth)/sign-up.tsx">
import * as React from 'react'
import {
  Text,
  TextInput,
  TouchableOpacity,
  View,
  KeyboardAvoidingView,
  Platform,
  StyleSheet,
  TouchableWithoutFeedback,
  Keyboard,
  Image,
  Dimensions
} from 'react-native'
import { useSignUp } from '@clerk/clerk-expo'
import { useRouter } from 'expo-router'
import { LinearGradient } from 'expo-linear-gradient'

export default function SignUpScreen() {
  const { isLoaded, signUp, setActive } = useSignUp()
  const router = useRouter()

  const [emailAddress, setEmailAddress] = React.useState('')
  const [password, setPassword] = React.useState('')
  const [pendingVerification, setPendingVerification] = React.useState(false)
  const [code, setCode] = React.useState('')

  const onSignUpPress = async () => {
    if (!isLoaded) {
      return
    }

    try {
      await signUp.create({
        emailAddress,
        password,
      })

      await signUp.prepareEmailAddressVerification({ strategy: 'email_code' })

      setPendingVerification(true)
    } catch (err: any) {
      console.error(JSON.stringify(err, null, 2))
    }
  }

  const onPressVerify = async () => {
    if (!isLoaded) {
      return
    }

    try {
      const completeSignUp = await signUp.attemptEmailAddressVerification({
        code,
      })

      if (completeSignUp.status === 'complete') {
        await setActive({ session: completeSignUp.createdSessionId })
        router.replace('/')
      } else {
        console.error(JSON.stringify(completeSignUp, null, 2))
      }
    } catch (err: any) {
      console.error(JSON.stringify(err, null, 2))
    }
  }

  const navigateToSignIn = () => {
    router.replace('/sign-in')
  }

  return (
    <TouchableWithoutFeedback onPress={Keyboard.dismiss} accessible={false}>
      <View style={styles.container}>
        <Image
          source={require('../../assets/ai-bg.png')}
          style={styles.backgroundImage}
          resizeMode="cover"
        />
        <LinearGradient
          colors={['rgba(0,0,0,0.6)', 'rgba(0,0,0,0.3)']}
          style={styles.overlay}
        />
        <KeyboardAvoidingView
          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
          style={styles.keyboardContainer}
        >
          <View style={styles.card}>
            <Text style={styles.headerText}>Chronicle the Journey</Text>
            <Text style={styles.subHeaderText}>
              {!pendingVerification
                ? 'Create Your Account'
                : 'Verify Your Email'}
            </Text>

            {!pendingVerification && (
              <>
                <TextInput
                  style={styles.input}
                  autoCapitalize="none"
                  value={emailAddress}
                  placeholder="Email"
                  placeholderTextColor="#888"
                  onChangeText={(email) => setEmailAddress(email)}
                />
                <TextInput
                  style={styles.input}
                  value={password}
                  placeholder="Password"
                  placeholderTextColor="#888"
                  secureTextEntry={true}
                  onChangeText={(password) => setPassword(password)}
                />
                <TouchableOpacity
                  style={styles.primaryButton}
                  onPress={onSignUpPress}
                >
                  <Text style={styles.buttonText}>Sign Up</Text>
                </TouchableOpacity>
                <TouchableOpacity
                  style={styles.secondaryButton}
                  onPress={navigateToSignIn}
                >
                  <Text style={styles.secondaryButtonText}>
                    Already have an account? Sign In
                  </Text>
                </TouchableOpacity>
              </>
            )}

            {pendingVerification && (
              <>
                <Text style={styles.verificationText}>
                  Check your email for the verification code
                </Text>
                <TextInput
                  style={styles.input}
                  value={code}
                  placeholder="Enter 6-digit code"
                  placeholderTextColor="#888"
                  onChangeText={(code) => setCode(code)}
                  keyboardType="number-pad"
                />
                <TouchableOpacity
                  style={styles.primaryButton}
                  onPress={onPressVerify}
                >
                  <Text style={styles.buttonText}>Verify Email</Text>
                </TouchableOpacity>
              </>
            )}
          </View>
        </KeyboardAvoidingView>
      </View>
    </TouchableWithoutFeedback>
  )
}

const { width, height } = Dimensions.get('window')

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#000'
  },
  backgroundImage: {
    position: 'absolute',
    top: 0,
    left: 0,
    width: width,
    height: height,
    opacity: 0.5
  },
  overlay: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0
  },
  keyboardContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 16
  },
  card: {
    width: '90%',
    backgroundColor: 'rgba(255,255,255,0.9)',
    borderRadius: 20,
    padding: 24,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.2,
    shadowRadius: 6,
    elevation: 5
  },
  headerText: {
    fontSize: 32,
    fontWeight: '800',
    textAlign: 'center',
    marginBottom: 16,
    color: '#333',
    letterSpacing: -1
  },
  subHeaderText: {
    fontSize: 20,
    fontWeight: '600',
    textAlign: 'center',
    marginBottom: 24,
    color: '#666'
  },
  input: {
    backgroundColor: 'rgba(240,240,240,0.9)',
    borderWidth: 1,
    borderColor: 'rgba(200,200,200,0.5)',
    padding: 15,
    borderRadius: 12,
    marginBottom: 16,
    fontSize: 16,
    color: '#333'
  },
  primaryButton: {
    backgroundColor: '#007bff',
    padding: 15,
    borderRadius: 12,
    marginBottom: 16,
    shadowColor: '#007bff',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 3
  },
  buttonText: {
    color: 'white',
    textAlign: 'center',
    fontWeight: 'bold',
    fontSize: 16
  },
  secondaryButton: {
    padding: 15,
    borderRadius: 12,
    backgroundColor: 'rgba(0,123,255,0.1)'
  },
  secondaryButtonText: {
    color: '#007bff',
    textAlign: 'center',
    fontWeight: '600'
  },
  verificationText: {
    textAlign: 'center',
    color: '#666',
    marginBottom: 16,
    fontSize: 16
  }
})
</file>

<file path="apps/expo/app/(tabs)/_layout.tsx">
import { Tabs, usePathname } from "expo-router";
import { Ionicons } from '@expo/vector-icons';
import * as Haptics from 'expo-haptics';
import { useEffect, useRef } from 'react';
import { Animated } from 'react-native';

export default function TabLayout() {
  const pathname = usePathname();
  const scaleAnim = useRef(new Animated.Value(0.99)).current;

  useEffect(() => {
    Haptics.selectionAsync();
    
    // Reset the scale to starting position
    scaleAnim.setValue(0.99);
    
    // Animate to full scale
    Animated.spring(scaleAnim, {
      toValue: 1,
      tension: 100,
      friction: 10,
      useNativeDriver: true,
    }).start();
  }, [pathname]);

  return (
    <Animated.View style={{ flex: 1, transform: [{ scale: scaleAnim }] }}>
      <Tabs
        screenOptions={{
          tabBarActiveTintColor: "#2196f3",
          tabBarInactiveTintColor: "#999",
          tabBarStyle: {
            borderTopWidth: 1,
            borderTopColor: "#333",
            backgroundColor: "#121212",
          },
          headerStyle: {
            backgroundColor: '#121212',
          },
          headerTitleStyle: {
            color: '#F5F5F5',
          },
        }}
      >
        <Tabs.Screen
          name="lore"
          options={{
            title: "Lore",
            tabBarIcon: ({ color, size }) => (
              <Ionicons name="book-outline" size={size} color={color} />
            ),
          }}
        />
        <Tabs.Screen
          name="add"
          options={{
            title: "Add",
            tabBarIcon: ({ color, size }) => (
              <Ionicons name="add-circle-outline" size={size} color={color} />
            ),
          }}
        />
        <Tabs.Screen
          name="account"
          options={{
            title: "Account",
            tabBarIcon: ({ color, size }) => (
              <Ionicons name="person-outline" size={size} color={color} />
            ),
          }}
        />
      </Tabs>
    </Animated.View>
  );
}
</file>

<file path="apps/expo/app/(tabs)/account.tsx">
import { SignedIn, SignedOut, useClerk, useUser } from "@clerk/clerk-expo";
import { Link, router } from "expo-router";
import { 
  View, 
  Text, 
  StyleSheet, 
  TouchableOpacity, 
  ScrollView, 
  Dimensions,
  ActivityIndicator,
  Image,
  Animated,
  Modal,
} from "react-native";
import { useState, useRef, useEffect } from "react";
import { api } from "@/utils/api";
import { MaterialIcons } from '@expo/vector-icons';

const STYLES = [
  { 
    id: 'classical painting', 
    label: 'Classical Painting',
    image: require('@/assets/styles/classical.png')
  },
  { 
    id: 'ethereal animated fairy', 
    label: 'Ethereal Fairy',
    image: require('@/assets/styles/ethereal.png')
  },
  { 
    id: 'childrens book', 
    label: 'Children\'s Book',
    image: require('@/assets/styles/childrens.png')
  },
  { 
    id: '3d animated style', 
    label: '3D Animated',
    image: require('@/assets/styles/3d.png')
  },
] as const;

const { width, height } = Dimensions.get('window');
const ITEM_WIDTH = width * 0.9;
const ITEM_HEIGHT = height * 0.65;
const SPACING = 15;

const getStyleById = (id: string | undefined) => {
  return STYLES.find(style => style.id === id) ?? STYLES[0];
};

export default function AccountPage() {
  const auth = useUser();
  const { user, isLoaded, isSignedIn } = auth;
  const { signOut } = useClerk();
  const [showStyleSelector, setShowStyleSelector] = useState(false);
  const [activeIndex, setActiveIndex] = useState(0);
  const scrollX = useRef(new Animated.Value(0)).current;
  const scrollRef = useRef<ScrollView>(null);
  const [showSignOutModal, setShowSignOutModal] = useState(false);

  const utils = api.useContext();
  const preferences = api.user.getPreferences.useQuery();
  const updateStyle = api.user.updateArtStyle.useMutation({
    onSuccess: () => {
      utils.user.getPreferences.invalidate();
      // Animate back to account view after successful update
      setShowStyleSelector(false);
    },
  });

  const slideAnim = useRef(new Animated.Value(0)).current;

  useEffect(() => {
    if (showStyleSelector) {
      Animated.spring(slideAnim, {
        toValue: -width,
        useNativeDriver: true,
        tension: 180,
        friction: 26,
        restDisplacementThreshold: 0.01,
        restSpeedThreshold: 0.01,
      }).start();
    } else {
      Animated.spring(slideAnim, {
        toValue: 0,
        useNativeDriver: true,
        tension: 180,
        friction: 26,
        restDisplacementThreshold: 0.01,
        restSpeedThreshold: 0.01,
      }).start();
    }
  }, [showStyleSelector]);

  const handleSignOut = async () => {
    await signOut();
    router.replace('/(auth)/sign-in');
  };

  const handleStyleSelect = () => {
    const selectedStyle = STYLES[activeIndex].id;
    if (selectedStyle !== preferences.data?.artStyle) {
      updateStyle.mutate(selectedStyle);
    }
  };

  return (
    <View style={styles.container}>
      <Animated.View style={[
        styles.slidingContainer,
        { transform: [{ translateX: slideAnim }] }
      ]}>
        {/* Account View */}
        <View style={styles.page}>
          <Text style={styles.text}>Account Page</Text>
          <SignedIn>
            <View style={styles.content}>
              <Text style={styles.email}>Hello {user?.emailAddresses[0].emailAddress}</Text>
              
              <TouchableOpacity
                style={styles.styleButton}
                onPress={() => setShowStyleSelector(true)}
              >
                <View style={styles.styleButtonContent}>
                  <View style={styles.stylePreviewContainer}>
                    <Image
                      source={getStyleById(preferences.data?.artStyle).image}
                      style={styles.stylePreviewImage}
                      resizeMode="cover"
                    />
                    <View style={styles.stylePreviewOverlay} />
                  </View>
                  <View style={styles.styleButtonText}>
                    <Text style={styles.styleButtonTitle}>Select an art style</Text>
                    <Text style={styles.currentStyle}>
                      {getStyleById(preferences.data?.artStyle).label}
                    </Text>
                  </View>
                  <MaterialIcons name="chevron-right" size={24} color="#fff" />
                </View>
              </TouchableOpacity>

              <TouchableOpacity
                onPress={() => setShowSignOutModal(true)}
                style={styles.signOutButton}
              >
                <Text style={styles.signOutText}>Sign Out</Text>
              </TouchableOpacity>
            </View>
          </SignedIn>
          <SignedOut>
            <View style={styles.authLinks}>
              <Link href="/(auth)/sign-in">
                <Text>Sign In</Text>
              </Link>
              <Link href="/(auth)/sign-up">
                <Text>Sign Up</Text>
              </Link>
            </View>
          </SignedOut>
        </View>

        {/* Style Selector View */}
        <View style={styles.page}>
          <View style={styles.header}>
            <TouchableOpacity 
              onPress={() => setShowStyleSelector(false)}
              style={styles.backButton}
            >
              <MaterialIcons name="arrow-back" size={24} color="#333" />
              <Text style={styles.headerTitle}>Select Style</Text>
            </TouchableOpacity>
          </View>

          <View style={styles.carouselContainer}>
            <Animated.ScrollView
              ref={scrollRef}
              horizontal
              pagingEnabled
              snapToInterval={ITEM_WIDTH + SPACING}
              decelerationRate="fast"
              contentContainerStyle={styles.scrollContent}
              showsHorizontalScrollIndicator={false}
              onScroll={Animated.event(
                [{ nativeEvent: { contentOffset: { x: scrollX } } }],
                { useNativeDriver: false }
              )}
              scrollEventThrottle={16}
              onMomentumScrollEnd={(e) => {
                const index = Math.round(
                  e.nativeEvent.contentOffset.x / (ITEM_WIDTH + SPACING)
                );
                setActiveIndex(index);
              }}
            >
              {STYLES.map((style, index) => {
                const inputRange = [
                  (index - 1) * (ITEM_WIDTH + SPACING),
                  index * (ITEM_WIDTH + SPACING),
                  (index + 1) * (ITEM_WIDTH + SPACING),
                ];
                
                const scale = scrollX.interpolate({
                  inputRange,
                  outputRange: [0.9, 1, 0.9],
                  extrapolate: 'clamp',
                });

                return (
                  <Animated.View
                    key={style.id}
                    style={[
                      styles.styleCard,
                      { 
                        width: ITEM_WIDTH,
                        transform: [{ scale }],
                      },
                    ]}
                  >
                    <View style={styles.cardContent}>
                      <View style={styles.imageWrapper}>
                        <Image
                          source={style.image}
                          style={styles.styleImage}
                          resizeMode="cover"
                        />
                      </View>
                      <Text style={styles.styleText}>{style.label}</Text>
                    </View>
                  </Animated.View>
                );
              })}
            </Animated.ScrollView>
          </View>

          <TouchableOpacity
            style={[
              styles.selectButton,
              updateStyle.isPending && styles.loadingButton,
              preferences.data?.artStyle === STYLES[activeIndex].id && styles.selectedButton,
            ]}
            onPress={handleStyleSelect}
            disabled={updateStyle.isPending || preferences.data?.artStyle === STYLES[activeIndex].id}
          >
            {updateStyle.isPending ? (
              <ActivityIndicator color="#fff" />
            ) : preferences.data?.artStyle === STYLES[activeIndex].id ? (
              <View style={styles.selectedContent}>
                <Text style={styles.selectButtonText}>Selected</Text>
                <MaterialIcons name="check" size={20} color="#fff" />
              </View>
            ) : (
              <Text style={styles.selectButtonText}>Select this style</Text>
            )}
          </TouchableOpacity>
        </View>

        <Modal
          animationType="fade"
          transparent={true}
          visible={showSignOutModal}
          onRequestClose={() => setShowSignOutModal(false)}
        >
          <View style={styles.modalOverlay}>
            <View style={styles.modalContent}>
              <Text style={styles.modalTitle}>Sign Out</Text>
              <Text style={styles.modalText}>Are you sure you want to sign out?</Text>
              <View style={styles.modalButtons}>
                <TouchableOpacity
                  style={[styles.modalButton, styles.cancelButton]}
                  onPress={() => setShowSignOutModal(false)}
                >
                  <Text style={styles.cancelButtonText}>Cancel</Text>
                </TouchableOpacity>
                <TouchableOpacity
                  style={[styles.modalButton, styles.confirmButton]}
                  onPress={handleSignOut}
                >
                  <Text style={styles.confirmButtonText}>Sign Out</Text>
                </TouchableOpacity>
              </View>
            </View>
          </View>
        </Modal>
      </Animated.View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#121212",
    overflow: 'hidden',
  },
  slidingContainer: {
    flex: 1,
    flexDirection: 'row',
    width: width * 2,
  },
  page: {
    width,
    flex: 1,
    backgroundColor: "#121212",
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 20,
    paddingTop: 40,
  },
  backButton: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 10,
  },
  headerTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: "#F5F5F5",
  },
  content: {
    flex: 1,
    alignItems: "center",
    paddingTop: 20,
  },
  text: {
    fontSize: 24,
    color: "#F5F5F5",
    marginTop: 40,
    marginBottom: 20,
    textAlign: 'center',
  },
  email: {
    fontSize: 16,
    marginBottom: 30,
    color: "#F5F5F5",
  },
  styleButton: {
    backgroundColor: '#1E1E1E',
    borderRadius: 16,
    width: '90%',
    overflow: 'hidden',
    borderWidth: 1,
    borderColor: '#333333',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.25,
    shadowRadius: 3.84,
    elevation: 5,
  },
  styleButtonContent: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 16,
  },
  stylePreviewContainer: {
    width: 45,
    height: 45,
    borderRadius: 12,
    overflow: 'hidden',
    position: 'relative',
    marginRight: 12,
    borderWidth: 1,
    borderColor: '#333333',
  },
  stylePreviewImage: {
    width: '100%',
    height: '100%',
  },
  stylePreviewOverlay: {
    ...StyleSheet.absoluteFillObject,
    backgroundColor: 'rgba(0,0,0,0.1)',
  },
  styleButtonText: {
    flex: 1,
  },
  styleButtonTitle: {
    color: '#F5F5F5',
    fontSize: 16,
    fontWeight: '600',
  },
  currentStyle: {
    color: '#A0A0A0',
    fontSize: 13,
    marginTop: 2,
  },
  signOutButton: {
    backgroundColor: '#1E1E1E',
    padding: 16,
    borderRadius: 16,
    marginTop: 30,
    width: '90%',
    alignItems: 'center',
    borderWidth: 1,
    borderColor: '#333333',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.25,
    shadowRadius: 3.84,
    elevation: 5,
  },
  signOutText: {
    color: '#FF453A',
    fontWeight: '600',
    fontSize: 16,
  },
  authLinks: {
    alignItems: 'center',
    gap: 10,
  },
  carouselContainer: {
    flex: 1,
    position: 'relative',
  },
  styleCard: {
    marginHorizontal: SPACING / 2,
    height: ITEM_HEIGHT,
    justifyContent: 'center',
  },
  cardContent: {
    flex: 1,
    alignItems: 'center',
    gap: 12,
  },
  imageWrapper: {
    width: '100%',
    height: '85%',
    borderRadius: 20,
    overflow: 'hidden',
    backgroundColor: 'transparent',
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 4,
    },
    shadowOpacity: 0.5,
    shadowRadius: 8,
    elevation: 8,
  },
  styleImage: {
    width: '100%',
    height: '100%',
    borderRadius: 20,
    backgroundColor: 'transparent',
  },
  styleText: {
    fontSize: 18,
    fontWeight: '600',
    textAlign: 'center',
    color: '#F5F5F5',
    backgroundColor: '#1E1E1E',
    paddingVertical: 8,
    paddingHorizontal: 16,
    borderRadius: 10,
  },
  selectButton: {
    backgroundColor: '#007AFF',
    paddingVertical: 15,
    paddingHorizontal: 20,
    borderRadius: 8,
    marginTop: 20,
    marginHorizontal: 20,
    alignItems: 'center',
  },
  loadingButton: {
    backgroundColor: '#999',
  },
  selectedButton: {
    backgroundColor: '#34C759',
  },
  selectedContent: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 8,
  },
  selectButtonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
  scrollContent: {
    paddingHorizontal: (width - ITEM_WIDTH) / 2 - SPACING / 2,
    paddingVertical: 20,
    paddingBottom: 50,
  },
  pagination: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    height: 40,
    marginTop: 20,
  },
  dot: {
    height: 8,
    borderRadius: 4,
    backgroundColor: '#007AFF',
    marginHorizontal: 4,
  },
  modalOverlay: {
    flex: 1,
    backgroundColor: 'rgba(0, 0, 0, 0.5)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  modalContent: {
    backgroundColor: '#1E1E1E',
    borderRadius: 16,
    padding: 20,
    width: '85%',
    borderWidth: 1,
    borderColor: '#333333',
  },
  modalTitle: {
    fontSize: 20,
    fontWeight: '600',
    color: '#F5F5F5',
    marginBottom: 10,
    textAlign: 'center',
  },
  modalText: {
    fontSize: 16,
    color: '#A0A0A0',
    marginBottom: 20,
    textAlign: 'center',
  },
  modalButtons: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    gap: 10,
  },
  modalButton: {
    flex: 1,
    paddingVertical: 12,
    borderRadius: 12,
    alignItems: 'center',
    justifyContent: 'center',
  },
  cancelButton: {
    backgroundColor: '#2C2C2E',
    borderWidth: 1,
    borderColor: '#333333',
  },
  confirmButton: {
    backgroundColor: '#FF453A',
  },
  cancelButtonText: {
    color: '#F5F5F5',
    fontSize: 16,
    fontWeight: '600',
  },
  confirmButtonText: {
    color: '#FFFFFF',
    fontSize: 16,
    fontWeight: '600',
  },
});
</file>

<file path="apps/expo/app/(tabs)/add.tsx">
import React, { useState, useEffect } from "react";
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  Animated,
  ActivityIndicator,
  KeyboardAvoidingView,
  Platform,
  TouchableWithoutFeedback,
  Keyboard,
} from "react-native";
import { MaterialIcons } from '@expo/vector-icons';
import { LinearGradient } from 'expo-linear-gradient';
import { api } from "@/utils/api";

const PROMPTS = [
  "What just happened?",
  "What's the tea?",
  "Spill the beans...",
  "Something interesting?",
  "Who did what now?",
] as const;

export default function AddMoment() {
  const [text, setText] = useState("");
  const [isWriting, setIsWriting] = useState(false);
  const promptFade = React.useRef(new Animated.Value(0)).current;
  const inputFade = React.useRef(new Animated.Value(0)).current;
  const [showSuccess, setShowSuccess] = useState(false);

  const { data: moments } = api.moments.getAll.useQuery();
  const utils = api.useContext();

  useEffect(() => {
    fadePromptIn().start();
  }, []);

  const fadePromptOut = () => {
    return Animated.timing(promptFade, {
      toValue: 0,
      duration: 200,
      useNativeDriver: true,
    });
  };

  const fadePromptIn = () => {
    return Animated.timing(promptFade, {
      toValue: 1,
      duration: 200,
      useNativeDriver: true,
    });
  };

  const fadeInputIn = () => {
    return Animated.timing(inputFade, {
      toValue: 1,
      duration: 200,
      useNativeDriver: true,
    });
  };

  const fadeInputOut = () => {
    return Animated.timing(inputFade, {
      toValue: 0,
      duration: 200,
      useNativeDriver: true,
    });
  };

  const handleStartWriting = () => {
    setIsWriting(true);
    Animated.parallel([
      fadePromptOut(),
      fadeInputIn(),
    ]).start();
  };

  const handleKeyboardDismiss = () => {
    Keyboard.dismiss();
    if (!text.trim()) {
      Animated.parallel([
        fadePromptIn(),
        fadeInputOut(),
      ]).start(() => {
        setIsWriting(false);
        fadePromptIn().start();
      });
    }
  };

  const addMoment = api.moments.add.useMutation({
    onSuccess: () => {
      setShowSuccess(true);
      Keyboard.dismiss();
      setTimeout(() => {
        Animated.parallel([
          fadePromptIn(),
          fadeInputOut(),
        ]).start(() => {
          setShowSuccess(false);
          setText("");
          setIsWriting(false);
          fadePromptIn().start();
        });
      }, 1500);
      utils.moments.getAll.invalidate();
    },
  });

  const handleAddMoment = async () => {
    if (!text.trim()) return;
    await addMoment.mutateAsync(text);
  };

  return (
    <View style={styles.container}>
      <KeyboardAvoidingView 
        behavior={Platform.OS === "ios" ? "padding" : "height"}
        style={styles.mainContent}
      >
        <TouchableWithoutFeedback onPress={handleKeyboardDismiss}>
          <View style={styles.content}>
            <Animated.View 
              style={[
                styles.promptSection, 
                { opacity: promptFade },
                isWriting && styles.hidden
              ]}
            >
              <Text style={styles.promptText}>
                {PROMPTS[Math.floor(Math.random() * PROMPTS.length)]}
              </Text>
              <TouchableOpacity
                style={styles.startButton}
                onPress={handleStartWriting}
              >
                <Text style={styles.buttonText}>Add a moment</Text>
                <MaterialIcons name="add" size={20} color="#F5F5F5" />
              </TouchableOpacity>
            </Animated.View>

            <Animated.View 
              style={[
                styles.writeSection, 
                { 
                  opacity: inputFade,
                },
                !isWriting && styles.hidden
              ]}
            >
              <TextInput
                style={styles.input}
                value={text}
                onChangeText={setText}
                multiline
                autoFocus
                textAlign="center"
                textAlignVertical="center"
              />
              {text.trim().length > 0 && (
                <TouchableOpacity
                  style={[
                    styles.addButton,
                    { opacity: addMoment.isPending ? 0.7 : showSuccess ? 1 : 0.7 }
                  ]}
                  onPress={handleAddMoment}
                  disabled={addMoment.isPending || showSuccess}
                >
                  <View style={styles.buttonContent}>
                    {addMoment.isPending ? (
                      <ActivityIndicator color="#F5F5F5" />
                    ) : showSuccess ? (
                      <MaterialIcons name="check" size={24} color="#4CAF50" />
                    ) : (
                      <>
                        <Text style={styles.buttonText}>Add moment</Text>
                        <MaterialIcons 
                          name="add-circle-outline" 
                          size={20} 
                          color="#F5F5F5" 
                          style={{marginLeft: 8}} 
                        />
                      </>
                    )}
                  </View>
                </TouchableOpacity>
              )}
            </Animated.View>
          </View>
        </TouchableWithoutFeedback>
      </KeyboardAvoidingView>

      <View style={styles.momentsPreview}>
        <Text style={styles.previewTitle}>Today's Moments</Text>
        <View style={styles.orbContainer}>
          {moments?.map((moment, index) => (
            <LinearGradient
              key={moment.id}
              colors={['#1A1A1A', '#2C2C2E']}
              style={styles.orbWrapper}
            >
              <LinearGradient
                colors={['#4169E1', '#1E90FF']}
                style={styles.orb}
                start={{ x: 0, y: 0 }}
                end={{ x: 1, y: 1 }}
              />
            </LinearGradient>
          ))}
          {(!moments || moments.length === 0) && (
            <Text style={styles.emptyText}>No moments yet today</Text>
          )}
        </View>
      </View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#121212',
  },
  mainContent: {
    flex: 1,
  },
  content: {
    flex: 1,
    padding: 20,
    justifyContent: 'center',
  },
  promptSection: {
    alignItems: 'center',
    marginTop: -100,
  },
  promptText: {
    fontSize: 24,
    color: '#F5F5F5',
    textAlign: 'center',
    marginBottom: 30,
    fontWeight: '600',
  },
  writeSection: {
    position: 'absolute',
    top: '40%',
    left: 0,
    right: 0,
    justifyContent: 'center',
    alignItems: 'center',
  },
  input: {
    fontSize: 24,
    color: '#FFFFFF',
    width: '100%',
    textAlign: 'center',
    padding: 20,
  },
  startButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#1E1E1E',
    padding: 16,
    borderRadius: 12,
    gap: 8,
    borderWidth: 1,
    borderColor: '#333',
  },
  addButton: {
    backgroundColor: '#1E1E1E',
    paddingVertical: 12,
    paddingHorizontal: 24,
    borderRadius: 12,
    marginTop: 20,
    borderWidth: 1,
    borderColor: '#333',
  },
  buttonText: {
    color: '#F5F5F5',
    fontSize: 16,
    fontWeight: '600',
  },
  momentsPreview: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    padding: 20,
    backgroundColor: '#121212',
  },
  previewTitle: {
    fontSize: 18,
    color: '#F5F5F5',
    marginBottom: 16,
    fontWeight: '600',
  },
  orbContainer: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    gap: 8,
    justifyContent: 'center',
    padding: 16,
    backgroundColor: '#1A1A1A',
    borderRadius: 16,
    borderWidth: 1,
    borderColor: '#333',
    minHeight: 60,
    alignItems: 'center',
  },
  orbWrapper: {
    padding: 2,
    borderRadius: 14,
  },
  orb: {
    width: 24,
    height: 24,
    borderRadius: 12,
    shadowColor: '#4169E1',
    shadowOffset: { width: 0, height: 0 },
    shadowOpacity: 0.4,
    shadowRadius: 4,
  },
  buttonContent: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    minHeight: 24,
  },
  emptyText: {
    color: '#666',
    fontSize: 14,
  },
  hidden: {
    display: 'none',
  },
});
</file>

<file path="apps/expo/app/(tabs)/lore.tsx">
import React, {useState, useRef, useEffect} from "react";
import {
  View,
  Text,
  StyleSheet,
  TouchableOpacity,
  ScrollView,
  Image,
  RefreshControl,
  ActivityIndicator,
  Animated,
  Dimensions,
} from "react-native";
import {api} from "@/utils/api";
import { PanGestureHandler, State } from "react-native-gesture-handler";
import { GestureHandlerRootView } from "react-native-gesture-handler";
import { Ionicons } from '@expo/vector-icons';

const { width } = Dimensions.get('window');

// Construct R2 URL using account ID
const R2_PUBLIC_URL = `https://pub-17ae87fb525c458eb847cb91755fc43b.r2.dev`;

export const getTypeBadgeColor = (type: string) => {
  switch (type) {
    case 'Daily':
      return '#2196f3';
    case 'Weekly':
      return '#4CAF50';
    case 'Monthly':
      return '#FF9800';
    default:
      return '#9E9E9E';
  }
};

export default function RecapsPage() {
  const [refreshing, setRefreshing] = useState(false);
  const allRecaps = api.recaps.getAll.useQuery(undefined, {});
  const loadingHeight = useRef(new Animated.Value(0)).current;
  const [selectedRecap, setSelectedRecap] = useState<number | null>(null);
  const slideAnim = useRef(new Animated.Value(width)).current;
  const [isAnimating, setIsAnimating] = useState(false);

  const handleRecapPress = (recapId: number) => {
    if (isAnimating) return;
    setIsAnimating(true);
    setSelectedRecap(recapId);
    
    Animated.spring(slideAnim, {
      toValue: 0,
      tension: 180,
      friction: 15,
      useNativeDriver: true,
      restSpeedThreshold: 100,
      restDisplacementThreshold: 40,
    }).start(() => {
      setIsAnimating(false);
    });
  };

  const handleClose = () => {
    if (isAnimating) return;
    setIsAnimating(true);
    
    Animated.spring(slideAnim, {
      toValue: width,
      tension: 180,
      friction: 15,
      useNativeDriver: true,
      restSpeedThreshold: 100,
      restDisplacementThreshold: 40,
    }).start(() => {
      setSelectedRecap(null);
      setIsAnimating(false);
    });
  };

  const handleGesture = ({ nativeEvent }: { nativeEvent: { translationX: number; state: number } }) => {
    const { translationX, state } = nativeEvent;
    if (state === State.END && translationX > 50) {
      handleClose();
    }
  };

  useEffect(() => {
    Animated.timing(loadingHeight, {
      toValue: refreshing ? 50 : 0,
      duration: 300,
      useNativeDriver: false,
    }).start();
  }, [refreshing]);

  const onRefresh = React.useCallback(async () => {
    setRefreshing(true);
    await allRecaps.refetch();
    setRefreshing(false);
  }, [allRecaps]);

  const renderDetailView = () => {
    if (!selectedRecap || !allRecaps.data) return null;

    const recap = allRecaps.data.find(r => r.id === selectedRecap);
    if (!recap) return null;

    return (
      <GestureHandlerRootView style={{ flex: 1 }}>
        <PanGestureHandler
          activeOffsetX={[-20, 20]}
          failOffsetY={[-20, 20]}
          onHandlerStateChange={handleGesture}
        >
          <View style={styles.detailContent}>
            <TouchableOpacity
              onPress={handleClose}
              style={styles.closeButton}
            >
              <Ionicons name="close" size={24} color="#F5F5F5" />
            </TouchableOpacity>
            
            <ScrollView>
              <View style={styles.detailImageContainer}>
                {recap.imageId && (
                  <Image 
                    source={{ uri: `${R2_PUBLIC_URL}/${recap.imageId}` }}
                    style={styles.detailImage}
                    defaultSource={require('../../assets/images/placeholder.png')}
                  />
                )}
              </View>
              
              <View style={styles.detailContentInner}>
                <View style={styles.detailHeaderContent}>
                  <Text style={styles.detailDate}>
                    {recap.createdAt.toLocaleDateString('en-US', {
                      weekday: 'long',
                      month: 'long',
                      day: 'numeric',
                      year: 'numeric'
                    })}
                  </Text>
                  <View style={[
                    styles.typeBadge,
                    { backgroundColor: getTypeBadgeColor(recap.type) }
                  ]}>
                    <Text style={styles.typeBadgeText}>{recap.type}</Text>
                  </View>
                </View>
                <Text style={styles.detailText}>{recap.text}</Text>
              </View>
            </ScrollView>
          </View>
        </PanGestureHandler>
      </GestureHandlerRootView>
    );
  };

  return (
    <View style={styles.container}>
      <Animated.View style={[
        styles.loadingContainer,
        {
          height: loadingHeight,
          overflow: 'hidden',
        }
      ]}>
        <View style={styles.loadingInner}>
          <ActivityIndicator size="small" color="#2196f3" />
        </View>
      </Animated.View>
      <ScrollView
        contentContainerStyle={styles.scrollViewContent}
        showsVerticalScrollIndicator={false}
        refreshControl={
          <RefreshControl
            refreshing={false}
            onRefresh={onRefresh}
            tintColor="transparent"
          />
        }
      >
        {allRecaps.data?.map((recap) => (
          <TouchableOpacity
            key={recap.id}
            style={styles.recapCard}
            onPress={() => handleRecapPress(recap.id)}
            activeOpacity={0.6}
          >
            {recap.imageId && (
              <Image
                source={{ uri: `${R2_PUBLIC_URL}/${recap.imageId}` }}
                style={styles.recapImage}
                defaultSource={require('../../assets/images/placeholder.png')}
              />
            )}
            <View style={styles.recapDetails}>
              <View
                style={[
                  styles.typeBadge,
                  {backgroundColor: getTypeBadgeColor(recap.type)}
                ]}
              >
                <Text style={styles.typeBadgeText}>{recap.type}</Text>
              </View>
              <Text style={styles.recapDate}>
                {recap.createdAt.toLocaleDateString('en-US', {
                  month: 'short',
                  day: 'numeric',
                  year: 'numeric'
                })}
              </Text>
            </View>
          </TouchableOpacity>
        ))}

        {allRecaps.data?.length === 0 && (
          <Text style={styles.emptyStateText}>No Recaps Yet</Text>
        )}

        {allRecaps.isLoading && (
          <Text style={styles.loadingText}>Loading Recaps...</Text>
        )}
      </ScrollView>

      <Animated.View
        style={[
          styles.detailView,
          {
            transform: [{ translateX: slideAnim }],
          },
        ]}
      >
        {selectedRecap && renderDetailView()}
      </Animated.View>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#121212",
  },
  scrollViewContent: {
    paddingVertical: 16,
    paddingHorizontal: 16,
  },
  recapCard: {
    backgroundColor: '#1E1E1E',
    borderRadius: 12,
    marginBottom: 16,
    overflow: 'hidden',
    shadowColor: '#000',
    shadowOffset: {width: 0, height: 2},
    shadowOpacity: 0.3,
    shadowRadius: 4,
    elevation: 3,
  },
  recapImage: {
    width: '100%',
    height: 200,
    backgroundColor: '#2A2A2A',
  },
  recapImagePlaceholder: {
    width: '100%',
    height: 200,
    backgroundColor: '#2A2A2A',
  },
  recapDetails: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: 12,
  },
  typeBadge: {
    paddingVertical: 4,
    paddingHorizontal: 8,
    borderRadius: 4,
  },
  typeBadgeText: {
    color: 'white',
    fontSize: 12,
    fontWeight: 'bold',
  },
  recapDate: {
    color: '#F5F5F5',
    fontSize: 14,
  },
  emptyStateText: {
    textAlign: 'center',
    color: '#F5F5F5',
    marginTop: 50,
    fontSize: 16,
  },
  loadingText: {
    textAlign: 'center',
    color: '#F5F5F5',
    marginTop: 50,
    fontSize: 16,
  },
  loadingContainer: {
    justifyContent: 'flex-start',
    backgroundColor: '#121212',
    borderBottomWidth: 1,
    borderBottomColor: '#333',
  },
  loadingInner: {
    height: 50,
    justifyContent: 'center',
    alignItems: 'center',
    paddingTop: 15,
  },
  detailView: {
    position: 'absolute',
    top: 0,
    right: 0,
    bottom: 0,
    width: '100%',
    backgroundColor: '#121212',
    zIndex: 1000,
  },
  detailContent: {
    flex: 1,
  },
  closeButton: {
    position: 'absolute',
    top: 40,
    right: 20,
    zIndex: 1001,
    padding: 12,
    backgroundColor: 'rgba(0,0,0,0.3)',
    borderRadius: 24,
  },
  detailImageContainer: {
    width: '110%',
    height: 400,
    marginLeft: '-5%',
    backgroundColor: '#2A2A2A',
    overflow: 'hidden',
  },
  detailImage: {
    width: '100%',
    height: '100%',
    backgroundColor: 'transparent',
  },
  detailContentInner: {
    padding: 16,
  },
  detailHeaderContent: {
    flexDirection: "row",
    justifyContent: "space-between",
    alignItems: "center",
    marginBottom: 16,
  },
  detailDate: {
    fontSize: 16,
    color: "#F5F5F5",
  },
  detailText: {
    fontSize: 16,
    lineHeight: 24,
    color: "#F5F5F5",
  },
  imagePlaceholder: {
    backgroundColor: "#2A2A2A",
  },
  animatedImage: {
    position: 'absolute',
    zIndex: 1001,
  },
});
</file>

<file path="apps/expo/app/index.tsx">
import { useUser } from "@clerk/clerk-expo";
import { Redirect } from "expo-router";
import { Text } from "react-native";

export default function Index() {
  const user = useUser();
  if (user.isLoaded && user.isSignedIn) {
    return <Redirect href="/(tabs)/add" />;
  }

  if (user.isLoaded && !user.isSignedIn) {
    return <Redirect href="/(auth)/sign-up" />;
  }

  if (!user.isLoaded) {
    return <Text>Loading...</Text>;
  }
}
</file>

<file path="apps/expo/babel.config.ts">
module.exports = function (api: { cache: (arg0: boolean) => void; }) {
  api.cache(true);
  return {
    presets: ['babel-preset-expo'],
  };
};
</file>

<file path="apps/expo/eslint.config.mjs">
import baseConfig from "@acme/eslint-config/base";
import reactConfig from "@acme/eslint-config/react";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: [".expo/**", "expo-plugins/**"],
  },

];
</file>

<file path="apps/expo/package.json">
{
  "name": "@acme/expo",
  "main": "expo-router/entry",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "expo start",
    "android": "expo run:android",
    "ios": "expo run:ios",
    "web": "expo start --web",
    "lint": "expo lint"
  },
  "dependencies": {
    "@clerk/clerk-expo": "^2.3.9",
    "@expo/vector-icons": "^14.0.2",
    "@react-navigation/bottom-tabs": "^7.0.0",
    "@react-navigation/native": "^7.0.0",
    "@tanstack/react-query": "^5.60.2",
    "@trpc/client": "^11.0.0-rc.633",
    "@trpc/react-query": "11.0.0-rc.633",
    "@trpc/server": "11.0.0-rc.633",
    "expo": "~52.0.6",
    "expo-blur": "~14.0.1",
    "expo-constants": "~17.0.3",
    "expo-font": "~13.0.1",
    "expo-haptics": "~14.0.0",
    "expo-linear-gradient": "^14.0.1",
    "expo-linking": "~7.0.2",
    "expo-network": "latest",
    "expo-router": "~4.0.5",
    "expo-status-bar": "~2.0.0",
    "expo-symbols": "~0.2.0",
    "expo-system-ui": "~4.0.2",
    "expo-web-browser": "~14.0.1",
    "lucide-react-native": "^0.456.0",
    "react": "18.3.1",
    "react-dom": "18.3.1",
    "react-native": "0.76.1",
    "react-native-gesture-handler": "~2.20.2",
    "react-native-reanimated": "~3.16.1",
    "react-native-safe-area-context": "4.12.0",
    "react-native-screens": "~4.0.0",
    "react-native-web": "~0.19.13",
    "react-native-webview": "13.12.2"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/trpc": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "@babel/core": "^7.26.0",
    "@types/jest": "^29.5.12",
    "@types/react": "~18.3.12",
    "@types/react-test-renderer": "^18.3.0",
    "react-test-renderer": "18.3.1",
    "typescript": "^5.3.3"
  },
  "private": true
}
</file>

<file path="apps/expo/README.md">
# Welcome to your Expo app 👋

This is an [Expo](https://expo.dev) project created with [`create-expo-app`](https://www.npmjs.com/package/create-expo-app).

## Get started

1. Install dependencies

   ```bash
   npm install
   ```

2. Start the app

   ```bash
    npx expo start
   ```

In the output, you'll find options to open the app in a

- [development build](https://docs.expo.dev/develop/development-builds/introduction/)
- [Android emulator](https://docs.expo.dev/workflow/android-studio-emulator/)
- [iOS simulator](https://docs.expo.dev/workflow/ios-simulator/)
- [Expo Go](https://expo.dev/go), a limited sandbox for trying out app development with Expo

You can start developing by editing the files inside the **app** directory. This project uses [file-based routing](https://docs.expo.dev/router/introduction).

## Get a fresh project

When you're ready, run:

```bash
npm run reset-project
```

This command will move the starter code to the **app-example** directory and create a blank **app** directory where you can start developing.

## Learn more

To learn more about developing your project with Expo, look at the following resources:

- [Expo documentation](https://docs.expo.dev/): Learn fundamentals, or go into advanced topics with our [guides](https://docs.expo.dev/guides).
- [Learn Expo tutorial](https://docs.expo.dev/tutorial/introduction/): Follow a step-by-step tutorial where you'll create a project that runs on Android, iOS, and the web.

## Join the community

Join our community of developers creating universal apps.

- [Expo on GitHub](https://github.com/expo/expo): View our open source platform and contribute.
- [Discord community](https://chat.expo.dev): Chat with Expo users and ask questions.
</file>

<file path="apps/expo/tsconfig.json">
{
  "compilerOptions": {
    "moduleResolution": "bundler",
    "module": "ESNext",
    "target": "ESNext",
    "allowJs": true,
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "strict": true,
    "noEmit": true,
    "skipLibCheck": true,
    "paths": {
      "@/*": [
        "./*"
      ],
      "@acme/api/*": [
        "../../packages/api/*"
      ]
    },
    "types": [
      "node"
    ],
    "jsx": "react-native",
    "checkJs": false,
    "moduleSuffixes": [
      ".ios",
      ".android",
      ".native",
      ""
    ]
  },
  "include": [
    "expo-router/**/*.{ts,tsx}",
    "utils/**/*",
    "app/**/*",
    "*.{ts,tsx}",
    "*.js"
  ],
  "exclude": [
    "node_modules"
  ],
  "extends": "expo/tsconfig.base"
}
</file>

<file path="apps/expo/turbo.json">
{
  "$schema": "https://turborepo.org/schema.json",
  "extends": ["//"],
  "tasks": {
    "dev": {
      "persistent": true,
      "interactive": true
    }
  }
}
</file>

<file path="apps/expo/utils/api.tsx">
import { createTRPCReact } from '@trpc/react-query';
import { type AppRouter } from '@acme/trpc';

export const api = createTRPCReact<AppRouter>();
</file>

<file path="apps/expo/utils/base-url.tsx">
import Constants from "expo-constants";
import { Platform } from 'react-native';
import * as Network from 'expo-network';

export const getBaseUrl = () => {
  // For iOS, we need to be extra careful about IP resolution
  if (Platform.OS === 'ios') {
    try {
      // Try multiple methods to get the correct local IP
      const debuggerHost = Constants.expoConfig?.hostUri;
      console.log('Debugger Host (iOS):', debuggerHost);

      // Attempt to get the actual network interface IP
      // Prioritize debuggerHost, fall back to network interface

      const host = debuggerHost!.split(':')[0]

      // For iOS, you might need to use the full IP
      const baseUrl = `http://${host}:8787`;
      console.log('Resolved iOS Base URL:', baseUrl);

      return baseUrl;
    } catch (error) {
      console.error('iOS Base URL Detection Error:', error);
      throw new Error('Failed to determine base URL for iOS');
    }
  }

  // Fallback for other platforms
  return 'http://localhost:8787';
};
</file>

<file path="apps/expo/utils/TRPCProvider.tsx">
import {QueryClient, QueryClientProvider} from '@tanstack/react-query';
import {httpBatchLink} from '@trpc/client';
import React, {useState} from 'react';
import {api} from './api';
import superjson from 'superjson';
import {getBaseUrl} from "@/utils/base-url.tsx";
import {useAuth} from '@clerk/clerk-expo'

export function TRPCProvider({children}: { children: React.ReactNode; }) {
  const { getToken} = useAuth()


  const [queryClient] = useState(() => new QueryClient());
  const [trpcClient] = useState(() =>
    api.createClient({
      links: [
        httpBatchLink({
          transformer: superjson,
          url: `${getBaseUrl()}/trpc`,
          async headers() {
          const token = await getToken()
          return {
            Authorization: token ? `Bearer ${token}` : '',
          }
        },
        }),
      ],
    })
  );

  return (
    <api.Provider client={trpcClient} queryClient={queryClient}>
      <QueryClientProvider client={queryClient}>
        {children}
      </QueryClientProvider>
    </api.Provider>
  );
}
</file>

<file path="apps/workflows/.editorconfig">
# http://editorconfig.org
root = true

[*]
indent_style = tab
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.yml]
indent_style = space
</file>

<file path="apps/workflows/.gitignore">
# Logs

logs
_.log
npm-debug.log_
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)

report.[0-9]_.[0-9]_.[0-9]_.[0-9]_.json

# Runtime data

pids
_.pid
_.seed
\*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover

lib-cov

# Coverage directory used by tools like istanbul

coverage
\*.lcov

# nyc test coverage

.nyc_output

# Grunt intermediate storage (https://gruntjs.com/creating-plugins#storing-task-files)

.grunt

# Bower dependency directory (https://bower.io/)

bower_components

# node-waf configuration

.lock-wscript

# Compiled binary addons (https://nodejs.org/api/addons.html)

build/Release

# Dependency directories

node_modules/
jspm_packages/

# Snowpack dependency directory (https://snowpack.dev/)

web_modules/

# TypeScript cache

\*.tsbuildinfo

# Optional npm cache directory

.npm

# Optional eslint cache

.eslintcache

# Optional stylelint cache

.stylelintcache

# Microbundle cache

.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history

.node_repl_history

# Output of 'npm pack'

\*.tgz

# Yarn Integrity file

.yarn-integrity

# dotenv environment variable files

.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# parcel-bundler cache (https://parceljs.org/)

.cache
.parcel-cache

# Next.js build output

.next
out

# Nuxt.js build / generate output

.nuxt
dist

# Gatsby files

.cache/

# Comment in the public line in if your project uses Gatsby and not Next.js

# https://nextjs.org/blog/next-9-1#public-directory-support

# public

# vuepress build output

.vuepress/dist

# vuepress v2.x temp and cache directory

.temp
.cache

# Docusaurus cache and generated files

.docusaurus

# Serverless directories

.serverless/

# FuseBox cache

.fusebox/

# DynamoDB Local files

.dynamodb/

# TernJS port file

.tern-port

# Stores VSCode versions used for testing VSCode extensions

.vscode-test

# yarn v2

.yarn/cache
.yarn/unplugged
.yarn/build-state.yml
.yarn/install-state.gz
.pnp.\*

# wrangler project

.dev.vars
.wrangler/

# macOS
.DS_Store
</file>

<file path="apps/workflows/.prettierrc">
{
	"printWidth": 140,
	"singleQuote": true,
	"semi": true,
	"useTabs": true
}
</file>

<file path="apps/workflows/eslint.config.js">
import baseConfig from "@acme/eslint-config/base";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: ["dist/**", "src/workflows/daily-recap.ts"],
  },
  ...baseConfig
];
</file>

<file path="apps/workflows/package.json">
{
	"name": "@acme/workflows",
	"version": "0.0.1",
	"scripts": {
		"deploy": "wrangler deploy",
		"dev": "wrangler dev --test-scheduled --remote",
		"clean": "git clean -xdf .cache .turbo node_modules .wrangler"
	},
	"type": "module",
	"devDependencies": {
		"@acme/db": "workspace:*",
		"@acme/eslint-config": "workspace:*",
		"@acme/tsconfig": "workspace:*",
		"typescript": "^5.3.3",
		"wrangler": "3.93.0"
	}
}
</file>

<file path="apps/workflows/README.md">
# Cloudflare Workflows

This is the starter template for Workflows, a durable execution engine built on top of Cloudflare Workers.

* Clone this repository to get started with Workflows
* Read the [Workflows announcement blog](https://blog.cloudflare.com/building-workflows-durable-execution-on-workers/) to learn more about what Workflows is and how to build durable, multi-step applications using the Workflows model.
* Review the [Workflows developer documentation](https://developers.cloudflare.com/workflows/) to dive deeper into the Workflows API and how it works.

## Usage

**Visit the [get started guide](https://developers.cloudflare.com/workflows/get-started/guide/) for Workflows to create and deploy your first Workflow.**

### Example

You can create a project using this template by using `npm create cloudflare@latest`:

```sh
npm create cloudflare@latest workflows-starter -- --template "cloudflare/workflows-starter"
```

This will automatically clone this repository, install the dependencies, and prompt you to optionally deploy:

```sh
╭ Create an application with Cloudflare Step 1 of 3
│
├ In which directory do you want to create your application?
│ dir ./workflows-tutorial
│
├ What would you like to start with?
│ category Template from a GitHub repo
│
├ What's the url of git repo containing the template you'd like to use?
│ repository cloudflare/workflows-starter
│
├ Cloning template from: cloudflare/workflows-starter
│
├ template cloned and validated
│
├ Copying template files
│ files copied to project directory
│
├ Installing dependencies
│ installed via `npm install`
│
╰ Application created

╭ Configuring your application for Cloudflare Step 2 of 3
│
├ Installing @cloudflare/workers-types
│ installed via npm
│
├ Adding latest types to `tsconfig.json`
│ added @cloudflare/workers-types/2023-07-01
│
├ Do you want to use git for version control?
│ yes git
│
├ Initializing git repo
│ initialized git
│
├ Committing new files
│ git commit
│
╰ Application configured

╭ Deploy with Cloudflare Step 3 of 3
│
├ Do you want to deploy your application?
│ no deploy via `npm run deploy`
│
╰ Done

────────────────────────────────────────────────────────────
🎉  SUCCESS  Application created successfully!
```

The [Workflows documentation](https://developers.cloudflare.com/workflows/) contains examples, the API reference, and architecture guidance.

## License

Copyright 2024, Cloudflare. Apache 2.0 licensed. See the LICENSE file for details.
</file>

<file path="apps/workflows/src/index.ts">
import {DailyRecapWorkflow} from "./workflows/daily-recap";
import { GetUsersForRecapWorkflow } from "./workflows/get-users-for-recap";

export {
	DailyRecapWorkflow,
	GetUsersForRecapWorkflow
}

export default {
	scheduled(event, env: Env, ctx) {
		console.log("cron processed");
		ctx.waitUntil(env.GET_USERS_WORKFLOW.create());
	}
} satisfies ExportedHandler<Env>;
</file>

<file path="apps/workflows/src/workflows/daily-recap.ts">
import {WorkflowEntrypoint  } from "cloudflare:workers";
import type {WorkflowEvent, WorkflowStep} from "cloudflare:workers";
import {getDB, moments, recaps, userMeta} from "@acme/db";
import { and, gte, lte, eq } from 'drizzle-orm';

export type DailyRecapWorkflowParams = {
    userId: string;
    timezone: string;
	dev?: boolean
}

const getPacificTime = (date: Date = new Date()) => {
    return new Date(
        date.toLocaleString('en-US', {
            timeZone: 'America/Los_Angeles'
        })
    );
};

export class DailyRecapWorkflow extends WorkflowEntrypoint<Env, DailyRecapWorkflowParams> {
	async run(event: WorkflowEvent<DailyRecapWorkflowParams>, step: WorkflowStep) {
		const { userId, timezone } = event.payload;

		const userMetadata = await step.do('Get user metadata', async () => {
			const db = getDB(this.env);
			const meta = await db.query.userMeta.findFirst({
				where: eq(userMeta.userId, userId),
			});
			return meta;
		});

		const yesterdaysMoments = await step.do('Get moments', async () => {
			const db = getDB(this.env);
			
			// Calculate date range based on dev flag
			const todayPT = getPacificTime();
			const targetDate = new Date(todayPT);
			
			if (!event.payload.dev) {
				// Normal case - get yesterday's moments
				targetDate.setDate(targetDate.getDate() - 1);
			}
			
			const startOfDay = new Date(targetDate.setHours(0, 0, 0, 0));
			const endOfDay = new Date(targetDate.setHours(23, 59, 59, 999));

			const res = await db.select()
				.from(moments)
				.where(
					and(
						eq(moments.userId, userId),
						gte(moments.createdAt, startOfDay),
						lte(moments.createdAt, endOfDay)
					)
				);
			
			return res;
		});

		const aiGeneratedRecap: string = await step.do('Generate text from AI', async () => {
			console.log('yesterdaysMoments:', yesterdaysMoments);

			const res  = await this.env.AI.run(
				// @ts-ignore
				"@cf/meta/llama-3.3-70b-instruct-fp8-fast", {
					prompt: `
					Heres what happened yesterday, turn it into a quick little story, maybe add some humor, maybe make it profound, but at the very least make it interesting:
					First moment: 
					${yesterdaysMoments.map(m => m.text).join('\n Next moment:\n')}
					`
				}
			)
			console.log('AI generated recap:', res);

			// @ts-ignore
			return res.response
		});

		const imagePrompt: string = await step.do('Generate image prompt', async () => {
			const res = await this.env.AI.run(
				// @ts-ignore
				"@cf/meta/llama-3.3-70b-instruct-fp8-fast", {
					prompt: `
					Create a detailed image generation prompt that captures the essence of this daily recap. 
					The prompt should be vivid and descriptive, but keep it under 100 words.
					Here's the recap:
					${aiGeneratedRecap}
					`
				}
			);
			console.log('Generated image prompt:', res);

			// @ts-ignore
			return res.response;
		});

		const generatedImage = await step.do('Generate image', async () => {
			const artStyle = userMetadata?.artStyle ?? 'classical painting';
			
			const styleModifiers = {
				'classical painting': 'in the style of a classical oil painting, rich colors, dramatic lighting',
				'ethereal animated fairy': 'in an ethereal fairy tale style, magical, dreamy, soft glowing colors',
				'childrens book': 'in a whimsical children\'s book illustration style, colorful, playful',
				'3d animated style': 'in a modern 3D animated style, vibrant, polished, cinematic',
			};

			const styleModifier = styleModifiers[artStyle as keyof typeof styleModifiers];
			
			const enhancedPrompt = `${imagePrompt} ${styleModifier}`;
			console.log('Enhanced prompt with style:', enhancedPrompt);

			const res = await this.env.AI.run(
				// @ts-ignore
				'@cf/black-forest-labs/flux-1-schnell', {
					prompt: enhancedPrompt,
					num_steps: 8
				}
			);
			// @ts-ignore
			return res.image;
		});

		const imageKey = await step.do('Store image in R2', async () => {
			const imageKey = `recap-images/${Date.now()}.jpg`;
			
			// Convert base64 to Uint8Array using Web APIs
			const binaryString = atob(generatedImage);
			const bytes = new Uint8Array(binaryString.length);
			for (let i = 0; i < binaryString.length; i++) {
				bytes[i] = binaryString.charCodeAt(i);
			}
			
			await this.env.IMAGES_BUCKET.put(imageKey, bytes, {
				httpMetadata: {
					contentType: 'image/jpeg',
				},
			});
			
			return imageKey;
		});

		await step.do('Add to database', async () => {
			const db = getDB(this.env);
			await db.insert(recaps).values({ 
				text: aiGeneratedRecap, 
				userId: userId,  // Now using the specific user's ID
				createdAt: new Date(), 
				type: 'daily', 
				imageId: imageKey
			});
		});
	}
}
</file>

<file path="apps/workflows/src/workflows/get-users-for-recap.ts">
import { WorkflowEntrypoint } from "cloudflare:workers";
import type { WorkflowEvent, WorkflowStep } from "cloudflare:workers";
import { getDB, userMeta } from "@acme/db";
import { eq, isNull, or, gt, lt, and } from 'drizzle-orm';

// Type for the workflow parameters
interface GetUsersForRecapParams {
    batchSize?: number;
    lastProcessedUserId?: string;
}

export class GetUsersForRecapWorkflow extends WorkflowEntrypoint<Env, GetUsersForRecapParams> {
    async run(event: WorkflowEvent<GetUsersForRecapParams>, step: WorkflowStep) {
        const batchSize = event.payload.batchSize ?? 100; // Process users in batches
        const lastProcessedUserId = event.payload.lastProcessedUserId;

        // Get users who haven't had a recap recently
        const users = await step.do('Get batch of active users', async () => {
            const db = getDB(this.env);
            const now = new Date();
            const twentyFourHoursAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);

            const baseCondition = or(
                isNull(userMeta.lastRecapAt),
                lt(userMeta.lastRecapAt, twentyFourHoursAgo)
            );
            
            const whereCondition = lastProcessedUserId 
                ? and(baseCondition, gt(userMeta.userId, lastProcessedUserId))
                : baseCondition;

            const query = db.select()
                .from(userMeta)
                .where(whereCondition)
                .limit(batchSize);

            return await query;
        });

        // Process users in parallel, with retry logic
        await step.do(
            'Trigger individual recaps',
            {
                retries: {
                    limit: 5,
                    delay: '1 minute',
                    backoff: 'exponential',
                },
                timeout: '5 minutes',
            },
            async () => {
                // Process users in parallel with Promise.all
                await Promise.all(users.map(async (user) => {
                    try {
                        // Start a new workflow instance for each user
                        await this.env.DAILY_RECAP_WORKFLOW.create({
                            params: {
                                userId: user.userId,
                                timezone: user.timezone
                            }
                        });

                        // Update lastRecapAt to prevent duplicate processing
                        const db = getDB(this.env);
                        await db
                            .update(userMeta)
                            .set({ lastRecapAt: new Date() })
                            .where(eq(userMeta.userId, user.userId));
                    } catch (error) {
                        console.error(`Failed to process user ${user.userId}:`, error);
                        throw error; // Let the retry mechanism handle it
                    }
                }));
            }
        );

        // If we processed a full batch, trigger another workflow for the next batch
        if (users.length === batchSize) {
            const lastUser = users[users.length - 1];
            if (!lastUser) return;
            
            await step.do('Trigger next batch', async () => {
                await this.env.GET_USERS_WORKFLOW.create({
                    params: {
                        batchSize,
                        lastProcessedUserId: lastUser.userId
                    }
                });
            });
        }
    }
}
</file>

<file path="apps/workflows/tsconfig.json">
{
  "compilerOptions": {
    "target": "ESNext",
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "strict": true,
    "skipLibCheck": true,
    "lib": [
      "ESNext"
    ],
    "types": [
        "@cloudflare/workers-types"
    ],
  },
	"extends": "@acme/tsconfig/base.json"
}
</file>

<file path="apps/workflows/turbo.json">
{
  "$schema": "https://turborepo.org/schema.json",
  "extends": ["//"],
  "tasks": {
    "dev": {
      "persistent": true,
      "interactive": true
    }
  }
}
</file>

<file path="apps/workflows/worker-configuration.d.ts">
// Generated by Wrangler by running `wrangler types`

interface Env {
	IMAGES_BUCKET: R2Bucket;
	DB: D1Database;
	AI: Ai;
	DAILY_RECAP_WORKFLOW: Workflow;
	GET_USERS_WORKFLOW: Workflow;
}
</file>

<file path="apps/workflows/wrangler.toml">
name = "daily-recap-workflow"
main = "src/index.ts"
compatibility_date = "2024-12-05"

[observability]
enabled = true

[[workflows]]
# name of your workflow
name = "daily-recap-workflow"
# binding name env.MYWORKFLOW
binding = "DAILY_RECAP_WORKFLOW"
# this is the class that extends the Workflow class in src/index.ts
class_name = "DailyRecapWorkflow"

[[r2_buckets]]
bucket_name = ""
preview_bucket_name = "-dev"
binding = "IMAGES_BUCKET"

[[d1_databases]]
binding = "DB"
database_name = ""
database_id = ""

[ai]
binding = "AI"

[triggers]
crons = [ "0 6 * * *" ]

[dev]
port = 8788

[[workflows]]
name = "get-users-for-recap-workflow"
binding = "GET_USERS_WORKFLOW"
class_name = "GetUsersForRecapWorkflow"
</file>

<file path="CONTRIBUTING.md">
# 贡献指南

感谢您对 Cloudflare Turbo Stack 项目的贡献兴趣！本文档提供了参与项目开发的详细指南，帮助您快速上手并遵循项目的最佳实践。

## 目录

- [开发环境设置](#开发环境设置)
- [开发工作流程](#开发工作流程)
- [提交代码](#提交代码)
- [创建新应用或包](#创建新应用或包)
- [常见问题解决](#常见问题解决)

## 开发环境设置

### 前提条件

- Node.js >= 20.16.0
- pnpm >= 9.6.0
- Git

### 初始设置

1. 克隆仓库

```bash
git clone <repository-url>
cd cloudflare-workers-d1-r2-expo-turborepo-trpc-workflows-astro
```

2. 安装依赖

```bash
pnpm install
```

3. 环境变量配置

```bash
cp .env.example .env
# 编辑 .env 文件，填入必要的环境变量
```

## 开发工作流程

### 启动开发服务器

启动所有服务：

```bash
pnpm dev
```

启动特定应用：

```bash
# 例如，仅启动 API 服务
pnpm dev -F @acme/apiservice...
```

### 数据库操作

生成数据库迁移：

```bash
pnpm db:generate
```

应用数据库迁移：

```bash
pnpm -F @acme/db migrate
```

打开数据库管理界面：

```bash
pnpm db:studio
```

### 代码质量检查

运行 ESLint 检查：

```bash
pnpm lint
```

自动修复 ESLint 问题：

```bash
pnpm lint:fix
```

检查代码格式：

```bash
pnpm format
```

自动修复格式问题：

```bash
pnpm format:fix
```

类型检查：

```bash
pnpm typecheck
```

## 提交代码

### 分支创建

从最新的 main 分支创建功能分支：

```bash
git checkout main
git pull
git checkout -b feature/your-feature-name
```

### 提交前检查

在提交代码前，确保：

1. 代码通过所有检查：

```bash
pnpm lint && pnpm format && pnpm typecheck
```

2. 所有应用能正常构建：

```bash
pnpm build
```

### 提交信息格式

遵循约定式提交规范：

```
<类型>(<作用域>): <描述>

[可选的详细描述]

[可选的关闭问题引用]
```

示例：

```
feat(auth): 添加用户注册功能

实现了基于 Clerk 的用户注册流程，包括邮箱验证和初始化用户配置文件。

Closes #123
```

### 创建 Pull Request

1. 推送分支到远程仓库：

```bash
git push -u origin feature/your-feature-name
```

2. 在 GitHub 上创建 Pull Request
3. 填写 PR 描述，包括：
   - 实现的功能或修复的问题
   - 实现方法的简要说明
   - 测试方法
   - 相关的 issue 链接

4. 等待代码审查和 CI 检查通过

## 创建新应用或包

### 创建新应用

1. 在 `apps` 目录下创建新目录
2. 初始化 package.json：

```json
{
  "name": "@acme/your-app-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "dev": "your-dev-command",
    "build": "your-build-command",
    "clean": "git clean -xdf .cache .turbo node_modules"
  },
  "dependencies": {
    "@acme/db": "workspace:*"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/tsconfig": "workspace:*"
  }
}
```

3. 创建 `tsconfig.json`，继承基础配置：

```json
{
  "extends": "@acme/tsconfig/base.json",
  "compilerOptions": {
    "tsBuildInfoFile": ".cache/tsbuildinfo.json"
  },
  "include": ["src"],
  "exclude": ["node_modules"]
}
```

4. 创建 `turbo.json` 配置：

```json
{
  "extends": ["//"]
}
```

### 创建新包

1. 在 `packages` 目录下创建新目录
2. 初始化 package.json：

```json
{
  "name": "@acme/your-package-name",
  "version": "0.0.1",
  "private": true,
  "type": "module",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "default": "./src/index.ts"
    }
  },
  "scripts": {
    "build": "tsc",
    "clean": "git clean -xdf .cache .turbo dist node_modules",
    "dev": "tsc --watch",
    "lint": "eslint",
    "typecheck": "tsc --noEmit --emitDeclarationOnly false"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "typescript": "catalog:"
  }
}
```

3. 创建 `tsconfig.json`，继承基础配置
4. 创建 `src/index.ts` 作为包的入口点

## 常见问题解决

### 依赖问题

如果遇到依赖相关问题，尝试：

```bash
# 清理 node_modules
pnpm clean

# 重新安装依赖
pnpm install
```

### Turborepo 缓存问题

如果遇到构建缓存问题：

```bash
# 清理 Turborepo 缓存
rm -rf .turbo
```

### 环境变量问题

确保所有必要的环境变量都已在 `.env` 文件中设置，并且已在 `turbo.json` 的 `globalEnv` 中声明。

---

如有任何问题或建议，请创建 issue 或联系项目维护者。我们欢迎所有形式的贡献！
</file>

<file path="DEVELOPMENT_GUIDELINES.md">
# Cloudflare Turbo Stack 开发规范

本文档提供了基于 Cloudflare Turbo Stack 项目的开发规范指南，旨在确保多人协作开发时保持一致性和高质量的代码标准。

## 目录

- [项目结构规范](#项目结构规范)
- [技术栈规范](#技术栈规范)
- [代码风格指南](#代码风格指南)
- [Git 工作流规范](#git-工作流规范)
- [依赖管理规范](#依赖管理规范)
- [环境变量管理](#环境变量管理)
- [构建与部署规范](#构建与部署规范)
- [测试规范](#测试规范)
- [文档规范](#文档规范)

## 项目结构规范

### Monorepo 结构

项目采用 Turborepo 管理的 Monorepo 结构，包含以下主要目录：

```
.
├── apps/                # 应用程序
│   ├── apiservice/      # Cloudflare Worker API
│   ├── astro/           # 静态网站/登陆页
│   ├── expo/            # 移动应用
│   └── workflows/       # Cloudflare Workflows
├── packages/            # 共享包
│   ├── db/              # 数据库模式和工具
│   └── trpc/            # tRPC 路由定义
└── tooling/             # 共享开发工具
    ├── eslint/          # ESLint 配置
    ├── github/          # GitHub 工作流配置
    ├── prettier/        # Prettier 配置
    ├── tailwind/        # Tailwind 配置
    └── typescript/      # TypeScript 配置
```

### 新应用/包的添加规则

1. **应用程序**：所有独立应用应放在 `apps/` 目录下
2. **共享包**：可重用的代码库应放在 `packages/` 目录下
3. **工具配置**：共享的开发工具配置应放在 `tooling/` 目录下
4. **命名规范**：
   - 包名使用小写字母，单词间用连字符（-）分隔
   - 内部包名前缀统一为 `@acme/`

## 技术栈规范

项目使用以下技术栈，新功能开发必须遵循这些选择以保持一致性：

- **前端**：React Native (Expo)、Astro
- **后端**：Cloudflare Workers、Workers AI
- **数据库**：Cloudflare D1 (SQLite)
- **存储**：Cloudflare R2
- **认证**：Clerk
- **API**：tRPC
- **构建工具**：Turborepo
- **包管理器**：pnpm

### 技术选择原则

1. 优先使用项目已有的技术和库
2. 添加新依赖前，必须在团队内讨论并获得批准
3. 避免引入功能重叠的库

## 代码风格指南

### TypeScript

- 使用项目提供的 TypeScript 配置（`@acme/tsconfig`）
- 严格模式（`strict: true`）
- 避免使用 `any` 类型，优先使用 `unknown` 或具体类型
- 使用类型推断，但在函数参数和返回值上显式声明类型

### ESLint

项目使用统一的 ESLint 配置，位于 `tooling/eslint/` 目录：

- 遵循基础配置 (`base.js`)
- React 项目使用 React 特定规则 (`react.js`)
- Next.js 项目使用 Next.js 特定规则 (`nextjs.js`)

运行 `pnpm lint` 检查代码，`pnpm lint:fix` 自动修复问题。

### Prettier

使用项目统一的 Prettier 配置（`tooling/prettier/index.js`）：

- 导入排序规则遵循配置中的 `importOrder`
- 使用 Tailwind CSS 插件确保类名排序一致

运行 `pnpm format` 检查格式，`pnpm format:fix` 自动修复格式问题。

### 命名约定

- **文件名**：
  - React 组件使用 PascalCase（如 `Button.tsx`）
  - 工具函数使用 camelCase（如 `formatDate.ts`）
  - 常量文件使用 kebab-case（如 `api-constants.ts`）
- **变量/函数**：使用 camelCase
- **类/接口/类型**：使用 PascalCase
- **常量**：使用 UPPER_SNAKE_CASE

## Git 工作流规范

### 分支策略

- **main**：主分支，保持可部署状态
- **feature/**：功能分支，从 main 分支创建
- **bugfix/**：修复分支，从 main 分支创建
- **release/**：发布分支，用于准备发布

### 提交规范

提交信息应遵循以下格式：

```
<类型>(<作用域>): <描述>

[可选的详细描述]

[可选的关闭问题引用]
```

类型包括：
- **feat**：新功能
- **fix**：错误修复
- **docs**：文档更改
- **style**：不影响代码含义的更改（空格、格式等）
- **refactor**：既不修复错误也不添加功能的代码更改
- **perf**：提高性能的代码更改
- **test**：添加或修正测试
- **chore**：对构建过程或辅助工具的更改

示例：`feat(auth): 添加用户注册功能`

### 代码审查

- 所有代码更改必须通过 Pull Request 提交
- 至少需要一名团队成员的审查和批准
- CI 检查必须通过（类型检查、lint、测试等）

## 依赖管理规范

### 包管理器

- 使用 pnpm 作为唯一的包管理器
- Node.js 版本要求：>=20.16.0
- pnpm 版本要求：^9.6.0

### 工作区依赖

- 工作区内部依赖使用 `workspace:*` 版本说明符
- 共享依赖使用 `catalog:` 版本说明符，确保版本一致性

### 添加依赖

- 添加全局依赖：`pnpm add -w <package>`
- 添加特定工作区依赖：`pnpm add <package> --filter <workspace>`
- 添加开发依赖：`pnpm add -D <package> [--filter <workspace>]`

## 环境变量管理

- 环境变量定义在项目根目录的 `.env` 文件中
- 使用 `.env.example` 作为模板，记录所需的环境变量
- 通过 `turbo.json` 的 `globalEnv` 配置共享环境变量
- 在代码中，使用 `import { env } from '~/env'` 访问环境变量，而不是直接使用 `process.env`

## 构建与部署规范

### 本地开发

- 启动所有服务：`pnpm dev`
- 启动特定应用：`pnpm dev -F @acme/<app-name>...`

### 构建

- 构建所有应用：`pnpm build`
- 构建特定应用：`pnpm build -F @acme/<app-name>...`

### 部署

- Cloudflare Workers 部署：`pnpm deploy -F @acme/<worker-name>`
- 数据库迁移：
  - 生成迁移：`pnpm db:generate`
  - 应用迁移：`pnpm -F @acme/db migrate`

## 测试规范

- 单元测试应放在与被测代码相同目录下的 `__tests__` 目录中
- 集成测试应放在应用的 `tests` 目录中
- 测试文件命名：`<被测文件名>.test.ts` 或 `<被测文件名>.spec.ts`
- 使用 Jest 或 Vitest 作为测试框架

## 文档规范

- 每个应用和包应有自己的 README.md 文件，描述其用途和使用方法
- API 文档应使用 JSDoc 注释
- 复杂功能应有设计文档，放在相关应用/包的 `docs` 目录下
- 项目级文档放在根目录，如本开发规范文档

---

## 前后端交互与 API 扩展规范

### 1. 交互架构说明
- **静态网站（Astro）** 和 **移动应用（Expo）** 通过 tRPC 客户端直接调用 `apiservice`（Cloudflare Worker API），实现无 REST 层的类型安全远程调用。
- tRPC 路由统一在 `packages/trpc` 维护，前端通过 `@acme/trpc` 包自动获得类型推断和 API 路由。
- 数据请求流程：前端页面/功能 → tRPC 客户端 → apiservice（tRPC handler）→ 数据库（Cloudflare D1）或存储（R2）。

### 2. 新增页面/功能时的 API 扩展流程
1. **前端页面增加（Astro/Expo）**：
   - 新建页面或功能组件，按需调用 tRPC 提供的 API。
   - 若需新接口，需同步扩展 tRPC 路由。
2. **API 扩展（apiservice & trpc）**：
   - 在 `packages/trpc/src/router/` 下新增或扩展对应路由文件，定义输入输出类型和业务逻辑。
   - 在 `packages/trpc/src/router/index.ts` 注册新路由。
   - 在 `apps/apiservice/src` 中确保 tRPC handler 正确引入路由。
3. **数据库 schema 联动**：
   - 若 API 涉及新表/字段，先在 `packages/db/src/schema/` 下定义/修改 schema。
   - 运行 `pnpm db:generate` 生成迁移脚本，`pnpm -F @acme/db migrate` 应用迁移。
   - API 层通过 ORM 访问数据库，保持类型一致。
4. **前端调用**：
   - 前端通过 `@acme/trpc` 的 hooks（如 `trpc.useQuery`、`trpc.useMutation`）调用新 API，自动获得类型提示。

### 3. tRPC 路由扩展与类型安全
- 路由定义集中在 `packages/trpc`，所有输入输出类型自动推断。
- 前端无需手动维护接口类型，避免类型漂移。
- 推荐每次扩展 API 时补充 JSDoc 注释，便于自动生成文档。

### 4. 典型开发流程示例
1. Astro/Expo 新增“用户资料”页面 → 发现需获取/更新用户信息
2. 在 `packages/trpc/src/router/user.ts` 新增 `getProfile`、`updateProfile` 方法
3. 在 `packages/db/src/schema/user.ts` 增加字段（如 avatar）并迁移
4. 在前端页面通过 `trpc.user.getProfile.useQuery()` 获取数据，`trpc.user.updateProfile.useMutation()` 更新
5. 代码提交后，CI 自动检查类型、lint、测试

### 5. 注意事项
- 所有 API 变更需同步更新 tRPC 路由和类型
- 数据库 schema 变更需生成并应用迁移，避免手动修改数据库
- 推荐前后端开发协同评审 API 设计，确保接口语义清晰

---

本规范文档应随项目演进而更新。团队成员有责任遵循这些规范，并在发现问题时提出改进建议。

## 数据库 Schema 变更与 tRPC 层同步流程

当数据库 schema 发生变化时，需同步更新 `packages/trpc/src/router` 目录下相关路由和输入/输出类型定义，确保前后端类型一致，保证类型安全。推荐流程如下：

1. **更新数据库 schema**：在 `packages/db` 中完成 schema 变更及迁移。
2. **同步 tRPC 路由与类型**：根据最新 schema，及时更新 `packages/trpc/src/router` 下相关路由的输入、输出类型定义和业务逻辑。
3. **类型检查**：确保 tRPC 路由的输入输出类型与数据库模型保持一致，充分利用 TypeScript 类型推断。
4. **端到端测试**：完成变更后，进行端到端测试，验证接口和数据结构的正确性，确保前端调用无类型错误。
5. **代码审查**：每次数据库 schema 变更，务必同步提交 tRPC 层相关更新，避免类型漂移。

> 建议：每次数据库 schema 变更后，务必检查并同步更新 tRPC 路由和类型定义，保证类型安全和接口一致性。
</file>

<file path="LICENSE">
MIT License

Copyright (c) 2023 Julius Marminge

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</file>

<file path="package.json">
{
  "name": "create-t3-turbo",
  "private": true,
  "engines": {
    "node": ">=20.16.0",
    "pnpm": "^9.6.0"
  },
  "packageManager": "pnpm@9.12.1",
  "scripts": {
    "build": "turbo run build",
    "clean": "git clean -xdf node_modules",
    "clean:workspaces": "turbo run clean",
    "db:generate": "turbo -F @acme/db generate",
    "db:studio": "turbo -F @acme/db studio",
    "dev": "turbo watch dev --continue",
    "dev:next": "turbo watch dev -F @acme/nextjs...",
    "format": "turbo run format --continue -- --cache --cache-location .cache/.prettiercache",
    "format:fix": "turbo run format --continue -- --write --cache --cache-location .cache/.prettiercache",
    "lint": "turbo run lint --continue -- --cache --cache-location .cache/.eslintcache",
    "lint:fix": "turbo run lint --continue -- --fix --cache --cache-location .cache/.eslintcache",
    "lint:ws": "pnpm dlx sherif@latest",
    "postinstall": "pnpm lint:ws",
    "typecheck": "turbo run typecheck",
    "ui-add": "turbo run ui-add"
  },
  "devDependencies": {
    "@acme/prettier-config": "workspace:*",
    "@turbo/gen": "^2.1.3",
    "prettier": "catalog:",
    "turbo": "^2.3.3",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="packages/db/drizzle.config.ts">
import { defineConfig } from 'drizzle-kit';

export default defineConfig({
  schema: './src/schema.ts',
  out: './migrations',
  dialect: 'sqlite',
  driver: 'd1-http',
  dbCredentials: {
    accountId: process.env.CLOUDFLARE_ACCOUNT_ID,
    databaseId: process.env.CLOUDFLARE_DATABASE_ID,
    token: process.env.CLOUDFLARE_D1_TOKEN,
  },
});
</file>

<file path="packages/db/eslint.config.js">
import baseConfig from "@acme/eslint-config/base";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: ["dist/**"],
  },
  ...baseConfig,
];
</file>

<file path="packages/db/migrations/0000_youthful_proudstar.sql">
CREATE TABLE `moments` (
	`id` integer PRIMARY KEY NOT NULL,
	`text` text NOT NULL
);
</file>

<file path="packages/db/migrations/0001_swift_puck.sql">
ALTER TABLE `moments` ADD `userId` text NOT NULL;
</file>

<file path="packages/db/migrations/0002_sharp_leech.sql">
PRAGMA foreign_keys=OFF;--> statement-breakpoint
CREATE TABLE `__new_moments` (
	`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,
	`userId` text NOT NULL,
	`text` text NOT NULL,
	`timestamp` integer NOT NULL
);
--> statement-breakpoint
INSERT INTO `__new_moments`("id", "userId", "text", "timestamp") SELECT "id", "userId", "text", "timestamp" FROM `moments`;--> statement-breakpoint
DROP TABLE `moments`;--> statement-breakpoint
ALTER TABLE `__new_moments` RENAME TO `moments`;--> statement-breakpoint
PRAGMA foreign_keys=ON;
</file>

<file path="packages/db/migrations/0003_swift_sunfire.sql">
CREATE TABLE `recaps` (
	`id` integer PRIMARY KEY AUTOINCREMENT NOT NULL,
	`userId` text NOT NULL,
	`text` text NOT NULL,
	`createdAt` integer NOT NULL,
	`type` text NOT NULL,
	`image` text
);
</file>

<file path="packages/db/migrations/0004_thin_thunderbolt.sql">
ALTER TABLE `recaps` RENAME COLUMN "image" TO "imageId";
</file>

<file path="packages/db/migrations/0005_chunky_rocket_raccoon.sql">
ALTER TABLE `moments` RENAME COLUMN "timestamp" TO "createdAt";
</file>

<file path="packages/db/migrations/0006_pretty_morbius.sql">
CREATE TABLE `userMeta` (
	`userId` text PRIMARY KEY NOT NULL,
	`email` text NOT NULL,
	`createdAt` integer NOT NULL,
	`timezone` text DEFAULT 'America/Los_Angeles' NOT NULL,
	`lastRecapAt` integer
);
</file>

<file path="packages/db/migrations/0007_chief_quentin_quire.sql">
ALTER TABLE `userMeta` ADD `artStyle` text DEFAULT 'classical painting' NOT NULL;
</file>

<file path="packages/db/migrations/meta/_journal.json">
{
  "version": "7",
  "dialect": "sqlite",
  "entries": [
    {
      "idx": 0,
      "version": "6",
      "when": 1733157764200,
      "tag": "0000_youthful_proudstar",
      "breakpoints": true
    },
    {
      "idx": 1,
      "version": "6",
      "when": 1733335458666,
      "tag": "0001_swift_puck",
      "breakpoints": true
    },
    {
      "idx": 2,
      "version": "6",
      "when": 1733414074537,
      "tag": "0002_sharp_leech",
      "breakpoints": true
    },
    {
      "idx": 3,
      "version": "6",
      "when": 1733777186002,
      "tag": "0003_swift_sunfire",
      "breakpoints": true
    },
    {
      "idx": 4,
      "version": "6",
      "when": 1733939956621,
      "tag": "0004_thin_thunderbolt",
      "breakpoints": true
    },
    {
      "idx": 5,
      "version": "6",
      "when": 1734014162450,
      "tag": "0005_chunky_rocket_raccoon",
      "breakpoints": true
    },
    {
      "idx": 6,
      "version": "6",
      "when": 1734107117778,
      "tag": "0006_pretty_morbius",
      "breakpoints": true
    },
    {
      "idx": 7,
      "version": "6",
      "when": 1734108900701,
      "tag": "0007_chief_quentin_quire",
      "breakpoints": true
    }
  ]
}
</file>

<file path="packages/db/migrations/meta/0000_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "524fd2f7-6a3e-47ca-b303-636388fd0c10",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0001_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "ec3baaeb-cfd0-4ce7-88b8-b4650f712ff7",
  "prevId": "524fd2f7-6a3e-47ca-b303-636388fd0c10",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0002_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "53bdbd5e-8f15-485f-bd16-ab338475abd5",
  "prevId": "ec3baaeb-cfd0-4ce7-88b8-b4650f712ff7",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0003_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "26eb3615-18f7-4104-b125-bc45621a8b01",
  "prevId": "53bdbd5e-8f15-485f-bd16-ab338475abd5",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recaps": {
      "name": "recaps",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0004_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "5f082d0c-d6b9-40dc-a097-24f67f55d3cd",
  "prevId": "26eb3615-18f7-4104-b125-bc45621a8b01",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recaps": {
      "name": "recaps",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "imageId": {
          "name": "imageId",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {
      "\"recaps\".\"image\"": "\"recaps\".\"imageId\""
    }
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0005_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "8b8075ea-3dea-4c85-8ec6-2e927358fa92",
  "prevId": "5f082d0c-d6b9-40dc-a097-24f67f55d3cd",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recaps": {
      "name": "recaps",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "imageId": {
          "name": "imageId",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {
      "\"moments\".\"timestamp\"": "\"moments\".\"createdAt\""
    }
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0006_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "9e01e7f0-5752-4a96-812a-7f759208180f",
  "prevId": "8b8075ea-3dea-4c85-8ec6-2e927358fa92",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recaps": {
      "name": "recaps",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "imageId": {
          "name": "imageId",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "userMeta": {
      "name": "userMeta",
      "columns": {
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'America/Los_Angeles'"
        },
        "lastRecapAt": {
          "name": "lastRecapAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/migrations/meta/0007_snapshot.json">
{
  "version": "6",
  "dialect": "sqlite",
  "id": "fbcf550e-e1c5-45bc-b899-877b57fdd52d",
  "prevId": "9e01e7f0-5752-4a96-812a-7f759208180f",
  "tables": {
    "moments": {
      "name": "moments",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "recaps": {
      "name": "recaps",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "imageId": {
          "name": "imageId",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "userMeta": {
      "name": "userMeta",
      "columns": {
        "userId": {
          "name": "userId",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'America/Los_Angeles'"
        },
        "lastRecapAt": {
          "name": "lastRecapAt",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "artStyle": {
          "name": "artStyle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'classical painting'"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
</file>

<file path="packages/db/package.json">
{
  "name": "@acme/db",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "default": "./src/index.ts"
    }
  },
  "license": "MIT",
  "scripts": {
    "build": "tsc",
    "clean": "git clean -xdf .cache .turbo dist node_modules",
    "dev": "tsc",
    "format": "prettier --check . --ignore-path ../../.gitignore",
    "lint": "eslint",
    "push": "pnpm with-env drizzle-kit push",
    "studio": "pnpm with-env drizzle-kit studio",
    "typecheck": "tsc --noEmit --emitDeclarationOnly false",
    "with-env": "dotenv -e ../../.env --",
    "generate": "pnpm with-env drizzle-kit generate",
    "migrate": "pnpm with-env drizzle-kit migrate"
  },
  "dependencies": {
    "@vercel/postgres": "^0.10.0",
    "drizzle-orm": "^0.35.1",
    "drizzle-zod": "^0.5.1",
    "zod": "catalog:"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/prettier-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "dotenv-cli": "^7.4.2",
    "drizzle-kit": "^0.26.2",
    "eslint": "catalog:",
    "prettier": "catalog:",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="packages/db/src/client.ts">
// packages/db/src/client.ts
import * as schema from "./schema";
import { drizzle } from "drizzle-orm/d1";
import type { D1Database } from "@cloudflare/workers-types";
import type { DrizzleD1Database } from "drizzle-orm/d1";

// Explicitly type the Drizzle DB with the imported schema
export type DrizzleDB = DrizzleD1Database<typeof schema>;

export function getDB(env: { DB: D1Database }): DrizzleDB {
  return drizzle(env.DB, { schema }) as DrizzleDB;
}
</file>

<file path="packages/db/src/index.ts">
export {getDB} from './client';
export type { DrizzleDB } from './client';
export * from './schema';
</file>

<file path="packages/db/src/schema.ts">
import { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core';

export const moments = sqliteTable('moments', {
  id: integer('id').primaryKey({ autoIncrement: true }),
  userId: text('userId').notNull(),
  createdAt: integer({ mode: 'timestamp' }).notNull(),
  text: text('text').notNull(),
  
});


type RecapType = 'daily' | 'weekly' | 'monthly';

export const recaps = sqliteTable('recaps', {
  id: integer('id').primaryKey({ autoIncrement: true }),
  userId: text('userId').notNull(),
  text: text('text').notNull(),
  createdAt: integer({ mode: 'timestamp' }).notNull(),
  type: text('type').$type<RecapType>().notNull(),
  imageId: text('imageId'),
});

type ArtStyle = 'classical painting' | 'ethereal animated fairy' | 'childrens book' | '3d animated style';

export const userMeta = sqliteTable('userMeta', {
  userId: text('userId').primaryKey(),
  email: text('email').notNull(),
  createdAt: integer({ mode: 'timestamp' }).notNull(),
  timezone: text('timezone').default('America/Los_Angeles').notNull(),
  lastRecapAt: integer({ mode: 'timestamp' }),
  artStyle: text('artStyle').$type<ArtStyle>().default('classical painting').notNull(),
});
</file>

<file path="packages/db/tsconfig.json">
{
  "extends": "@acme/tsconfig/internal-package.json",
  "include": ["src"],
  "exclude": ["node_modules"]
}
</file>

<file path="packages/db/wrangler.toml">
name = ""
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = ""
database_id = ""
migrations_dir = "migrations"
</file>

<file path="packages/trpc/eslint.config.js">
import baseConfig from "@acme/eslint-config/base";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: ["dist/**"],
  },
  ...baseConfig,
];
</file>

<file path="packages/trpc/package.json">
{
  "name": "@acme/trpc",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "default": "./src/index.ts"
    }
  },
  "license": "MIT",
  "scripts": {
    "build": "tsc",
    "clean": "git clean -xdf .cache .turbo dist node_modules",
    "dev": "tsc",
    "format": "prettier --check . --ignore-path ../../.gitignore",
    "lint": "eslint",
    "typecheck": "tsc --noEmit --emitDeclarationOnly false"
  },
  "dependencies": {
    "@acme/db": "workspace:*",
    "@acme/validators": "workspace:*",
    "@clerk/nextjs": "^6.4.2",
    "@trpc/server": "11.0.0-rc.633",
    "superjson": "2.2.1",
    "zod": "catalog:"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/prettier-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "@cloudflare/workers-types":"4.20241205.0",
    "eslint": "catalog:",
    "prettier": "catalog:",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="packages/trpc/src/index.ts">
export { appRouter, type AppRouter } from './root';
export { createContext } from './trpc';
</file>

<file path="packages/trpc/src/root.ts">
import {createTRPCRouter } from './trpc';
import { postRouter } from './router/post';
import { momentsRouter } from './router/moments';
import { recapsRouter } from './router/recaps';
import { userRouter } from './router/user';

export const appRouter = createTRPCRouter({
  post: postRouter,
  moments: momentsRouter,
  recaps: recapsRouter,
  user: userRouter,
});

export type AppRouter = typeof appRouter;
</file>

<file path="packages/trpc/src/router/moments.ts">
import { moments, userMeta } from "@acme/db";
import { eq, gte, desc, and } from 'drizzle-orm';

import {protectedProcedure} from "../trpc";
import { z } from "zod";

const getPacificTime = (date: Date = new Date()) => {
    return new Date(
        date.toLocaleString('en-US', {
            timeZone: 'America/Los_Angeles'
        })
    );
};

// Helper function to get start of day in PT
const getStartOfDayPT = () => {
    const nowPT = getPacificTime();
    const startOfDay = new Date(nowPT);
    startOfDay.setHours(0, 0, 0, 0);
    return startOfDay;
};

export const momentsRouter = {
  add: protectedProcedure
    .input(z.string())
    .mutation(async ({ input, ctx}) => {
      const { userId } = ctx.user;
      if (!userId) return {success: false};
      
      const nowPT = getPacificTime();

      // Insert moment first
      await ctx.db.insert(moments).values({ 
        text: input, 
        userId, 
        createdAt: nowPT
      });
      
      // Then update user meta
      await ctx.db.update(userMeta)
        .set({ lastRecapAt: nowPT })
        .where(eq(userMeta.userId, userId));
      
      return { success: true };
    }),
  getAll: protectedProcedure
    .query(
      async ({ ctx }) => {
        if (!ctx.user.userId) return [];
        
        const startOfToday = getStartOfDayPT();
        
        const userMoments = await ctx.db
          .select()
          .from(moments)
          .where(
            and(
              eq(moments.userId, ctx.user.userId),
              gte(moments.createdAt, startOfToday)
            )
          )
          .orderBy(desc(moments.createdAt));
          
        return userMoments;
      })
}
</file>

<file path="packages/trpc/src/router/post.ts">
import { moments } from "@acme/db";

import {protectedProcedure, publicProcedure} from "../trpc";
import { z } from "zod";

export const postRouter = {
  all: publicProcedure
    .input(z.string())
    .query(({ input}) => {
    return { id: 1, title: input };
  }),
  private: protectedProcedure
    .input(z.string())
    .query(({ input}) => {
      return { id: 1, title: input };
    }),
  db: protectedProcedure
    .query(async ({ ctx}) => {

      const allMoments = await ctx.db.select().from(moments).all();
      if (!allMoments.length) { return [{"id": 19999, "title": "No moments"}]; }

      return allMoments;
    }),
}
</file>

<file path="packages/trpc/src/router/recaps.ts">
import { z } from "zod";
import { protectedProcedure } from "../trpc";
import { recaps } from "@acme/db";
import { eq } from 'drizzle-orm';

export const recapsRouter = {
  getAll: protectedProcedure
    .query(async ({ ctx }) => {
      if (!ctx.user.userId) return [];
      const userRecaps = await ctx.db
        .select()
        .from(recaps)
        .where(eq(recaps.userId, ctx.user.userId));
      return userRecaps;
    }),
  getById: protectedProcedure
    .input(z.coerce.number().positive())
    .query(async ({ ctx, input }) => {
      if (!ctx.user.userId) return null;
      
      const recap = await ctx.db
        .select()
        .from(recaps)
        .where(eq(recaps.id, input))
        .limit(1);

      if (!recap[0]) return null;

      return recap[0];
    }),
};
</file>

<file path="packages/trpc/src/router/user.ts">
import { z } from "zod";
import { protectedProcedure } from "../trpc";
import { userMeta } from "@acme/db";
import { eq } from 'drizzle-orm';

const artStyles = ['classical painting', 'ethereal animated fairy', 'childrens book', '3d animated style'] as const;

export const userRouter = {
  updateArtStyle: protectedProcedure
    .input(z.enum(artStyles))
    .mutation(async ({ ctx, input }) => {
      if (!ctx.user.userId) throw new Error("Not authenticated");
      
      await ctx.db
        .update(userMeta)
        .set({ artStyle: input })
        .where(eq(userMeta.userId, ctx.user.userId));

      return { success: true };
    }),
    
  getPreferences: protectedProcedure
    .query(async ({ ctx }) => {
      if (!ctx.user.userId) throw new Error("Not authenticated");
      
      const preferences = await ctx.db
        .select()
        .from(userMeta)
        .where(eq(userMeta.userId, ctx.user.userId))
        .limit(1);

      // If no preferences exist, create default preferences
      if (preferences.length === 0) {
        const defaultPreferences = {
          userId: ctx.user.userId,
          email: ctx.user.userId,
          createdAt: new Date(),
          timezone: 'America/Los_Angeles',
          artStyle: 'classical painting' as const,
        };

        await ctx.db.insert(userMeta).values(defaultPreferences);
        return defaultPreferences;
      }

      return preferences[0];
    }),
};
</file>

<file path="packages/trpc/src/trpc.ts">
// packages/api/src/trpc.ts
import {initTRPC, TRPCError} from "@trpc/server";
import superjson from "superjson";
import {ZodError} from "zod";
import {createClerkClient} from '@clerk/backend'
import type {FetchCreateContextFnOptions} from '@trpc/server/adapters/fetch';
import type {CustomContext, CustomContextOptions} from "./types";

export async function createContext({
  req,
  resHeaders,
  clerkPublicKey,
  clerkSecretKey,
  db,
  imagesBucket
}: FetchCreateContextFnOptions & CustomContextOptions): Promise<CustomContext> {
  const clerk = createClerkClient({secretKey: clerkSecretKey, publishableKey: clerkPublicKey});

  const res = await clerk.authenticateRequest(req);

  const isSignedIn = res.isSignedIn

  if (!isSignedIn) {
    return {req, resHeaders, user: null, db, imagesBucket};
  }

  const user = res.toAuth();  // This can return null if not authenticated

  return {req, resHeaders, user, db, imagesBucket};
}

export type Context = Awaited<ReturnType<typeof createContext>>;

const t = initTRPC.context<typeof createContext>().create({
  transformer: superjson,
  errorFormatter: ({shape, error}) => ({
    ...shape,
    data: {
      ...shape.data,
      zodError: error.cause instanceof ZodError ? error.cause.flatten() : null,
    },
  }),
});

export const createCallerFactory = t.createCallerFactory;
export const createTRPCRouter = t.router;
export const publicProcedure = t.procedure;
export const protectedProcedure = t.procedure
  .use(({ctx, next}) => {
    if (ctx.user === null) {
      throw new TRPCError({ code: 'UNAUTHORIZED', message: 'Not authenticated or Session Expired' });
    }
    return next({
      ctx: {
        ...ctx,
        user: ctx.user,
      },
    });
  });
</file>

<file path="packages/trpc/src/types.ts">
import type {AuthObject} from '@clerk/backend';
import type {FetchCreateContextFnOptions} from '@trpc/server/adapters/fetch';
import type { DrizzleDB }from "@acme/db";
import type { R2Bucket } from '@cloudflare/workers-types';

export interface CustomContext {
  req: FetchCreateContextFnOptions['req'];
  resHeaders: FetchCreateContextFnOptions['resHeaders'];
  user: AuthObject | null;
  db: DrizzleDB;
  imagesBucket: R2Bucket;
}

export interface CustomContextOptions {
  clerkSecretKey: string;
  clerkPublicKey: string;
  db: DrizzleDB;
  imagesBucket: R2Bucket;
}
</file>

<file path="packages/trpc/tsconfig.json">
{
  "extends": "@acme/tsconfig/internal-package.json",
  "include": ["src"],
  "exclude": ["node_modules"]
}
</file>

<file path="pnpm-workspace.yaml">
packages:
  - apps/*
  - packages/*
  - tooling/*

catalog:
  "@tanstack/react-query": ^5.59.15
  "@trpc/client": ^11.0.0-rc.477
  "@trpc/react-query": ^11.0.0-rc.477
  "@trpc/server": ^11.0.0-rc.477
  eslint: ^9.12.0
  prettier: ^3.3.3
  tailwindcss: ^3.4.14
  typescript: ^5.6.3
  zod: ^3.23.8

catalogs:
  react18:
    react: 18.3.1
    react-dom: 18.3.1
    "@types/react": ^18.3.11
    "@types/react-dom": ^18.3.1
</file>

<file path="README.md">
# Cloudflare Turbo Stack

A full-stack mobile application template powered by Cloudflare's edge platform. This template provides a foundation for building AI-powered mobile apps with a web landing page, using modern tools and best practices.

## 🚀 Features

- 📱 **Expo Mobile App**: Cross-platform mobile application
- 🌐 **Astro Landing Page**: Fast, modern web presence
- 🔒 **Clerk Authentication**: Secure user management
- 🔄 **tRPC API**: Type-safe API communication
- 🤖 **Workers AI**: Edge AI processing
- 📦 **R2 Storage**: Image and asset storage
- 💾 **D1 Database**: Edge SQLite database with Drizzle ORM
- 🏗️ **Cloudflare Workers**: Serverless compute
- 🔄 **Workflows**: Durable AI task processing

## 📦 Project Structure

```
.
├── apps/
│   ├── apiservice/    # Cloudflare Worker API
│   └── astro/         # Landing page
├── packages/
│   ├── db/           # Database schema and utilities
│   └── trpc/         # tRPC router definitions
└── tooling/          # Shared development tools
```

## 🛠️ Prerequisites

- Node.js >= 20.16.0
- pnpm >= 9.6.0
- Cloudflare account
- Wrangler CLI (`npm install -g wrangler`)
- Clerk account

## 🚀 Getting Started

Note: In a production app, you'll want to properly set up secrets and proper dev/prod environments using wrangler, but this will get you up and running quickly.

1. **Clone the repository**

```bash
git clone <repository-url>
cd cloudflare-turbo
```

2. **Install dependencies**

```bash
pnpm install
```

3. **Configure Cloudflare**

Login to Cloudflare CLI:
```bash
wrangler login
```

Update the following `wrangler.toml` files with your Cloudflare settings:
- `apps/apiservice/wrangler.toml`
- `packages/db/wrangler.toml`

4. **Environment Setup**

Create `.env` files based on the provided examples and update with your credentials:
```bash
cp apps/expo/.env.example apps/expo/.env
```

5. **Start Development**

```bash
pnpm dev
```

## 🔧 Configuration

### Cloudflare Setup

1. Create a D1 Database:
```bash
wrangler d1 create <your-database-name>
```

2. Create an R2 Bucket:
```bash
wrangler r2 bucket create <your-bucket-name>
```

3. Update the respective `wrangler.toml` files with the created resource IDs

### Clerk Setup

1. Create a Clerk application at https://clerk.dev
2. Add the Clerk keys to your `.env` files

## 📝 Development Notes

- Use `pnpm dev` to start all services in development mode
- Database migrations can be run with `pnpm db:generate`
- The project uses a monorepo structure with Turborepo for efficient builds

## 🚀 Deployment

1. **Deploy API Service**
```bash
cd apps/apiservice
pnpm run deploy
```

2. **Deploy Landing Page**
```bash
cd apps/astro
pnpm run deploy
```

3. **Deploy Workflows**
```bash
cd apps/workflows
pnpm run deploy
```

## 📚 Tech Stack

- **Frontend**: React Native (Expo), Astro
- **Backend**: Cloudflare Workers, Workers AI
- **Database**: Cloudflare D1 (SQLite)
- **Storage**: Cloudflare R2
- **Authentication**: Clerk
- **API**: tRPC
- **Build Tool**: Turborepo
- **Package Manager**: pnpm

## 🤝 Contributing

Contributions are welcome! Please read our contributing guidelines before submitting PRs.

## 📄 License

This project is licensed under the MIT License - see the LICENSE file for details.
</file>

<file path="tooling/eslint/base.js">
/// <reference types="./types.d.ts" />

import * as path from "node:path";
import { includeIgnoreFile } from "@eslint/compat";
import eslint from "@eslint/js";
import importPlugin from "eslint-plugin-import";
import turboPlugin from "eslint-plugin-turbo";
import tseslint from "typescript-eslint";

/**
 * All packages that leverage t3-env should use this rule
 */
export const restrictEnvAccess = tseslint.config(
  { ignores: ["**/env.ts"] },
  {
    files: ["**/*.js", "**/*.ts", "**/*.tsx"],
    rules: {
      "no-restricted-properties": [
        "error",
        {
          object: "process",
          property: "env",
          message:
            "Use `import { env } from '~/env'` instead to ensure validated types.",
        },
      ],
      "no-restricted-imports": [
        "error",
        {
          name: "process",
          importNames: ["env"],
          message:
            "Use `import { env } from '~/env'` instead to ensure validated types.",
        },
      ],
    },
  },
);

export default tseslint.config(
  // Ignore files not tracked by VCS and any config files
  includeIgnoreFile(path.join(import.meta.dirname, "../../.gitignore")),
  { ignores: ["**/*.config.*"] },
  {
    files: ["**/*.js", "**/*.ts", "**/*.tsx"],
    plugins: {
      import: importPlugin,
      turbo: turboPlugin,
    },
    extends: [
      eslint.configs.recommended,
      ...tseslint.configs.recommended,
      ...tseslint.configs.recommendedTypeChecked,
      ...tseslint.configs.stylisticTypeChecked,
    ],
    rules: {
      ...turboPlugin.configs.recommended.rules,
      "@typescript-eslint/no-unused-vars": [
        "error",
        { argsIgnorePattern: "^_", varsIgnorePattern: "^_" },
      ],
      "@typescript-eslint/consistent-type-imports": [
        "warn",
        { prefer: "type-imports", fixStyle: "separate-type-imports" },
      ],
      "@typescript-eslint/no-misused-promises": [
        2,
        { checksVoidReturn: { attributes: false } },
      ],
      "@typescript-eslint/no-unnecessary-condition": [
        "error",
        {
          allowConstantLoopConditions: true,
        },
      ],
      "@typescript-eslint/no-non-null-assertion": "error",
      "import/consistent-type-specifier-style": ["error", "prefer-top-level"],
    },
  },
  {
    linterOptions: { reportUnusedDisableDirectives: true },
    languageOptions: { parserOptions: { projectService: true } },
  },
);
</file>

<file path="tooling/eslint/nextjs.js">
import nextPlugin from "@next/eslint-plugin-next";

/** @type {Awaited<import('typescript-eslint').Config>} */
export default [
  {
    files: ["**/*.ts", "**/*.tsx"],
    plugins: {
      "@next/next": nextPlugin,
    },
    rules: {
      ...nextPlugin.configs.recommended.rules,
      ...nextPlugin.configs["core-web-vitals"].rules,
      // TypeError: context.getAncestors is not a function
      "@next/next/no-duplicate-head": "off",
    },
  },
];
</file>

<file path="tooling/eslint/package.json">
{
  "name": "@acme/eslint-config",
  "private": true,
  "version": "0.3.0",
  "type": "module",
  "exports": {
    "./base": "./base.js",
    "./nextjs": "./nextjs.js",
    "./react": "./react.js"
  },
  "scripts": {
    "clean": "git clean -xdf .cache .turbo node_modules",
    "format": "prettier --check . --ignore-path ../../.gitignore",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "@eslint/compat": "^1.2.0",
    "@next/eslint-plugin-next": "^14.2.15",
    "eslint-plugin-import": "^2.31.0",
    "eslint-plugin-jsx-a11y": "^6.10.0",
    "eslint-plugin-react": "^7.37.1",
    "eslint-plugin-react-hooks": "^5.0.0",
    "eslint-plugin-turbo": "^2.1.3",
    "typescript-eslint": "^8.9.0"
  },
  "devDependencies": {
    "@acme/prettier-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "@types/eslint__js": "8.42.3",
    "eslint": "catalog:",
    "prettier": "catalog:",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="tooling/eslint/react.js">
import reactPlugin from "eslint-plugin-react";
import hooksPlugin from "eslint-plugin-react-hooks";

/** @type {Awaited<import('typescript-eslint').Config>} */
export default [
  {
    files: ["**/*.ts", "**/*.tsx"],
    plugins: {
      react: reactPlugin,
      "react-hooks": hooksPlugin,
    },
    rules: {
      ...reactPlugin.configs["jsx-runtime"].rules,
      ...hooksPlugin.configs.recommended.rules,
    },
    languageOptions: {
      globals: {
        React: "writable",
      },
    },
  },
];
</file>

<file path="tooling/eslint/tsconfig.json">
{
  "extends": "@acme/tsconfig/base.json",
  "include": ["."],
  "exclude": ["node_modules"]
}
</file>

<file path="tooling/eslint/types.d.ts">
/**
 * Since the ecosystem hasn't fully migrated to ESLint's new FlatConfig system yet,
 * we "need" to type some of the plugins manually :(
 */

declare module "eslint-plugin-import" {
  import type { Linter, Rule } from "eslint";

  export const configs: {
    recommended: { rules: Linter.RulesRecord };
  };
  export const rules: Record<string, Rule.RuleModule>;
}

declare module "eslint-plugin-react" {
  import type { Linter, Rule } from "eslint";

  export const configs: {
    recommended: { rules: Linter.RulesRecord };
    all: { rules: Linter.RulesRecord };
    "jsx-runtime": { rules: Linter.RulesRecord };
  };
  export const rules: Record<string, Rule.RuleModule>;
}

declare module "eslint-plugin-react-hooks" {
  import type { Linter, Rule } from "eslint";

  export const configs: {
    recommended: {
      rules: {
        "rules-of-hooks": Linter.RuleEntry;
        "exhaustive-deps": Linter.RuleEntry;
      };
    };
  };
  export const rules: Record<string, Rule.RuleModule>;
}

declare module "@next/eslint-plugin-next" {
  import type { Linter, Rule } from "eslint";

  export const configs: {
    recommended: { rules: Linter.RulesRecord };
    "core-web-vitals": { rules: Linter.RulesRecord };
  };
  export const rules: Record<string, Rule.RuleModule>;
}
</file>

<file path="tooling/github/package.json">
{
  "name": "@acme/github"
}
</file>

<file path="tooling/github/setup/action.yml">
name: "Setup and install"
description: "Common setup steps for Actions"

runs:
  using: composite
  steps:
    - uses: pnpm/action-setup@v4
    - uses: actions/setup-node@v4
      with:
        node-version-file: ".nvmrc"
        cache: "pnpm"

    - shell: bash
      run: pnpm add -g turbo

    - shell: bash
      run: pnpm install
</file>

<file path="tooling/prettier/index.js">
import { fileURLToPath } from "url";

/** @typedef {import("prettier").Config} PrettierConfig */
/** @typedef {import("prettier-plugin-tailwindcss").PluginOptions} TailwindConfig */
/** @typedef {import("@ianvs/prettier-plugin-sort-imports").PluginConfig} SortImportsConfig */

/** @type { PrettierConfig | SortImportsConfig | TailwindConfig } */
const config = {
  plugins: [
    "@ianvs/prettier-plugin-sort-imports",
    "prettier-plugin-tailwindcss",
  ],
  tailwindConfig: fileURLToPath(
    new URL("../../tooling/tailwind/web.ts", import.meta.url),
  ),
  tailwindFunctions: ["cn", "cva"],
  importOrder: [
    "<TYPES>",
    "^(react/(.*)$)|^(react$)|^(react-native(.*)$)",
    "^(next/(.*)$)|^(next$)",
    "^(expo(.*)$)|^(expo$)",
    "<THIRD_PARTY_MODULES>",
    "",
    "<TYPES>^@acme",
    "^@acme/(.*)$",
    "",
    "<TYPES>^[.|..|~]",
    "^~/",
    "^[../]",
    "^[./]",
  ],
  importOrderParserPlugins: ["typescript", "jsx", "decorators-legacy"],
  importOrderTypeScriptVersion: "4.4.0",
  overrides: [
    {
      files: "*.json.hbs",
      options: {
        parser: "json",
      },
    },
    {
      files: "*.js.hbs",
      options: {
        parser: "babel",
      },
    },
  ],
};

export default config;
</file>

<file path="tooling/prettier/package.json">
{
  "name": "@acme/prettier-config",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "exports": {
    ".": "./index.js"
  },
  "scripts": {
    "clean": "git clean -xdf .cache .turbo node_modules",
    "format": "prettier --check . --ignore-path ../../.gitignore",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "@ianvs/prettier-plugin-sort-imports": "^4.3.1",
    "prettier": "catalog:",
    "prettier-plugin-tailwindcss": "^0.6.8"
  },
  "devDependencies": {
    "@acme/tsconfig": "workspace:*",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="tooling/prettier/tsconfig.json">
{
  "extends": "@acme/tsconfig/base.json",
  "include": ["."],
  "exclude": ["node_modules"]
}
</file>

<file path="tooling/tailwind/base.ts">
import type { Config } from "tailwindcss";

export default {
  darkMode: ["class"],
  content: ["src/**/*.{ts,tsx}"],
  theme: {
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderColor: {
        DEFAULT: "hsl(var(--border))",
      },
    },
  },
} satisfies Config;
</file>

<file path="tooling/tailwind/eslint.config.js">
// FIXME: This kinda stinks...
/// <reference types="../../tooling/eslint/types.d.ts" />

import baseConfig from "@acme/eslint-config/base";

export default [...baseConfig];
</file>

<file path="tooling/tailwind/native.ts">
import type { Config } from "tailwindcss";

import base from "./base";

export default {
  content: base.content,
  presets: [base],
  theme: {},
} satisfies Config;
</file>

<file path="tooling/tailwind/package.json">
{
  "name": "@acme/tailwind-config",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "exports": {
    "./native": "./native.ts",
    "./web": "./web.ts"
  },
  "license": "MIT",
  "scripts": {
    "clean": "git clean -xdf .cache .turbo node_modules",
    "format": "prettier --check . --ignore-path ../../.gitignore",
    "lint": "eslint",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "postcss": "^8.4.47",
    "tailwindcss": "catalog:",
    "tailwindcss-animate": "^1.0.7"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/prettier-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "eslint": "catalog:",
    "prettier": "catalog:",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="tooling/tailwind/tsconfig.json">
{
  "extends": "@acme/tsconfig/base.json",
  "include": ["."],
  "exclude": ["node_modules"]
}
</file>

<file path="tooling/tailwind/web.ts">
import type { Config } from "tailwindcss";
import animate from "tailwindcss-animate";

import base from "./base";

export default {
  content: base.content,
  presets: [base],
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [animate],
} satisfies Config;
</file>

<file path="tooling/typescript/base.json">
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "compilerOptions": {
    /** Base Options */
    "esModuleInterop": true,
    "skipLibCheck": true,
    "target": "ES2022",
    "lib": ["ES2022"],
    "allowJs": true,
    "resolveJsonModule": true,
    "moduleDetection": "force",
    "isolatedModules": true,

    /** Keep TSC performant in monorepos */
    "incremental": true,
    "disableSourceOfProjectReferenceRedirect": true,
    "tsBuildInfoFile": "${configDir}/.cache/tsbuildinfo.json",

    /** Strictness */
    "strict": true,
    "noUncheckedIndexedAccess": true,
    "checkJs": true,

    /** Transpile using Bundler (not tsc) */
    "module": "Preserve",
    "moduleResolution": "Bundler",
    "noEmit": true
  },
  "exclude": ["node_modules", "build", "dist", ".next", ".expo"]
}
</file>

<file path="tooling/typescript/internal-package.json">
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "./base.json",
  "compilerOptions": {
    /** Emit types for internal packages to speed up editor performance. */
    "declaration": true,
    "declarationMap": true,
    "emitDeclarationOnly": true,
    "noEmit": false,
    "outDir": "${configDir}/dist"
  }
}
</file>

<file path="tooling/typescript/package.json">
{
  "name": "@acme/tsconfig",
  "private": true,
  "version": "0.1.0",
  "files": [
    "*.json"
  ]
}
</file>

<file path="turbo.json">
{
  "$schema": "https://turborepo.org/schema.json",
  "ui": "tui",
  "tasks": {
    "topo": {
      "dependsOn": ["^topo"]
    },
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".cache/tsbuildinfo.json", "dist/**"]
    },
    "dev": {
      "dependsOn": ["^dev"],
      "cache": false,
      "persistent": false
    },
    "format": {
      "outputs": [".cache/.prettiercache"],
      "outputLogs": "new-only"
    },
    "lint": {
      "dependsOn": ["^topo", "^build"],
      "outputs": [".cache/.eslintcache"]
    },
    "typecheck": {
      "dependsOn": ["^topo", "^build"],
      "outputs": [".cache/tsbuildinfo.json"]
    },
    "clean": {
      "cache": false
    },
    "//#clean": {
      "cache": false
    },
    "push": {
      "cache": false,
      "interactive": true
    },
    "studio": {
      "cache": false,
      "persistent": true
    },
    "ui-add": {
      "cache": false,
      "interactive": true
    }
  },
  "globalEnv": [
    "CLOUDFLARE_ACCOUNT_ID",
    "CLOUDFLARE_DATABASE_ID",
    "CLOUDFLARE_D1_TOKEN",
    "CLERK_SECRET_KEY",
    "PORT",
    "INNGEST_EVENT_KEY"
  ],
  "globalPassThroughEnv": [
    "NODE_ENV",
    "CI",
    "VERCEL",
    "VERCEL_ENV",
    "VERCEL_URL",
    "npm_lifecycle_event"
  ]
}
</file>

<file path="turbo/generators/config.ts">
import { execSync } from "node:child_process";
import type { PlopTypes } from "@turbo/gen";

interface PackageJson {
  name: string;
  scripts: Record<string, string>;
  dependencies: Record<string, string>;
  devDependencies: Record<string, string>;
}

export default function generator(plop: PlopTypes.NodePlopAPI): void {
  plop.setGenerator("init", {
    description: "Generate a new package for the Acme Monorepo",
    prompts: [
      {
        type: "input",
        name: "name",
        message:
          "What is the name of the package? (You can skip the `@acme/` prefix)",
      },
      {
        type: "input",
        name: "deps",
        message:
          "Enter a space separated list of dependencies you would like to install",
      },
    ],
    actions: [
      (answers) => {
        if ("name" in answers && typeof answers.name === "string") {
          if (answers.name.startsWith("@acme/")) {
            answers.name = answers.name.replace("@acme/", "");
          }
        }
        return "Config sanitized";
      },
      {
        type: "add",
        path: "packages/{{ name }}/eslint.config.js",
        templateFile: "templates/eslint.config.js.hbs",
      },
      {
        type: "add",
        path: "packages/{{ name }}/package.json",
        templateFile: "templates/package.json.hbs",
      },
      {
        type: "add",
        path: "packages/{{ name }}/tsconfig.json",
        templateFile: "templates/tsconfig.json.hbs",
      },
      {
        type: "add",
        path: "packages/{{ name }}/src/index.ts",
        template: "export const name = '{{ name }}';",
      },
      {
        type: "modify",
        path: "packages/{{ name }}/package.json",
        async transform(content, answers) {
          if ("deps" in answers && typeof answers.deps === "string") {
            const pkg = JSON.parse(content) as PackageJson;
            for (const dep of answers.deps.split(" ").filter(Boolean)) {
              const version = await fetch(
                `https://registry.npmjs.org/-/package/${dep}/dist-tags`,
              )
                .then((res) => res.json())
                .then((json) => json.latest);
              if (!pkg.dependencies) pkg.dependencies = {};
              pkg.dependencies[dep] = `^${version}`;
            }
            return JSON.stringify(pkg, null, 2);
          }
          return content;
        },
      },
      async (answers) => {
        /**
         * Install deps and format everything
         */
        if ("name" in answers && typeof answers.name === "string") {
          // execSync("pnpm dlx sherif@latest --fix", {
          //   stdio: "inherit",
          // });
          execSync("pnpm i", { stdio: "inherit" });
          execSync(
            `pnpm prettier --write packages/${answers.name}/** --list-different`,
          );
          return "Package scaffolded";
        }
        return "Package not scaffolded";
      },
    ],
  });
}
</file>

<file path="turbo/generators/templates/eslint.config.js.hbs">
import baseConfig from "@acme/eslint-config/base";

/** @type {import('typescript-eslint').Config} */
export default [
  {
    ignores: [],
  },
  ...baseConfig,
];
</file>

<file path="turbo/generators/templates/package.json.hbs">
{
  "name": "@acme/{{ name }}",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "exports": {
    ".": "./src/index.ts"
  },
  "license": "MIT",
  "scripts": {
    "build": "tsc",
    "clean": "git clean -xdf .cache .turbo dist node_modules",
    "dev": "tsc",
    "format": "prettier --check . --ignore-path ../../.gitignore",
    "lint": "eslint",
    "typecheck": "tsc --noEmit --emitDeclarationOnly false"
  },
  "devDependencies": {
    "@acme/eslint-config": "workspace:*",
    "@acme/prettier-config": "workspace:*",
    "@acme/tsconfig": "workspace:*",
    "eslint": "catalog:",
    "prettier": "catalog:",
    "typescript": "catalog:"
  },
  "prettier": "@acme/prettier-config"
}
</file>

<file path="turbo/generators/templates/tsconfig.json.hbs">
{
  "extends": "@acme/tsconfig/internal-package.json",
  "compilerOptions": {},
  "include": ["*.ts", "src"],
  "exclude": ["node_modules"]
}
</file>

</files>
